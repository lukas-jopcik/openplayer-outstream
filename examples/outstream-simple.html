<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenPlayer - Jednoduchý Outstream Player</title>
    <style>
        /* OpenPlayer CSS */
        @keyframes progress{0%{background-position:0 0}to{background-position:-75px 0}}.op-player{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%;background:#000;font-family:sans-serif;line-height:1.15;min-height:30px;position:relative}.op-player__video{overflow:hidden}.op-player,.op-player *,.op-player :after,.op-player :before{box-sizing:border-box}.op-player__media{display:inline-block;height:auto;object-fit:contain;position:relative;width:100%!important}.op-player [aria-hidden=true]{display:none}.op-player__audio{background:#000}.op-player .media-controls.mac.fullscreen>.controls-bar{display:none}.op-player__loader{animation:spin 1s linear infinite;border:5px solid #fff;border-radius:50%;border-top-color:red}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}.op-controls{background:rgba(0,0,0,.2);border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0;color:#fff;display:flex;font-size:.85em;padding:0 4px;pointer-events:all;position:absolute;transition:bottom .3s ease;width:100%;z-index:3}.op-controls.op-controls__stacked{flex-direction:column}.op-controls--hidden .op-controls{bottom:-36px;pointer-events:none}.op-player__video .op-controls{margin-top:5px;padding-top:11px}.op-controls *{flex-grow:0;pointer-events:all}.op-controls button,.op-player__play,.op-settings__back{appearance:button;background:transparent;border:none;cursor:pointer;font-family:inherit;font-size:100%;line-height:1.15;margin:0;overflow:visible;position:relative;text-transform:none}.op-controls button{padding:2px 4px 3px;z-index:4}.op-controls button>span{color:#fff}.op-controls .op-controls__container{position:relative}.op-player__loader{height:60px;margin-left:-30px;margin-top:-30px;top:calc(50% - 20px);width:60px}.op-player__loader,.op-player__play{display:block;left:50%;position:absolute;z-index:2}.op-player__play{background:transparent;border:0;border-color:transparent transparent transparent #fff;border-style:solid;border-width:26px 0 26px 46px;cursor:pointer;height:52px;margin-left:-18px;margin-top:-23px;padding:0;top:calc(50% - 23px);transition:all .1s ease;width:0;will-change:border-width}.op-player__play>span{clip:rect(0,0,0,0);border:0;clip-path:inset(50%);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.op-player__play--paused{border-style:double;border-width:0 0 0 46px}.op-player__play:hover{border-color:transparent transparent transparent red}.op-controls--hidden .op-player__loader,.op-controls--hidden .op-player__play{top:50%}.op-controls--hidden .op-player__play{margin-top:-26px}.op-controls button::-moz-focus-inner,.op-player__play::-moz-focus-inner,.op-settings__back{border-style:none;padding:0}.op-controls button:-moz-focusing,.op-player__play:-moz-focusing,.op-settings__back{outline:1px dotted ButtonText}.op-controls button:before{color:#fff;display:inline-block;height:15px;margin-left:.2em;margin-right:.2em;text-align:center;width:15px}.op-controls-layer__bottom,.op-controls-layer__center,.op-controls-layer__top{display:flex}.op-controls .op-control__left{justify-self:flex-start}.op-controls .op-control__middle{justify-self:center}.op-controls .op-control__right{justify-self:flex-end;margin-left:auto}.op-controls .op-control__right~.op-control__right{margin-left:0}.op-controls button:hover{opacity:.5}.op-controls .op-control--no-hover:hover{opacity:1}.op-controls button,.op-controls input[type=range]{touch-action:manipulation}.op-controls .op-controls-time{margin:4px 3px}.op-controls__playpause:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0zMS4xIDE2LjJjLjcuMyAxIDEgLjcgMS43LS4xLjMtLjQuNi0uNy43TDUgMzQuN2MtMS4xLjctMiAuMi0yLTEuMVYxLjRDMyAuMSA0LS40IDUgLjNsMjYuMSAxNS45eiIvPjwvc3ZnPg==)}.op-controls__playpause--pause:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik00LjcgMGg0LjhjMS4yIDAgMi4yIDEgMi4yIDIuMnYzMC42YzAgMS4yLTEgMi4yLTIuMiAyLjJINC43Yy0xLjIgMC0yLjItMS0yLjItMi4yVjIuMkMyLjUgMSAzLjUgMCA0LjcgMHpNMjYuMiAwSDMxYzEuMiAwIDIuMiAxIDIuMiAyLjJ2MzAuNmMwIDEuMi0xIDIuMi0yLjIgMi4yaC00LjhDMjUgMzUgMjQgMzQgMjQgMzIuOFYyLjJDMjQgMSAyNSAwIDI2LjIgMHoiLz48L3N2Zz4=)}.op-controls__playpause--replay:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0yNi42IDkuNGM0LjIgNS4zIDMuMyAxMi45LTIgMTcuMXMtMTIuOSAzLjMtMTcuMS0yQzMuOCAxOS45IDQgMTMuMyA4IDguOUw0LjYgNS40Yy02LjQgNi45LTYgMTcuNi45IDI0czE3LjYgNiAyNC0uOWM1LjktNi4zIDYuMS0xNiAuNS0yMi42bC0zLjQgMy41eiIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0yMC40IDIuOGMtLjItLjguMy0xLjYgMS4xLTEuOC4yLS4xLjUtLjEuNyAwTDM0IDIuNmMxLjIuMiAxLjQgMSAuNiAxLjhMMjMuOSAxNS4xYy0uOC44LTEuNi42LTEuOC0uNkwyMC40IDIuOHoiLz48L3N2Zz4=)}.op-controls__fullscreen:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzV2MzVIMHoiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRiIgZD0iTTEwLjIgMjAuNEg3LjN2Ny4zaDcuM3YtMi45aC00LjR2LTQuNHptLTIuOS01LjhoMi45di00LjRoNC40VjcuM0g3LjN2Ny4zem0xNy41IDEwLjJoLTQuNHYyLjloNy4zdi03LjNoLTIuOXY0LjR6TTIwLjQgNy4zdjIuOWg0LjR2NC40aDIuOVY3LjNoLTcuM3oiLz48L3N2Zz4=);width:20px!important}.op-controls__fullscreen--out:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzV2MzVIMHoiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRiIgZD0iTTcuMyAyMy4zaDQuNHY0LjRoMi45di03LjNINy4zdjIuOXptNC40LTExLjZINy4zdjIuOWg3LjNWNy4zaC0yLjl2NC40em04LjcgMTZoMi45di00LjNoNC40di0yLjloLTcuM3Y3LjJ6bTIuOS0xNlY3LjNoLTIuOXY3LjNoNy4zdi0yLjloLTQuNHoiLz48L3N2Zz4=);width:20px!important}.op-controls__mute:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0yNy44IDI4LjdjLS42IDAtMS4yLS4zLTEuNS0uOS0uNS0uOC0uMi0xLjkuNi0yLjQgNC40LTIuNiA1LjktOC4yIDMuNC0xMi42LS44LTEuNC0yLTIuNi0zLjQtMy40LS45LS4zLTEuMy0xLjQtLjktMi4zczEuNC0xLjMgMi4zLS44Yy4xIDAgLjIuMS4zLjIgNi4xIDMuNiA4LjEgMTEuNCA0LjUgMTcuNS0xLjEgMS45LTIuNyAzLjQtNC41IDQuNS0uMi4yLS41LjItLjguMnoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMjQuNSAyMy4xYy0uNiAwLTEuMi0uMy0xLjUtLjktLjUtLjgtLjItMS45LjYtMi40IDEuMy0uNyAxLjctMi4zIDEtMy42LS4yLS40LS42LS44LTEtMS0uOC0uNi0xLTEuNy0uNC0yLjQuNS0uNyAxLjQtLjkgMi4yLS42IDIuOSAxLjcgMy45IDUuNCAyLjMgOC4zLS41LjktMS4zIDEuNy0yLjMgMi4zLS4zLjItLjYuMy0uOS4zek0xNy44IDQuMWwtOC4xIDYuNC0uMi4ySDFjLS42IDAtMSAuNC0xIDF2MTEuNmMwIC42LjQgMSAxIDFoOC41bC4xLjIgOC4xIDYuNWMuNC4zIDEuMS4zIDEuNC0uMi4xLS4yLjItLjQuMi0uNlY0LjljMC0uNi0uNS0xLTEtMS0uMi4xLS40LjEtLjUuMnoiLz48L3N2Zz4=);width:18px!important}.op-controls__mute--half:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0zMC4xIDI0LjNjLS44IDAtMS41LS40LTEuOS0xLjEtLjYtMS0uMi0yLjMuOC0zIDEuNi0uOSAyLjEtMi44IDEuMy00LjQtLjMtLjUtLjctMS0xLjMtMS4zLTEtLjYtMS4zLTItLjctMyAuNi0xIDEuOS0xLjMgMi45LS43IDMuNiAyLjEgNC45IDYuNyAyLjggMTAuMy0uNyAxLjItMS42IDIuMS0yLjggMi44LS4zLjMtLjcuNC0xLjEuNHpNMjEuOSAxIDEyIDguOWwtLjIuMUgxLjJDLjUgOSAwIDkuNiAwIDEwLjN2MTQuM2MwIC43LjUgMS4yIDEuMiAxLjJoMTAuNWwuMi4yIDkuOSA3LjljLjUuNCAxLjMuNCAxLjctLjIuMi0uMi4zLS41LjMtLjhWMmMuMS0uNi0uNC0xLjItMS0xLjMtLjMgMC0uNy4xLS45LjN6Ii8+PC9zdmc+);width:18px!important}.op-controls__mute--muted:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0yOCAuMiAxNy42IDguNWwtLjIuMmgtMTFjLS43LS4xLTEuMy40LTEuNCAxLjF2MTVjMCAuNy42IDEuMyAxLjMgMS4zaDExbC4yLjIgMTAuNCA4LjNjLjYuNCAxLjQuNCAxLjgtLjIuMi0uMi4zLS41LjMtLjhWMS4yYzAtLjctLjUtMS4yLTEuMi0xLjItLjMgMC0uNi4xLS44LjJ6Ii8+PC9zdmc+);width:18px!important}.op-controls__captions:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjRkZGIiBkPSJNMCA0LjR2MjYuMmgzNVY0LjRIMHptMzAuNCAyMWMtLjIuMy0uNi41LS45LjctMS4xLjgtNi4xIDEuMS0xMS45IDEuMXMtMTEtLjMtMTIuMS0xLjFjLS4zLS4yLS43LS40LS45LS43LTEuMS0xLjQtMS4yLTMuNC0xLjMtOHMuMi02LjYgMS4zLThjLjMtLjMuNi0uNS45LS43IDEtLjggNi4zLTEuMSAxMi4xLTEuMXMxMC44LjMgMTEuOSAxLjFjLjMuMi42LjQuOS43IDEuMSAxLjQgMS4zIDMuNCAxLjMgOHMtLjIgNi42LTEuMyA4eiIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjRkZGIiBkPSJNMTYuOSAxNi4yYy0uMy0zLjYtMi4yLTUuNy01LjYtNS43LTMuMSAwLTUuNiAyLjgtNS42IDcuM3MyLjIgNy40IDUuOSA3LjRjMyAwIDUtMi4yIDUuMy01LjhoLTMuNWMtLjEgMS4zLS43IDIuNC0xLjkgMi40LTEuOSAwLTIuMi0xLjgtMi4yLTMuOCAwLTIuNy44LTQuMSAyLjEtNC4xIDEuMSAwIDEuOS44IDIgMi4zaDMuNXpNMjkgMTYuMmMtLjMtMy42LTIuMi01LjctNS42LTUuNy0zLjEgMC01LjYgMi44LTUuNiA3LjNzMi4yIDcuNCA1LjkgNy40YzMgMCA1LTIuMiA1LjMtNS44aC0zLjVjLS4xIDEuMy0uNyAyLjQtMS45IDIuNC0xLjkgMC0yLjItMS44LTIuMi0zLjggMC0yLjcuOC00LjEgMi4xLTQuMXMxLjkuOCAyIDIuM0gyOXoiLz48L3N2Zz4=);width:20px!important}.op-controls__captions.op-controls__captions--on:before{filter:invert(73%) sepia(71%) saturate(6868%) hue-rotate(356deg) brightness(101%) contrast(126%)}.op-controls__settings:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzUgMzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0zMC41IDE5LjJjLjEtLjYuMS0xLjIuMS0xLjcgMC0uNi0uMS0xLjItLjEtMS43bDMuNy0yLjljLjMtLjMuNC0uOC4yLTEuMWwtMy41LTYuMWMtLjItLjQtLjctLjUtMS4xLS40TDI1LjQgN2MtLjktLjctMS45LTEuMy0yLjktMS43TDIxLjguN2MwLS40LS4zLS43LS44LS43aC03Yy0uNCAwLS44LjMtLjguN2wtLjcgNC42Yy0xLjEuNC0yLjEgMS0zIDEuN0w1LjIgNS4zYy0uNC0uMi0uOSAwLTEuMS40TC42IDExLjhjLS4yLjQtLjEuOS4yIDEuMWwzLjcgMi45Yy0uMS42LS4xIDEuMi0uMSAxLjcgMCAuNi4xIDEuMi4xIDEuN0wuOCAyMi4xYy0uMy4zLS40LjgtLjIgMS4xbDMuNSA2LjFjLjIuNC43LjUgMS4xLjRMOS42IDI4Yy45LjcgMS45IDEuMyAyLjkgMS43bC43IDQuNmMuMS40LjQuNy45LjdoN2MuNCAwIC44LS4zLjgtLjdsLjctNC42YzEuMS0uNCAyLTEgMi45LTEuN2w0LjQgMS43Yy40LjIuOSAwIDEuMS0uNGwzLjUtNi4xYy4yLS40LjEtLjktLjItMS4xbC0zLjgtMi45em0tMTMgNC40Yy0zLjQgMC02LjEtMi43LTYuMS02LjEgMC0zLjQgMi43LTYuMSA2LjEtNi4xIDMuNCAwIDYuMSAyLjcgNi4xIDYuMSAwIDMuNC0yLjggNi4xLTYuMSA2LjF6Ii8+PC9zdmc+)}.op-settings{background:rgba(28,28,28,.9);bottom:48px;color:#fff;font-size:.85em;overflow:hidden;position:absolute;right:5px;text-shadow:0 0 2px rgba(0,0,0,.5);transition:right .2s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none;will-change:width,height;z-index:4}.op-player__audio .op-settings{bottom:32px;right:0}.op-settings--sliding{right:-999px}.op-settings__menu{margin:0;overflow-x:hidden;overflow-y:auto;padding:0}.op-settings__menu-item,.op-settings__submenu-item{display:table-row;outline:none;padding:0}.op-settings__menu-label,.op-settings__submenu-label{display:table-cell;padding:5px 15px;vertical-align:middle}.op-settings__menu-label>img,.op-settings__menu-label>svg,.op-settings__submenu-label>img,.op-settings__submenu-label>svg{max-height:20px}.op-settings__submenu-item,.op-settings__submenu-label{display:block}.op-settings__submenu-item{cursor:pointer}.op-settings__submenu-item[aria-checked=true] .op-settings__submenu-label{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTkgMTYuMiA0LjggMTJsLTEuNCAxLjRMOSAxOSAyMSA3bC0xLjQtMS40TDkgMTYuMnoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=");background-position:left 4px center;background-repeat:no-repeat;background-size:18px;padding:8px 15px 8px 25px}.op-settings__menu-content{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHBhdGggZD0ibTEyLjU5IDIwLjM0IDQuNTgtNC41OS00LjU4LTQuNTlMMTQgOS43NWw2IDYtNiA2eiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==");background-position:right 0 center;background-repeat:no-repeat;background-size:32px 32px;cursor:pointer;display:table-cell;padding:0 38px 0 15px;vertical-align:middle}.op-settings__header{padding:5px}.op-settings__back{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHBhdGggZD0ibTE5LjQxIDIwLjA5LTQuNTgtNC41OSA0LjU4LTQuNTlMMTggOS41bC02IDYgNiA2eiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==");background-position:left 0 center;background-repeat:no-repeat;background-size:20px 32px;color:inherit;height:100%;padding:0 10px 0 20px}.op-controls input[type=range],.op-controls progress{appearance:none;border:0;height:5px;left:0;margin:0;position:absolute;top:0;transition:none;width:100%}.op-controls input[type=range]{-webkit-tap-highlight-color:transparent;background:transparent;height:0;padding:2.5px 0;z-index:3}.op-controls input[type=range]:focus,.op-controls progress{outline:none}.op-controls input[type=range]::-moz-focus-outer{border:0}.op-controls input[type=range]::-webkit-slider-runnable-track{background:0 0;border:0;cursor:pointer;height:8px;-webkit-user-select:none;user-select:none}.op-controls input[type=range]::-moz-range-track{background:0 0;border:0;cursor:pointer;height:8px;user-select:none}.op-controls input[type=range]::-ms-track{background:0 0;border:0;cursor:pointer;height:8px;-ms-user-select:none;user-select:none}.op-controls input[type=range]::-webkit-slider-thumb{appearance:none;background:#fff;border:2px solid transparent;border-radius:100%;box-sizing:border-box;height:12px;margin-top:-2px;position:relative;width:12px}.op-controls input[type=range]::-moz-range-thumb{appearance:none;background:#fff;border:2px solid transparent;border-radius:100%;box-sizing:border-box;height:12px;margin-top:-2px;position:relative;width:12px}.op-controls input[type=range]::-ms-thumb{appearance:none;background:#fff;border:2px solid transparent;border-radius:100%;box-sizing:border-box;height:12px;margin-top:-2px;position:relative;width:12px}.op-controls input[type=range]::-ms-tooltip{display:none}.op-controls input[type=range]::-ms-fill-lower,.op-controls input[type=range]::-ms-fill-upper{background:transparent}.op-controls input[type=range]::-ms-ticks-after,.op-controls input[type=range]::-ms-ticks-before{display:none!important}.op-controls .op-controls__progress--seek.loading{animation:progress 2s linear infinite;background:linear-gradient(-45deg,hsla(0,0%,100%,.3) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.3) 0,hsla(0,0%,100%,.3) 75%,transparent 0,transparent);background-repeat:repeat-x;background-size:25px 25px}.op-controls .op-controls__progress--seek.error{background:linear-gradient(-45deg,red 25%,transparent 0,transparent 50%,red 0,red 75%,transparent 0,transparent);background-repeat:repeat-x;background-size:25px 25px}.op-controls--hidden .op-controls .op-controls__progress--seek::-webkit-slider-thumb{background:transparent}.op-controls--hidden .op-controls .op-controls__progress--seek::-moz-range-thumb{background:transparent}.op-controls--hidden .op-controls .op-controls__progress--seek::-ms-thumb{background:transparent}.op-player__media[op-live__enabled]:not([op-dvr__enabled])+.op-controls .op-controls__progress--seek{display:none}.op-player__media[op-live__enabled]:not([op-dvr__enabled])+.op-controls .op-controls__progress,.op-player__media[op-live__enabled]:not([op-dvr__enabled])+.op-controls .op-controls__progress--buffer,.op-player__media[op-live__enabled]:not([op-dvr__enabled])+.op-controls .op-controls__progress--played{background-color:#eee;pointer-events:none}.op-controls progress{display:inline-block;vertical-align:baseline}.op-controls progress::-webkit-progress-bar{background:0 0}.op-controls progress::-moz-progress-bar{background:0 0}.op-controls .op-controls__progress{flex-grow:2}.op-controls .op-controls__progress,.op-controls .op-controls__progress:hover,.op-controls .op-controls__volume,.op-controls .op-controls__volume:hover{cursor:pointer}.op-controls__progress,.op-controls__volume{display:inline-block;height:5px;margin-left:10px;margin-top:9px;pointer-events:all;position:relative}.op-player__video .op-controls__progress{bottom:34px;left:8px;margin-left:-8px;position:absolute;width:100%}.op-player__video .op-controls.op-controls__stacked .op-controls__progress{bottom:0;position:relative}.op-controls progress::-webkit-progress-value{background:currentColor}.op-controls progress::-moz-progress-bar{background:currentColor}.op-controls__progress--buffer::-webkit-progress-value{-webkit-transition:width .2s ease;transition:width .2s ease}.op-controls__progress--played::-webkit-progress-value,.op-controls__volume--display::-webkit-progress-value{max-width:99%;-webkit-transition:none;transition:none}.op-player__video .op-controls__progress--played::-webkit-progress-value{max-width:100%}.op-controls__progress--buffer::-moz-progress-bar{-moz-transition:width .2s ease;transition:width .2s ease}.op-controls__progress--played::-moz-progress-bar,.op-controls__volume--display::-moz-progress-bar{max-width:99%;-moz-transition:none;transition:none}.op-controls .op-controls__progress--played,.op-controls .op-controls__volume--display{background:0 0;color:red;transition:all .2s ease;z-index:2}.op-controls .op-controls__volume--display{background:hsla(0,0%,100%,.35)}.op-controls .op-controls__progress--buffer{background:hsla(0,0%,100%,.3);color:hsla(0,0%,100%,.25)}.op-ads--active .op-controls .op-controls__progress--seek{pointer-events:none}.op-ads--active .op-controls .op-controls__progress--played{color:#fecb2f}.op-ads--active .op-controls .op-controls__progress--buffer{color:transparent}.op-ads--active .op-controls .op-controls__progress--seek::-webkit-slider-thumb{display:none}.op-ads--active .op-controls .op-controls__progress--seek::-moz-range-thumb{display:none}.op-ads--active .op-controls .op-controls__progress--seek::-ms-thumb{display:none}.op-ads--active .op-controls .op-controls__progress--seek::-webkit-slider-runnable-track{cursor:default}.op-ads--active .op-controls .op-controls__progress--seek::-moz-range-track{cursor:default}.op-ads--active .op-controls .op-controls__progress--seek::-ms-track{cursor:default}.op-ads--active .op-controls .op-control__hide-in-ad{cursor:default;display:none;pointer-events:none}.op-status{color:#fff;font-weight:400;left:0;padding:20px 0;position:absolute;text-align:center;top:30px;transform:translateY(-40px);transition:all .3s ease;width:100%;z-index:4}.op-status>span{background:rgba(0,0,0,.7);-webkit-box-decoration-break:clone;box-decoration-break:clone;line-height:150%;padding:3px 10px}.op-player__audio .op-status{top:23px}.op-controls__tooltip{background:#eee;border:1px solid #000;bottom:100%;color:#000;display:none;left:0;margin-bottom:10px;padding:1px 4px;position:absolute;text-align:center;transform:translateX(0)}.op-player__video .op-controls__tooltip{margin-bottom:10px}.op-controls__tooltip:after,.op-controls__tooltip:before{content:"";height:0;left:0;margin:0 auto;position:absolute;right:0;top:100%;width:0}.op-controls__tooltip:before{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #000}.op-controls__tooltip:after{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #eee}.op-controls__tooltip--visible{display:block}.op-controls__volume{margin-left:0;width:70px}.op-controls .op-controls__mute:before{text-align:left}.op-player__video .op-controls__volume{margin-top:10px}.op-player__unmute{background:rgba(0,0,0,.7);color:#fff;cursor:pointer;left:0;padding:5px;position:absolute;top:0;z-index:3}.op-player[data-fullscreen=true] .op-controls{z-index:2147483648}.op-player[data-fullscreen=true].op-controls--hidden{cursor:none}.op-player[data-fullscreen=true].op-controls--hidden .op-controls{bottom:-40px}.op-player video::-webkit-media-controls,.op-player video::-webkit-media-text-track-container{display:none!important}.op-captions{bottom:0;color:#fff;display:none;font-weight:400;left:0;padding:20px 0;position:absolute;text-align:center;transform:translateY(-40px);transition:transform .3s ease;width:100%;z-index:1}.op-controls--hidden .op-captions{bottom:-32px}.op-captions--on{display:block}.op-captions>span{background:rgba(0,0,0,.7);-webkit-box-decoration-break:clone;box-decoration-break:clone;display:block;line-height:150%;margin:0 auto 15px;padding:3px 10px;width:fit-content}.op-player__audio.op-captions--detected{background:transparent;min-height:95px}.op-player__audio.op-captions--detected .op-captions{bottom:-10px;padding:0}.op-player__audio.op-captions--detected .op-captions>span{background:transparent;color:#000}.op-player__audio.op-captions--detected .op-controls{background:#000;bottom:auto}.op-player__audio.op-captions--detected .op-settings{bottom:auto;top:35px}.op-controls .op-controls__captions--on:before{color:red}.op-captions__menu{bottom:36px;left:50%;min-width:73px;overflow:visible;transform:translate(-50%);z-index:10}.op-captions__menu:after{border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid rgba(28,28,28,.9);content:"";height:0;left:0;margin:0 auto;position:absolute;right:0;top:100%;width:0}::cue{color:#ccc}video:-webkit-media-text-track-display{top:-15%}.op-levels__menu{bottom:36px;left:50%;min-width:73px;overflow:visible;transform:translate(-50%);z-index:10}.op-levels__menu:after{border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid rgba(28,28,28,.9);content:"";height:0;left:0;margin:0 auto;position:absolute;right:0;top:100%;width:0}.op-ads{height:100%;left:0;position:absolute;top:0;width:100%}.op-ads--active{overflow:hidden}.op-ads--active .op-captions,.op-ads--active .op-controls__captions,.op-ads--active .op-controls__settings{display:none}.op-ads--active .op-controls__fullscreen{float:right}.op-ads--active .op-controls .op-control__right~.op-control__right{margin-left:auto}.op-ads--active .op-ads{z-index:1}.op-player[data-fullscreen=true].op-ads--active .op-ads{z-index:2147483645}.op-ads__click-container{background-color:#807f80;color:#fff;cursor:default;display:none;padding:5px;pointer-events:auto;position:absolute;right:0;text-align:center;top:0;z-index:100}.op-ads__click-container--visible{display:block}.op-player[data-fullscreen=true].op-ads--active .op-ads__click-container{z-index:2147483647}.op-player__audio .op-ads{display:none}.op-ads__skip{color:#fff}.op-player:focus,.op-player>.op-controls :focus,.op-player__play:focus{outline:1px dotted #999}.op-player.op-player__keyboard--inactive .op-player__play:focus,.op-player.op-player__keyboard--inactive:focus,.op-player.op-player__keyboard--inactive>.op-controls :focus{outline:none}.op-player.op-player__full{bottom:0;left:0;overflow:hidden;position:fixed;right:0;top:0;z-index:-100}.op-player__full .op-ads,.op-player__full .op-player__media{height:auto;left:50%;min-height:100%;min-width:100%;position:absolute;top:50%;transform:translate(-50%,-50%);width:auto!important}.op-player__fit--wrapper{height:100%;position:relative;width:100%}.op-player.op-player__fit{background:#000;height:100%;left:0;overflow:hidden;position:absolute;top:0;width:100%}.op-player__fit .op-ads,.op-player__fit .op-player__media{border:0;display:block;height:100%;min-height:100%;width:100%}.op-player__ios--iphone .op-player__play{margin-top:-5px}.op-player.op-player__ios--iphone video::-webkit-media-controls,.op-player[data-fullscreen=true].op-player.op-player__ios--iphone video::-webkit-media-text-track-container{display:block!important}.op-player[data-fullscreen=true].op-player.op-player__ios--iphone video::-webkit-media-text-track-display-backdrop{background:rgba(0,0,0,.498)!important}
    </style>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #fff;
        }
        
        .player-container {
            width: 580px;
            height: 0;
            margin: 0 auto;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: relative;
            transition: height 0.3s ease, margin 0.3s ease;
        }
        
        .player-container.has-ad {
            height: 400px;
            margin: 40px auto;
        }
        
        .ad-label {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 100, 200, 0.85);
            color: #fff;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
            z-index: 1000;
            pointer-events: none;
            line-height: 1.2;
        }
        
        .player-container.has-ad video {
            width: 580px;
            height: 400px;
        }
        
        /* Video elementy sú skryté, kým player nemá triedu has-ad */
        .player-container video {
            width: 580px;
            height: 0;
            overflow: hidden;
        }
        
        /* Upravíme klikateľnú oblasť reklamy na 80% výšky */
        .player-container .videoAdUiClickElement,
        .player-container .op-ads .videoAdUiClickElement {
            height: 80% !important;
            width: 100% !important;
            top: 0 !important;
            left: 0 !important;
            bottom: auto !important;
            right: auto !important;
            position: absolute !important;
        }
        
        /* Upravíme pozíciu "Ďalšie informácie" textu - umiestnime ho na spodok klikateľnej oblasti */
        .player-container .videoAdUiLearnMore,
        .player-container .op-ads .videoAdUiLearnMore {
            bottom: 20% !important;
            top: auto !important;
            position: absolute !important;
        }
        
        /* Skryjeme OpenPlayer duration a delimiter controls - používame vlastný elapsed time */
        .op-controls__time-delimiter,
        .op-controls__duration {
            display: none !important;
        }
        
        /* Background element pre canvas snapshot posledného framu */
        .ad-bg {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 1;
        }
        
        /* Freeze overlay pre poster fallback */
        .freeze-overlay {
            position: absolute;
            inset: 0;
            background: #000;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 0.15s;
            pointer-events: none;
            z-index: 2;
        }
        
        .freeze-overlay.show {
            opacity: 1;
        }
        
        /* Countdown timer počas čakania na novú reklamu */
        .ad-countdown {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.5);
            color: #fff;
            font-size: 48px;
            font-weight: bold;
            z-index: 1001;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .ad-countdown.visible {
            opacity: 1;
        }
        
        .ad-countdown.clickable {
            pointer-events: auto;
            cursor: pointer;
        }
        
        /* Skryjeme video controls počas čakania na novú reklamu */
        .player-container.waiting-for-next-ad .op-controls,
        .player-container.waiting-for-next-ad .op-player__controls,
        .player-container.waiting-for-next-ad .op-controls * {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
        }
        
        /* Skryjeme video elementy s controls atribútom, ALE vylúčime freeze frame video */
        .player-container.waiting-for-next-ad video[controls]:not(.freeze-frame-video) {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
        }
        
        /* Skryjeme natívne HTML5 video controls (len pre pôvodný video, nie freeze frame) */
        .player-container.waiting-for-next-ad video:not(.freeze-frame-video)::-webkit-media-controls,
        .player-container.waiting-for-next-ad video:not(.freeze-frame-video)::-webkit-media-controls-panel,
        .player-container.waiting-for-next-ad video:not(.freeze-frame-video)::-webkit-media-controls-play-button,
        .player-container.waiting-for-next-ad video:not(.freeze-frame-video)::-webkit-media-controls-start-playback-button {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
        }
        
        /* Skryjeme pôvodný video element počas čakania */
        .player-container.waiting-for-next-ad video:not(.freeze-frame-video) {
            opacity: 0 !important;
            pointer-events: none !important;
            z-index: 1 !important;
        }
        
        /* Zobrazíme freeze frame video element (presunutý IMA SDK video) - VYŠŠIA ŠPECIFICITA */
        .player-container.waiting-for-next-ad video.freeze-frame-video {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
            pointer-events: none !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            object-fit: contain !important;
            z-index: 2 !important;
            background: transparent !important;
        }
        
        /* Alternatívne pravidlo pre freeze frame video element (ak nemá triedu) */
        .player-container.waiting-for-next-ad video[style*="position: absolute"]:not(#outstream-ad) {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
            pointer-events: none !important;
            z-index: 2 !important;
            background: transparent !important;
        }
        
        /* Klikateľný freeze frame video (ak existuje click-through URL) */
        .player-container.waiting-for-next-ad video.freeze-frame-video.clickable,
        .player-container.waiting-for-next-ad video.freeze-frame-video[data-clickable="true"] {
            pointer-events: auto !important;
            cursor: pointer !important;
        }
        
        /* Skryjeme video element počas čakania, ak máme canvas snapshot */
        .player-container.waiting-for-next-ad.has-snapshot video:not(.freeze-frame-video) {
            opacity: 0 !important;
            pointer-events: none !important;
        }
        
        /* Zobrazíme background snapshot počas čakania */
        .player-container.waiting-for-next-ad .ad-bg {
            opacity: 1 !important;
            z-index: 2 !important;
            pointer-events: none !important;
        }
        
        .elapsed-time {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.75) 100%);
            color: #fff;
            padding: 10px 16px;
            border-radius: 8px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-size: 18px;
            font-weight: 700;
            letter-spacing: 1px;
            z-index: 1000;
            pointer-events: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            transition: opacity 0.3s ease, transform 0.2s ease;
            opacity: 0;
            transform: translateY(-5px);
        }
        
        .elapsed-time.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Skryjeme elapsed time, keď nie je aktívne prehrávanie */
        .elapsed-time:empty {
            opacity: 0 !important;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .player-container {
                width: 100%;
                height: 0;
                margin: 0 auto;
            }
            
            .player-container.has-ad {
                height: 300px;
                margin: 30px auto;
            }
            
            .player-container.has-ad video {
                width: 100% !important;
                height: 300px !important;
                max-width: 100% !important;
                max-height: 300px !important;
            }
            
            /* Video elementy sú skryté, kým player nemá triedu has-ad */
            .player-container video {
                width: 100% !important;
                height: 0 !important;
                overflow: hidden;
            }
            
            /* Upravíme klikateľnú oblasť reklamy na 80% výšky aj na mobilných zariadeniach */
            .player-container .videoAdUiClickElement,
            .player-container .op-ads .videoAdUiClickElement {
                height: 80% !important;
                width: 100% !important;
            }
            
            .player-container .videoAdUiLearnMore,
            .player-container .op-ads .videoAdUiLearnMore {
                bottom: 20% !important;
            }
        }
    </style>
</head>
<body>
    <div class="player-container" id="player-container-2">
        <div class="ad-label">REKLAMA</div>
        <div id="ad-bg-2" class="ad-bg"></div>
        <div id="freeze-overlay-2" class="freeze-overlay"></div>
        <video 
            id="outstream-ad-2" 
            class="op-player__media" 
            controls 
            playsinline
            muted
            style="width: 580px; height: 0; background: #000; overflow: hidden;"
        >
            <!-- Pre outstream player nepotrebujeme video source -->
            <!-- Video element slúži len ako kontajner pre IMA SDK -->
            <!-- muted je potrebné pre autoplay v moderných prehliadačoch -->
        </video>
        <div id="ad-countdown-2" class="ad-countdown"></div>
        <span id="elapsed-time-2" class="elapsed-time">0:00</span>
    </div>
    
    <script>
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openplayerjs=t():e.openplayerjs=t()}(this,(function(){return function(){var e={633:function(e,t,i){var n=i(738).default;function s(){"use strict";e.exports=s=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var t,i={},a=Object.prototype,r=a.hasOwnProperty,o=Object.defineProperty||function(e,t,i){e[t]=i.value},l="function"==typeof Symbol?Symbol:{},f=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function d(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var s=t&&t.prototype instanceof E?t:E,a=Object.create(s.prototype),r=new j(n||[]);return o(a,"_invoke",{value:S(e,i,r)}),a}function v(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}i.wrap=h;var p="suspendedStart",m="suspendedYield",y="executing",g="completed",b={};function E(){}function w(){}function k(){}var _={};d(_,f,(function(){return this}));var A=Object.getPrototypeOf,L=A&&A(A(W([])));L&&L!==a&&r.call(L,f)&&(_=L);var M=k.prototype=E.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function i(s,a,o,l){var f=v(e[s],e,a);if("throw"!==f.type){var c=f.arg,u=c.value;return u&&"object"==n(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,o,l)}),(function(e){i("throw",e,o,l)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,l)}))}l(f.arg)}var s;o(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,s){i(e,n,t,s)}))}return s=s?s.then(a,a):a()}})}function S(e,i,n){var s=p;return function(a,r){if(s===y)throw Error("Generator is already running");if(s===g){if("throw"===a)throw r;return{value:t,done:!0}}for(n.method=a,n.arg=r;;){var o=n.delegate;if(o){var l=O(o,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===p)throw s=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=y;var f=v(e,i,n);if("normal"===f.type){if(s=n.done?g:m,f.arg===b)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(s=g,n.method="throw",n.arg=f.arg)}}}function O(e,i){var n=i.method,s=e.iterator[n];if(s===t)return i.delegate=null,"throw"===n&&e.iterator.return&&(i.method="return",i.arg=t,O(e,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=v(s,e.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,b;var r=a.arg;return r?r.done?(i[e.resultName]=r.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,b):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,b)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function W(e){if(e||""===e){var i=e[f];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function i(){for(;++s<e.length;)if(r.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=k,o(M,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:w,configurable:!0}),w.displayName=d(k,u,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,d(e,u,"GeneratorFunction")),e.prototype=Object.create(M),e},i.awrap=function(e){return{__await:e}},T(C.prototype),d(C.prototype,c,(function(){return this})),i.AsyncIterator=C,i.async=function(e,t,n,s,a){void 0===a&&(a=Promise);var r=new C(h(e,t,n,s),a);return i.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},T(M),d(M,u,"Generator"),d(M,f,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),i.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},i.values=W,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(n,s){return o.type="throw",o.arg=e,i.next=n,s&&(i.method="next",i.arg=t),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),f=r.call(a,"finallyLoc");if(l&&f){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!f)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),x(i),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;x(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:W(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),b}},i}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},738:function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:function(e,t,i){var n=i(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){var i=function(t,i){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,i||"default");if("object"!=e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==e(i)?i:i+""}function s(e,i,n){return(i=t(i))in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,i){for(var n=0;n<i.length;n++){var s=i[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,t(s.key),s)}}function o(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}i.r(n),i.d(n,{default:function(){return $n}});var l=i(756),f=i.n(l);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,a,r,o=[],l=!0,f=!1;try{if(a=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=a.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){f=!0,s=e}finally{try{if(!l&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(f)throw s}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d="undefined"!=typeof window?window.navigator:null,h=d?d.userAgent.toLowerCase():null,v=(!!h&&(/ipad/i.test(h)&&window.MSStream),!!h&&(/iphone/i.test(h)&&!window.MSStream)),p=(!!h&&(/ipod/i.test(h)&&window.MSStream),!!h&&(/ipad|iphone|ipod/i.test(h)&&!window.MSStream)),m=!!h&&/android/i.test(h),y=(!!d&&("msLaunchUri"in d&&document),!!h&&/chrome/i.test(h)),g=(!!h&&/firefox/i.test(h),!!h&&(/safari/i.test(h)&&!y)),b=(!!h&&/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(h),"undefined"!=typeof window&&"MediaSource"in window),E={passive:!1};function w(e){return"video"===e.tagName.toLowerCase()}function k(e){return"audio"===e.tagName.toLowerCase()}function _(e){return new Promise((function(t,i){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){n.remove(),t()},n.onerror=function(){n.remove(),i(new Error("".concat(e," could not be loaded")))},document.head&&document.head.appendChild(n)}))}function A(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}}function L(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body"),n=i.querySelectorAll("script"),s=0,a=n.length;s<a;s++)n[s].remove();var r=function(e){for(var t=e.children,i=0,n=t.length;i<n;i++){for(var s=t[i],a=s.attributes,o=0,l=a.length;o<l;o++){var f=a[o],c=f.name,u=f.value.replace(/\s+/g,"").toLowerCase();["src","href","xlink:href"].includes(c)&&(u.includes("javascript:")||u.includes("data:"))&&s.removeAttribute(c),c.startsWith("on")&&s.removeAttribute(c)}r(s)}};return r(i),t?(i.textContent||"").replace(/\s{2,}/g,""):i.innerHTML}function M(e,t){var i={};return t&&t.detail&&(i={detail:t.detail}),new CustomEvent(e,i)}function T(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return C(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){o=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw a}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var S,O,P,x,j,W,R,N,I,D,B,F=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},q=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},H=o((function e(t,i,n){a(this,e),S.set(this,void 0),O.set(this,void 0),P.set(this,void 0),x.set(this,void 0),j.set(this,{button:{},global:{},media:{}}),W.set(this,void 0),R.set(this,void 0),N.set(this,void 0),I.set(this,"off"),D.set(this,void 0),B.set(this,void 0),F(this,S,t,"f"),F(this,D,i,"f"),F(this,B,n,"f"),this._formatMenuItems=this._formatMenuItems.bind(this),this._setDefaultTrack=this._setDefaultTrack.bind(this),this._showCaptions=this._showCaptions.bind(this),this._hideCaptions=this._hideCaptions.bind(this)}),[{key:"create",value:function(){var e,t=this,i=q(this,S,"f").getElement().textTracks,n=q(this,S,"f").getOptions(),s=n.labels,a=n.detachMenus;if(F(this,W,Object.keys(i).map((function(e){return i[Number(e)]})).filter((function(e){return["subtitles","captions"].includes(e.kind)&&e.language})),"f"),F(this,R,!!q(this,W,"f").length,"f"),q(this,R,"f")){F(this,O,document.createElement("button"),"f"),q(this,O,"f").className="op-controls__captions op-control__".concat(q(this,D,"f")),q(this,O,"f").tabIndex=0,q(this,O,"f").title=(null==s?void 0:s.toggleCaptions)||"",q(this,O,"f").setAttribute("aria-controls",q(this,S,"f").id),q(this,O,"f").setAttribute("aria-pressed","false"),q(this,O,"f").setAttribute("aria-label",(null==s?void 0:s.toggleCaptions)||""),q(this,O,"f").setAttribute("data-active-captions","off"),F(this,P,document.createElement("div"),"f"),q(this,P,"f").className="op-captions";var r=q(this,S,"f").getContainer();if(r.insertBefore(q(this,P,"f"),r.firstChild),a){q(this,O,"f").classList.add("op-control--no-hover"),F(this,x,document.createElement("div"),"f"),q(this,x,"f").className="op-settings op-captions__menu",q(this,x,"f").setAttribute("aria-hidden","true"),q(this,x,"f").innerHTML='<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="'.concat("off"===q(this,I,"f")?"true":"false",'">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">').concat(null==s?void 0:s.off,"</div>\n                </div>\n            </div>");var o=document.createElement("div");o.className="op-controls__container op-control__".concat(q(this,D,"f")),o.append(q(this,O,"f"),q(this,x,"f")),q(this,S,"f").getControls().getLayer(q(this,B,"f")).append(o);var l,f=T(q(this,W,"f"));try{for(f.s();!(l=f.n()).done;){var c=l.value,u=document.createElement("div"),d=(null===(e=null==s?void 0:s.lang)||void 0===e?void 0:e[c.language])||null;u.className="op-settings__submenu-item",u.tabIndex=0,u.setAttribute("role","menuitemradio"),u.setAttribute("aria-checked",q(this,I,"f")===c.language?"true":"false"),u.innerHTML='<div class="op-settings__submenu-label op-subtitles__option"\n                    data-value="captions-'.concat(c.language,'">\n                    ').concat(d||c.label,"\n                </div>"),q(this,x,"f").append(u)}}catch(e){f.e(e)}finally{f.f()}}else q(this,S,"f").getControls().getLayer(q(this,B,"f")).append(q(this,O,"f"));q(this,j,"f").button.click=function(e){var i,n=e.target;if(a){for(var s=q(t,S,"f").getContainer().querySelectorAll(".op-settings"),r=0,o=Array.from(s);r<o.length;r++){var l=o[r];l!==q(t,x,"f")&&l.setAttribute("aria-hidden","true")}"true"===q(t,x,"f").getAttribute("aria-hidden")?q(t,x,"f").setAttribute("aria-hidden","false"):q(t,x,"f").setAttribute("aria-hidden","true")}else{n.setAttribute("aria-pressed","true"),n.classList.contains("op-controls__captions--on")?(n.classList.remove("op-controls__captions--on"),n.setAttribute("data-active-captions","off"),t._hideCaptions()):(n.classList.add("op-controls__captions--on"),n.setAttribute("data-active-captions",(null===(i=q(t,N,"f"))||void 0===i?void 0:i.language)||"off"),t._showCaptions());var f,c=T(q(t,W,"f"));try{for(c.s();!(f=c.n()).done;){var u=f.value;u.mode=n.getAttribute("data-active-captions")===u.language?"showing":"hidden"}}catch(e){c.e(e)}finally{c.f()}}},q(this,j,"f").button.mouseover=function(){if(!p&&!m&&a){for(var e=q(t,S,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=e.length;i<n;++i)e[i]!==q(t,x,"f")&&e[i].setAttribute("aria-hidden","true");"true"===q(t,x,"f").getAttribute("aria-hidden")&&q(t,x,"f").setAttribute("aria-hidden","false")}},q(this,j,"f").button.mouseout=function(){if(!p&&!m&&a){for(var e=q(t,S,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=e.length;i<n;++i)e[i].setAttribute("aria-hidden","true");"false"===q(t,x,"f").getAttribute("aria-hidden")&&q(t,x,"f").setAttribute("aria-hidden","true")}},q(this,O,"f").addEventListener("click",q(this,j,"f").button.click,E),q(this,j,"f").global.click=function(e){var i=e.target;if(i.closest("#".concat(q(t,S,"f").id))&&i.classList.contains("op-subtitles__option")){var n=i.getAttribute("data-value").replace("captions-","");t._hideCaptions(),"off"===n&&F(t,N,void 0,"f");var s,r=T(q(t,W,"f"));try{for(r.s();!(s=r.n()).done;){var o=s.value;o.mode=o.language===n?"showing":"hidden",o.language===n&&(F(t,N,o,"f"),t._showCaptions())}}catch(e){r.e(e)}finally{r.f()}if(a){q(t,O,"f").classList.contains("op-controls__captions--on")?(q(t,O,"f").classList.remove("op-controls__captions--on"),q(t,O,"f").setAttribute("data-active-captions","off")):(q(t,O,"f").classList.add("op-controls__captions--on"),q(t,O,"f").setAttribute("data-active-captions",n));for(var l=q(t,x,"f").querySelectorAll(".op-settings__submenu-item"),f=0,c=Array.from(l);f<c.length;f++)c[f].setAttribute("aria-checked","false");i.parentElement.setAttribute("aria-checked","true"),q(t,x,"f").setAttribute("aria-hidden","false")}else q(t,O,"f").setAttribute("data-active-captions",n);var u=M("captionschanged");q(t,S,"f").getElement().dispatchEvent(u)}},q(this,j,"f").global.cuechange=function(e){var i;t._hideCaptions();var n=e.target;"showing"===n.mode&&"off"!==q(t,O,"f").getAttribute("data-active-captions")&&n.activeCues&&(null===(i=n.activeCues)||void 0===i?void 0:i.length)>0&&t._showCaptions()},a&&(q(this,O,"f").addEventListener("mouseover",q(this,j,"f").button.mouseover,E),q(this,x,"f").addEventListener("mouseover",q(this,j,"f").button.mouseover,E),q(this,x,"f").addEventListener("mouseout",q(this,j,"f").button.mouseout,E),q(this,S,"f").getElement().addEventListener("controlshidden",q(this,j,"f").button.mouseout,E)),document.addEventListener("click",q(this,j,"f").global.click,E);var h,v=T(q(this,W,"f"));try{for(v.s();!(h=v.n()).done;){var y=h.value;y.mode="showing"!==y.mode?"hidden":y.mode,y.addEventListener("cuechange",q(this,j,"f").global.cuechange,E)}}catch(e){v.e(e)}finally{v.f()}var g=q(this,S,"f").getElement().querySelector('track:is([kind="subtitles"],[kind="captions"])[default]');if(g){var b=q(this,W,"f").find((function(e){return e.language===g.srclang}));b&&this._setDefaultTrack(b)}}}},{key:"destroy",value:function(){var e=q(this,S,"f").getOptions().detachMenus;if(q(this,R,"f")){var t,i=T(q(this,W,"f"));try{for(i.s();!(t=i.n()).done;)t.value.removeEventListener("cuechange",q(this,j,"f").global.cuechange)}catch(e){i.e(e)}finally{i.f()}document.removeEventListener("click",q(this,j,"f").global.click),q(this,O,"f").removeEventListener("click",q(this,j,"f").button.click),e&&(q(this,O,"f").removeEventListener("mouseover",q(this,j,"f").button.mouseover),q(this,x,"f").removeEventListener("mouseover",q(this,j,"f").button.mouseover),q(this,x,"f").removeEventListener("mouseout",q(this,j,"f").button.mouseout),q(this,S,"f").getElement().removeEventListener("controlshidden",q(this,j,"f").button.mouseout),q(this,x,"f").remove()),q(this,O,"f").remove()}}},{key:"addSettings",value:function(){var e=q(this,S,"f").getOptions(),t=e.detachMenus,i=e.labels;if(t||q(this,W,"f").length<=1)return{};var n=this._formatMenuItems();return n.length>2?{className:"op-subtitles__option",default:q(this,I,"f")||"off",key:"captions",name:(null==i?void 0:i.captions)||"",subitems:n}:{}}},{key:"_formatMenuItems",value:function(){var e=q(this,S,"f").getOptions(),t=e.labels,i=e.detachMenus;if(q(this,W,"f").length<=1&&!i)return[];var n,s=[{key:"off",label:(null==t?void 0:t.off)||""}],a=T(q(this,W,"f"));try{var r=function(){var e=n.value,i=(null==t?void 0:t.lang)?t.lang[e.language]:null;(s=s.filter((function(t){return t.key!==e.language}))).push({key:e.language,label:i||e.label})};for(a.s();!(n=a.n()).done;)r()}catch(e){a.e(e)}finally{a.f()}return s}},{key:"_setDefaultTrack",value:function(e){var t,i;e.mode="showing",F(this,I,e.language,"f"),q(this,O,"f").setAttribute("data-active-captions",q(this,I,"f")),q(this,O,"f").classList.add("op-controls__captions--on"),q(this,P,"f").classList.add("op-captions--on"),F(this,N,e,"f");for(var n=document.querySelectorAll(".op-settings__submenu-item")||[],s=0,a=Array.from(n);s<a.length;s++)a[s].setAttribute("aria-checked","false");null===(i=null===(t=document.querySelector('.op-subtitles__option[data-value="captions-'.concat(e.language,'"]')))||void 0===t?void 0:t.parentElement)||void 0===i||i.setAttribute("aria-checked","true")}},{key:"_showCaptions",value:function(){for(var e,t=0,i=Array.from((null===(e=q(this,N,"f"))||void 0===e?void 0:e.activeCues)||[]);t<i.length;t++){var n=i[t],s=(null==n?void 0:n.text)||"";if(s&&q(this,P,"f")){var a=document.createElement("span");a.innerHTML=s,q(this,P,"f").prepend(a),q(this,P,"f").classList.add("op-captions--on")}else this._hideCaptions()}}},{key:"_hideCaptions",value:function(){for(var e;null===(e=q(this,P,"f"))||void 0===e?void 0:e.lastChild;)q(this,P,"f").removeChild(q(this,P,"f").lastChild)}}]);S=new WeakMap,O=new WeakMap,P=new WeakMap,x=new WeakMap,j=new WeakMap,W=new WeakMap,R=new WeakMap,N=new WeakMap,I=new WeakMap,D=new WeakMap,B=new WeakMap;var K,V,z,U,G,Q,$,Y,X,J=H,Z=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ee=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},te=o((function e(t,i,n){var s=this;a(this,e),K.set(this,void 0),V.set(this,void 0),z.set(this,void 0),U.set(this,[]),G.set(this,0),Q.set(this,0),$.set(this,void 0),Y.set(this,void 0),X.set(this,void 0),Z(this,K,t,"f"),Z(this,Y,i,"f"),Z(this,X,n,"f"),Z(this,V,document.body.classList.contains("op-fullscreen__on"),"f");var r=document;this.fullScreenEnabled=!!(r.fullscreenEnabled||r.mozFullScreenEnabled||r.msFullscreenEnabled||r.webkitSupportsFullscreen||r.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this),this._resize=this._resize.bind(this),this._fullscreenChange=this._fullscreenChange.bind(this),this._setFullscreen=this._setFullscreen.bind(this),this._unsetFullscreen=this._unsetFullscreen.bind(this),Z(this,U,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],"f"),ee(this,U,"f").forEach((function(e){document.addEventListener(e,s._fullscreenChange,E)})),this._setFullscreenData(!1),ee(this,K,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,E),v&&(ee(this,K,"f").getElement().addEventListener("webkitbeginfullscreen",this._setFullscreen,E),ee(this,K,"f").getElement().addEventListener("webkitendfullscreen",this._unsetFullscreen,E))}),[{key:"create",value:function(){var e=this,t=ee(this,K,"f").getOptions().labels;Z(this,z,document.createElement("button"),"f"),ee(this,z,"f").type="button",ee(this,z,"f").className="op-controls__fullscreen op-control__".concat(ee(this,Y,"f")),ee(this,z,"f").tabIndex=0,ee(this,z,"f").title=(null==t?void 0:t.fullscreen)||"",ee(this,z,"f").setAttribute("aria-controls",ee(this,K,"f").id),ee(this,z,"f").setAttribute("aria-pressed","false"),ee(this,z,"f").setAttribute("aria-label",(null==t?void 0:t.fullscreen)||""),Z(this,$,(function(){ee(e,z,"f").setAttribute("aria-pressed","true"),e.toggleFullscreen()}),"f"),Z(this,$,ee(this,$,"f").bind(this),"f"),ee(this,z,"f").addEventListener("click",ee(this,$,"f"),E),ee(this,K,"f").getControls().getLayer(ee(this,X,"f")).appendChild(ee(this,z,"f"))}},{key:"destroy",value:function(){var e=this;ee(this,K,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),ee(this,U,"f").forEach((function(t){document.removeEventListener(t,e._fullscreenChange)})),v&&(ee(this,K,"f").getElement().removeEventListener("webkitbeginfullscreen",this._setFullscreen),ee(this,K,"f").getElement().removeEventListener("webkitendfullscreen",this._unsetFullscreen)),ee(this,z,"f").removeEventListener("click",ee(this,$,"f")),ee(this,z,"f").remove()}},{key:"toggleFullscreen",value:function(){if(ee(this,V,"f")){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{var t=ee(this,K,"f").getElement();Z(this,G,window.screen.width,"f"),Z(this,Q,window.screen.height,"f"),t.requestFullscreen?t.parentElement.requestFullscreen():t.mozRequestFullScreen?t.parentElement.mozRequestFullScreen():t.webkitRequestFullScreen?t.parentElement.webkitRequestFullScreen():t.msRequestFullscreen?t.parentElement.msRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(m||v)){var i=window.screen;i.orientation&&!ee(this,V,"f")&&i.orientation.lock("landscape")}}},{key:"_fullscreenChange",value:function(){var e=ee(this,V,"f")?void 0:ee(this,G,"f"),t=ee(this,V,"f")?void 0:ee(this,Q,"f");this._setFullscreenData(!ee(this,V,"f")),ee(this,K,"f").isAd()&&ee(this,K,"f").getAd().resizeAds(e,t),Z(this,V,!ee(this,V,"f"),"f"),ee(this,V,"f")?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}},{key:"_setFullscreenData",value:function(e){ee(this,K,"f").getContainer().setAttribute("data-fullscreen",(!!e).toString()),ee(this,z,"f")&&(e?ee(this,z,"f").classList.add("op-controls__fullscreen--out"):ee(this,z,"f").classList.remove("op-controls__fullscreen--out"))}},{key:"_resize",value:function(e,t){var i=ee(this,K,"f").getContainer(),n=ee(this,K,"f").getElement(),s=ee(this,K,"f").getOptions(),a="";if(e)i.style.width="100%",n.style.width="100%";else if(s.width){var r="number"==typeof s.width?"".concat(s.width,"px"):s.width;a+="width: ".concat(r," !important;"),n.style.removeProperty("width")}else n.style.removeProperty("width"),i.style.removeProperty("width");if(t)n.style.height="100%",i.style.height="100%";else if(s.height){var o="number"==typeof s.height?"".concat(s.height,"px"):s.height;a+="height: ".concat(o," !important;"),n.style.removeProperty("height")}else n.style.removeProperty("height"),i.style.removeProperty("height");a&&i.setAttribute("style",a)}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__fullscreen"))||13!==i&&32!==i||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())}},{key:"_setFullscreen",value:function(){Z(this,V,!0,"f"),this._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")}},{key:"_unsetFullscreen",value:function(){Z(this,V,!1,"f"),this._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")}}]);K=new WeakMap,V=new WeakMap,z=new WeakMap,U=new WeakMap,G=new WeakMap,Q=new WeakMap,$=new WeakMap,Y=new WeakMap,X=new WeakMap;var ie=te;function ne(e){return/\.m3u8$/i.test(e.src)||["application/x-mpegURL","application/vnd.apple.mpegurl"].includes(e.type)}function se(e){return/\.mpd/i.test(e.src)||"application/dash+xml"===e.type}function ae(e){return/(^rtmp:\/\/|\.flv$)/i.test(e.src)||["video/x-flv","video/flv"].includes(e.type)}function re(e,t){var i=function(e){var t=((((e.split("?")[0]||"").split("\\")||[]).pop()||"").split("/")||[]).pop()||"";return t.includes(".")?t.substring(t.lastIndexOf(".")+1):""}(e);if(!i)return k(t)?"audio/mp3":"video/mp4";switch(i){case"m3u8":case"m3u":return"application/x-mpegURL";case"mpd":return"application/dash+xml";case"mp4":return k(t)?"audio/mp4":"video/mp4";case"mp3":return"audio/mp3";case"webm":return k(t)?"audio/webm":"video/webm";case"ogg":return k(t)?"audio/ogg":"video/ogg";case"ogv":return"video/ogg";case"oga":return"audio/ogg";case"3gp":return"audio/3gpp";case"wav":return"audio/wav";case"aac":return"audio/aac";case"flac":return"audio/flac";default:return k(t)?"audio/mp3":"video/mp4"}}var oe,le,fe,ce,ue,de,he,ve,pe=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},me=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},ye=o((function e(t,i,n){a(this,e),oe.set(this,void 0),le.set(this,void 0),fe.set(this,void 0),ce.set(this,{button:{},global:{},media:{}}),ue.set(this,[]),de.set(this,""),he.set(this,void 0),ve.set(this,void 0),pe(this,oe,t,"f"),pe(this,he,i,"f"),pe(this,ve,n,"f")}),[{key:"create",value:function(){var e=this,t=me(this,oe,"f").getOptions(),i=t.labels,n=t.defaultLevel,s=t.detachMenus,a=null!==n?parseInt(n||"0",10):me(this,oe,"f").getMedia().level;pe(this,de,"".concat(a),"f");var r=this._formatMenuItems(),o=r.length?r.find((function(t){return t.key===me(e,de,"f")})):null,l=o?o.label:(null==i?void 0:i.auto)||"",f=!1;pe(this,le,document.createElement("button"),"f"),me(this,le,"f").className="op-controls__levels op-control__".concat(me(this,he,"f")),me(this,le,"f").tabIndex=0,me(this,le,"f").title=(null==i?void 0:i.mediaLevels)||"",me(this,le,"f").setAttribute("aria-controls",me(this,oe,"f").id),me(this,le,"f").setAttribute("aria-label",(null==i?void 0:i.mediaLevels)||""),me(this,le,"f").setAttribute("data-active-level",me(this,de,"f")),me(this,le,"f").innerHTML="<span>".concat(l,"</span>");var c=function(){me(e,ue,"f").length?f||(me(e,oe,"f").getMedia().level=a,f=!0):(e._gatherLevels(),setTimeout((function(){me(e,oe,"f").getMedia().level=a;var t=M("controlschanged");me(e,oe,"f").getElement().dispatchEvent(t)}),0))};me(this,ce,"f").media.loadedmetadata=c.bind(this),me(this,ce,"f").media.manifestLoaded=c.bind(this),me(this,ce,"f").media.hlsManifestParsed=c.bind(this),s&&(this._buildMenu(),me(this,ce,"f").button.click=function(){if(s){for(var t=me(e,oe,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==me(e,fe,"f")&&t[i].setAttribute("aria-hidden","true");"true"===me(e,fe,"f").getAttribute("aria-hidden")?me(e,fe,"f").setAttribute("aria-hidden","false"):me(e,fe,"f").setAttribute("aria-hidden","true")}},me(this,ce,"f").button.mouseover=function(){if(!p&&!m){for(var t=me(e,oe,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==me(e,fe,"f")&&t[i].setAttribute("aria-hidden","true");"true"===me(e,fe,"f").getAttribute("aria-hidden")&&me(e,fe,"f").setAttribute("aria-hidden","false")}},me(this,ce,"f").button.mouseout=function(){if(!p&&!m){for(var t=me(e,oe,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===me(e,fe,"f").getAttribute("aria-hidden")&&me(e,fe,"f").setAttribute("aria-hidden","true")}},me(this,le,"f").addEventListener("click",me(this,ce,"f").button.click,E),me(this,le,"f").addEventListener("mouseover",me(this,ce,"f").button.mouseover,E),me(this,fe,"f").addEventListener("mouseover",me(this,ce,"f").button.mouseover,E),me(this,fe,"f").addEventListener("mouseout",me(this,ce,"f").button.mouseout,E),me(this,oe,"f").getElement().addEventListener("controlshidden",me(this,ce,"f").button.mouseout,E)),me(this,ce,"f").global.click=function(t){var i=t.target,n=me(e,oe,"f").getMedia().currentTime,a=me(e,oe,"f").getMedia().paused;if(i.closest("#".concat(me(e,oe,"f").id))&&i.classList.contains("op-levels__option")){var r=i.getAttribute("data-value"),o=r?r.replace("levels-",""):"-1";if(pe(e,de,"".concat(o),"f"),s){me(e,le,"f").setAttribute("data-active-level","".concat(o)),me(e,le,"f").innerHTML="<span>".concat(L(i.innerText,!0),"</span>");for(var l=i.parentElement&&i.parentElement.parentElement?i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],f=0,c=l.length;f<c;++f)l[f].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),me(e,fe,"f").setAttribute("aria-hidden","false")}me(e,oe,"f").getMedia().level=o,me(e,oe,"f").getMedia().currentTime=n,a||me(e,oe,"f").play();var u=M("levelchanged",{detail:{label:i.innerText.trim(),level:o}});me(e,oe,"f").getElement().dispatchEvent(u),t.preventDefault(),t.stopPropagation()}};var u=(null==d?void 0:d.connection)||(null==d?void 0:d.mozConnection)||(null==d?void 0:d.webkitConnection);me(this,ce,"f").global.connection=function(){var t=me(e,oe,"f").getMedia().current;if(!se(t)&&!ne(t)){var i=(null==u?void 0:u.effectiveType)||"",n=me(e,ue,"f").map((function(e){return Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})})),s=n.find((function(e){return e.resolution<360}));"4g"===i?s=n.find((function(e){return e.resolution>=720})):"3g"===i&&(s=n.find((function(e){return e.resolution>=360&&e.resolution<720}))),s&&(me(e,oe,"f").pause(),me(e,oe,"f").getMedia().level=s.id,me(e,oe,"f").play())}},Object.keys(me(this,ce,"f").media).forEach((function(t){me(e,oe,"f").getElement().addEventListener(t,me(e,ce,"f").media[t],E)})),document.addEventListener("click",me(this,ce,"f").global.click,E),u&&u.addEventListener("change",me(this,ce,"f").global.connection,E)}},{key:"destroy",value:function(){var e=this,t=me(this,oe,"f").getOptions().detachMenus,i=(null==d?void 0:d.connection)||(null==d?void 0:d.mozConnection)||(null==d?void 0:d.webkitConnection);Object.keys(me(this,ce,"f").media).forEach((function(t){me(e,oe,"f").getElement().removeEventListener(t,me(e,ce,"f").media[t])})),document.removeEventListener("click",me(this,ce,"f").global.click),i&&i.removeEventListener("change",me(this,ce,"f").global.connection),t&&(me(this,le,"f").removeEventListener("click",me(this,ce,"f").button.click),me(this,le,"f").remove(),me(this,le,"f").removeEventListener("mouseover",me(this,ce,"f").button.mouseover),me(this,fe,"f").removeEventListener("mouseover",me(this,ce,"f").button.mouseover),me(this,fe,"f").removeEventListener("mouseout",me(this,ce,"f").button.mouseout),me(this,oe,"f").getElement().removeEventListener("controlshidden",me(this,ce,"f").button.mouseout),me(this,fe,"f").remove())}},{key:"addSettings",value:function(){var e=me(this,oe,"f").getOptions(),t=e.labels;if(e.detachMenus)return{};var i=this._formatMenuItems();return i.length>2?{className:"op-levels__option",default:me(this,de,"f")||"-1",key:"levels",name:null==t?void 0:t.levels,subitems:i}:{}}},{key:"_formatMenuItems",value:function(){for(var e=me(this,oe,"f").getOptions().labels,t=this._gatherLevels(),i=t.length,n=i?[{key:"-1",label:null==e?void 0:e.auto}]:[],s=function(){var e=t[a];(n=n.filter((function(t){return t.key!==e.id}))).push({key:e.id,label:e.label})},a=0;a<i;a++)s();return n.reduce((function(e,t){return e.find((function(e){return e.label===t.label}))?e:e.concat([t])}),[]).sort((function(e,t){return parseInt((null==e?void 0:e.label)||"",10)>parseInt((null==t?void 0:t.label)||"",10)?1:-1}))}},{key:"_getResolutionsLabel",value:function(e){var t=me(this,oe,"f").getOptions().labels;return e>=4320?"8K":e>=2160?"4K":e>=1440?"1440p":e>=1080?"1080p":e>=720?"720p":e>=480?"480p":e>=360?"360p":e>=240?"240p":e>=144?"144p":(null==t?void 0:t.auto)||""}},{key:"_gatherLevels",value:function(){var e=this;return me(this,ue,"f").length||me(this,oe,"f").getMedia().levels.forEach((function(t){me(e,ue,"f").push(Object.assign(Object.assign({},t),{label:t.label||e._getResolutionsLabel(t.height)}))})),me(this,ue,"f")}},{key:"_buildMenu",value:function(){var e=this;if(me(this,oe,"f").getOptions().detachMenus){me(this,le,"f").classList.add("op-control--no-hover"),pe(this,fe,document.createElement("div"),"f"),me(this,fe,"f").className="op-settings op-levels__menu",me(this,fe,"f").setAttribute("aria-hidden","true");var t=this._formatMenuItems(),i='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(t.map((function(t){return'\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(me(e,de,"f")===t.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-levels__option",'" data-value="levels-').concat(t.key,'">').concat(t.label,"</div>\n                </div>")})).join(""),"\n            </div>");me(this,fe,"f").innerHTML=i;var n=document.createElement("div");n.className="op-controls__container op-control__".concat(me(this,he,"f")),n.appendChild(me(this,le,"f")),n.appendChild(me(this,fe,"f")),me(this,oe,"f").getControls().getLayer(me(this,ve,"f")).appendChild(n)}}}]);oe=new WeakMap,le=new WeakMap,fe=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakMap,he=new WeakMap,ve=new WeakMap;var ge,be,Ee,we,ke,_e=ye,Ae=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Le=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Me=o((function e(t,i,n){a(this,e),ge.set(this,void 0),be.set(this,void 0),Ee.set(this,{controls:{},media:{}}),we.set(this,void 0),ke.set(this,void 0),Ae(this,ge,t,"f"),Ae(this,we,i,"f"),Ae(this,ke,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}),[{key:"create",value:function(){var e,t=this,i=Le(this,ge,"f").getOptions().labels;Ae(this,be,document.createElement("button"),"f"),Le(this,be,"f").type="button",Le(this,be,"f").className="op-controls__playpause op-control__".concat(Le(this,we,"f")),Le(this,be,"f").tabIndex=0,Le(this,be,"f").title=(null==i?void 0:i.play)||"",Le(this,be,"f").setAttribute("aria-controls",Le(this,ge,"f").id),Le(this,be,"f").setAttribute("aria-pressed","false"),Le(this,be,"f").setAttribute("aria-label",(null==i?void 0:i.play)||""),Le(this,ge,"f").getControls().getLayer(Le(this,ke,"f")).appendChild(Le(this,be,"f")),Le(this,Ee,"f").button=function(e){Le(t,be,"f").setAttribute("aria-pressed","true");var i=Le(t,ge,"f").activeElement();i.paused||i.ended?(Le(t,ge,"f").getAd()&&(Le(t,ge,"f").getAd().playRequested=!0),i.play(),Le(t,Ee,"f").media.play()):(i.pause(),Le(t,Ee,"f").media.pause()),e.preventDefault(),e.stopPropagation()};var n=k(Le(this,ge,"f").getElement());Le(this,Ee,"f").media.play=function(){var e;Le(t,ge,"f").activeElement().ended?(Le(t,ge,"f").isMedia()?Le(t,be,"f").classList.add("op-controls__playpause--replay"):Le(t,be,"f").classList.add("op-controls__playpause--pause"),Le(t,be,"f").title=(null==i?void 0:i.play)||"",Le(t,be,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")):(Le(t,be,"f").classList.remove("op-controls__playpause--replay"),Le(t,be,"f").classList.add("op-controls__playpause--pause"),Le(t,be,"f").title=(null==i?void 0:i.pause)||"",Le(t,be,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||""),(null===(e=Le(t,ge,"f").getOptions())||void 0===e?void 0:e.pauseOthers)&&Object.keys($n.instances).forEach((function(e){e!==Le(t,ge,"f").id&&$n.instances[e].activeElement().pause()})))},Le(this,Ee,"f").media.loadedmetadata=function(){(Le(t,be,"f").classList.contains("op-controls__playpause--pause")||Le(t,be,"f").classList.contains("op-controls__playpause--replay"))&&(Le(t,be,"f").classList.remove("op-controls__playpause--replay"),Le(t,be,"f").classList.remove("op-controls__playpause--pause"),Le(t,be,"f").title=(null==i?void 0:i.play)||"",Le(t,be,"f").setAttribute("aria-label",(null==i?void 0:i.play)||""))},Le(this,Ee,"f").media.playing=function(){Le(t,be,"f").classList.contains("op-controls__playpause--pause")||(Le(t,be,"f").classList.remove("op-controls__playpause--replay"),Le(t,be,"f").classList.add("op-controls__playpause--pause"),Le(t,be,"f").title=(null==i?void 0:i.pause)||"",Le(t,be,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||""))},Le(this,Ee,"f").media.pause=function(){Le(t,be,"f").classList.remove("op-controls__playpause--pause"),Le(t,be,"f").title=(null==i?void 0:i.play)||"",Le(t,be,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")},Le(this,Ee,"f").media.ended=function(){Le(t,ge,"f").activeElement().ended&&Le(t,ge,"f").isMedia()||Le(t,ge,"f").getElement().currentTime>=Le(t,ge,"f").getElement().duration||Le(t,ge,"f").getElement().currentTime<=0?(Le(t,be,"f").classList.add("op-controls__playpause--replay"),Le(t,be,"f").classList.remove("op-controls__playpause--pause")):(Le(t,be,"f").classList.remove("op-controls__playpause--replay"),Le(t,be,"f").classList.add("op-controls__playpause--pause")),Le(t,be,"f").title=(null==i?void 0:i.play)||"",Le(t,be,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")},Le(this,Ee,"f").media.adsmediaended=function(){Le(t,be,"f").classList.remove("op-controls__playpause--replay"),Le(t,be,"f").classList.add("op-controls__playpause--pause"),Le(t,be,"f").title=(null==i?void 0:i.pause)||"",Le(t,be,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||"")},Le(this,Ee,"f").media.playererror=function(){n&&Le(t,ge,"f").activeElement().pause()};var s=Le(this,ge,"f").getElement();Le(this,Ee,"f").controls.controlschanged=function(){if(!Le(t,ge,"f").activeElement().paused){var e=M("playing");s.dispatchEvent(e)}},Object.keys(Le(this,Ee,"f").media).forEach((function(e){s.addEventListener(e,Le(t,Ee,"f").media[e],E)})),(null===(e=Le(this,ge,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&s.addEventListener("click",Le(this,Ee,"f").button,E),Le(this,ge,"f").getControls().getContainer().addEventListener("controlschanged",Le(this,Ee,"f").controls.controlschanged,E),Le(this,ge,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,E),Le(this,be,"f").addEventListener("click",Le(this,Ee,"f").button,E)}},{key:"destroy",value:function(){var e,t=this;Object.keys(Le(this,Ee,"f").media).forEach((function(e){Le(t,ge,"f").getElement().removeEventListener(e,Le(t,Ee,"f").media[e])})),(null===(e=Le(this,ge,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&Le(this,ge,"f").getElement().removeEventListener("click",Le(this,Ee,"f").button),Le(this,ge,"f").getControls().getContainer().removeEventListener("controlschanged",Le(this,Ee,"f").controls.controlschanged),Le(this,ge,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Le(this,be,"f").removeEventListener("click",Le(this,Ee,"f").button),Le(this,be,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__playpause"))||13!==i&&32!==i||Le(this,Ee,"f").button(e)}}]);ge=new WeakMap,be=new WeakMap,Ee=new WeakMap,we=new WeakMap,ke=new WeakMap;var Te=Me;function Ce(e,t){var i=Math.floor(e%1*(t||0)),n=Math.floor(e),s=Math.floor(n/60),a=Math.floor(s/60),r=function(e){var t=e.toString();return e<10?e<=0?"00":"0".concat(t):t};return s%=60,n%=60,"".concat(a>0?"".concat(r(a),":"):"").concat(r(s),":").concat(r(n)).concat(i?":".concat(r(i)):"")}var Se,Oe,Pe,xe,je,We,Re,Ne,Ie,De,Be=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Fe=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},qe=o((function e(t,i,n){a(this,e),Se.set(this,void 0),Oe.set(this,void 0),Pe.set(this,void 0),xe.set(this,void 0),je.set(this,void 0),We.set(this,void 0),Re.set(this,{container:{},controls:{},global:{},media:{},slider:{}}),Ne.set(this,!1),Ie.set(this,void 0),De.set(this,void 0),Be(this,Se,t,"f"),Be(this,Ie,i,"f"),Be(this,De,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}),[{key:"create",value:function(){var e,t=this,i=Fe(this,Se,"f").getOptions(),n=i.labels,s=i.progress;Be(this,Oe,document.createElement("div"),"f"),Fe(this,Oe,"f").className="op-controls__progress op-control__".concat(Fe(this,Ie,"f")),Fe(this,Oe,"f").tabIndex=0,Fe(this,Oe,"f").setAttribute("aria-label",(null==n?void 0:n.progressSlider)||""),Fe(this,Oe,"f").setAttribute("aria-valuemin","0"),Fe(this,Oe,"f").setAttribute("aria-valuenow","0"),Fe(this,Oe,"f").setAttribute("role","slider"),Be(this,Pe,document.createElement("input"),"f"),Fe(this,Pe,"f").type="range",Fe(this,Pe,"f").className="op-controls__progress--seek",Fe(this,Pe,"f").tabIndex=-1,Fe(this,Pe,"f").setAttribute("min","0"),Fe(this,Pe,"f").setAttribute("step","0.1"),Fe(this,Pe,"f").value="0",Fe(this,Pe,"f").setAttribute("aria-label",(null==n?void 0:n.progressRail)||""),Fe(this,Pe,"f").setAttribute("role","slider"),Be(this,xe,document.createElement("progress"),"f"),Fe(this,xe,"f").className="op-controls__progress--buffer",Fe(this,xe,"f").setAttribute("max","100"),Fe(this,xe,"f").value=0,Be(this,je,document.createElement("progress"),"f"),Fe(this,je,"f").className="op-controls__progress--played",Fe(this,je,"f").setAttribute("max","100"),Fe(this,je,"f").value=0,Fe(this,Oe,"f").appendChild(Fe(this,Pe,"f")),Fe(this,Oe,"f").appendChild(Fe(this,je,"f")),Fe(this,Oe,"f").appendChild(Fe(this,xe,"f")),p||m||(Be(this,We,document.createElement("span"),"f"),Fe(this,We,"f").className="op-controls__tooltip",Fe(this,We,"f").tabIndex=-1,Fe(this,We,"f").innerHTML="00:00",Fe(this,Oe,"f").appendChild(Fe(this,We,"f")));var a=function(){var e;Fe(t,Pe,"f").classList.contains("error")&&Fe(t,Pe,"f").classList.remove("error");var i=Fe(t,Se,"f").activeElement();if(i.duration===1/0||Fe(t,Se,"f").getElement().getAttribute("op-live__enabled")||Fe(t,Se,"f").getElement().getAttribute("op-dvr__enabled"))Fe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")?(Fe(t,Pe,"f").setAttribute("max","1"),Fe(t,Pe,"f").value="1",Fe(t,Pe,"f").style.backgroundSize="100% 100%",Fe(t,je,"f").value=1,Fe(t,Oe,"f").setAttribute("aria-valuemax","1"),Fe(t,Oe,"f").setAttribute("aria-hidden","false")):(null===(e=Fe(t,Se,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||Fe(t,Oe,"f").setAttribute("aria-hidden","true");else{var n=Fe(t,Se,"f").isMedia()?i.currentTime:i.duration-i.currentTime;Fe(t,Pe,"f").value=n.toString(),Number.isNaN(i.duration)||(Fe(t,Pe,"f").setAttribute("max","".concat(i.duration)),Fe(t,Oe,"f").setAttribute("aria-valuemax",i.duration.toString()))}},r=0,o=(null===(e=Fe(this,Se,"f").getOptions().progress)||void 0===e?void 0:e.duration)||0,l=k(Fe(this,Se,"f").getElement());Fe(this,Re,"f").media.loadedmetadata=a.bind(this),Fe(this,Re,"f").controls.controlschanged=a.bind(this),Fe(this,Re,"f").media.progress=function(e){var i,n=e.target;if(n.duration===1/0||Fe(t,Se,"f").getElement().getAttribute("op-live__enabled"))Fe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==Fe(t,Oe,"f").getAttribute("aria-hidden")||(null===(i=Fe(t,Se,"f").getOptions().live)||void 0===i?void 0:i.showProgress)||Fe(t,Oe,"f").setAttribute("aria-hidden","true");else if(n.duration>0)for(var s=0,a=n.buffered.length;s<a;s++)if(n.buffered.start(n.buffered.length-1-s)<n.currentTime){Fe(t,xe,"f").value=n.buffered.end(n.buffered.length-1-s)/n.duration*100;break}},Fe(this,Re,"f").media.waiting=function(){l&&!Fe(t,Pe,"f").classList.contains("loading")&&Fe(t,Pe,"f").classList.add("loading"),l&&Fe(t,Pe,"f").classList.contains("error")&&Fe(t,Pe,"f").classList.remove("error")},Fe(this,Re,"f").media.playererror=function(){l&&!Fe(t,Pe,"f").classList.contains("error")&&Fe(t,Pe,"f").classList.add("error"),l&&Fe(t,Pe,"f").classList.contains("loading")&&Fe(t,Pe,"f").classList.remove("loading")},Fe(this,Re,"f").media.pause=function(){var e=Fe(t,Se,"f").activeElement();if(e.duration!==1/0&&!Fe(t,Se,"f").getElement().getAttribute("op-live__enabled")){var i=e.currentTime;Fe(t,Oe,"f").setAttribute("aria-valuenow",i.toString()),Fe(t,Oe,"f").setAttribute("aria-valuetext",Ce(i))}},Fe(this,Re,"f").media.play=function(){l&&Fe(t,Pe,"f").classList.contains("loading")&&Fe(t,Pe,"f").classList.remove("loading"),l&&Fe(t,Pe,"f").classList.contains("error")&&Fe(t,Pe,"f").classList.remove("error"),Fe(t,Se,"f").activeElement().duration===1/0||Fe(t,Se,"f").getElement().getAttribute("op-live__enabled")||(Fe(t,Oe,"f").removeAttribute("aria-valuenow"),Fe(t,Oe,"f").removeAttribute("aria-valuetext"))},Fe(this,Re,"f").media.playing=function(){l&&Fe(t,Pe,"f").classList.contains("loading")&&Fe(t,Pe,"f").classList.remove("loading"),l&&Fe(t,Pe,"f").classList.contains("error")&&Fe(t,Pe,"f").classList.remove("error")},Fe(this,Re,"f").media.timeupdate=function(){var e,i=Fe(t,Se,"f").activeElement();if(i.duration===1/0||Fe(t,Se,"f").getElement().getAttribute("op-live__enabled")&&!Fe(t,Se,"f").getElement().getAttribute("op-dvr__enabled"))Fe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==Fe(t,Oe,"f").getAttribute("aria-hidden")||(null===(e=Fe(t,Se,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||Fe(t,Oe,"f").setAttribute("aria-hidden","true");else{Fe(t,Pe,"f").getAttribute("max")&&"0"!==Fe(t,Pe,"f").getAttribute("max")&&parseFloat(Fe(t,Pe,"f").getAttribute("max")||"-1")===i.duration||(Number.isNaN(i.duration)||Fe(t,Pe,"f").setAttribute("max","".concat(i.duration)),Fe(t,Oe,"f").setAttribute("aria-hidden","false"));var n=i.duration-i.currentTime+1>=100?100:i.duration-i.currentTime+1,s=Fe(t,Se,"f").isMedia()?i.currentTime:n,a=parseFloat(Fe(t,Pe,"f").min),l=parseFloat(Fe(t,Pe,"f").max);Fe(t,Pe,"f").value=s.toString(),Fe(t,Pe,"f").style.backgroundSize="".concat(100*(s-a)/(l-a),"% 100%"),Fe(t,je,"f").value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:s/i.duration*100,Fe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")&&Math.floor(Fe(t,je,"f").value)>=99&&(r=i.currentTime,Fe(t,Oe,"f").setAttribute("aria-hidden","false"))}},Fe(this,Re,"f").media.durationchange=function(){var e=Fe(t,Se,"f").activeElement(),i=Fe(t,Se,"f").isMedia()?e.currentTime:e.duration-e.currentTime;Number.isNaN(e.duration)||(Fe(t,Pe,"f").setAttribute("max","".concat(e.duration)),Fe(t,Oe,"f").setAttribute("aria-valuemax",e.duration.toString())),Fe(t,je,"f").value=e.duration<=0||Number.isNaN(e.duration)||!Number.isFinite(e.duration)?o:i/e.duration*100},Fe(this,Re,"f").media.ended=function(){Fe(t,Pe,"f").style.backgroundSize="0% 100%",Fe(t,Pe,"f").getAttribute("max")&&Fe(t,Pe,"f").setAttribute("max","0"),Fe(t,xe,"f").value=0,Fe(t,je,"f").value=0};var f=function(e){var i=Fe(t,Se,"f").activeElement(),n=e.target,a=parseFloat(n.value);if(Fe(t,Pe,"f").classList.contains("op-progress--pressed")||a<i.currentTime&&!(null==s?void 0:s.allowRewind)||a>i.currentTime&&!(null==s?void 0:s.allowSkip))Fe(t,Pe,"f").value=i.currentTime.toString();else{Fe(t,Pe,"f").classList.add(".op-progress--pressed");var l=parseFloat(n.min),f=parseFloat(n.max),c=parseFloat(n.value);Fe(t,Pe,"f").style.backgroundSize="".concat(100*(c-l)/(f-l),"% 100%"),Fe(t,je,"f").value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:c/i.duration*100,Fe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")?i.currentTime=Math.round(Fe(t,je,"f").value)>=99?r:c:i.currentTime=c,Fe(t,Pe,"f").classList.remove(".op-progress--pressed")}},c=function(){var e=Fe(t,Se,"f").activeElement();!0===Fe(t,Ne,"f")&&Fe(t,Se,"f").isMedia()&&e.paused&&(e.play(),Be(t,Ne,!1,"f"))};Fe(this,Re,"f").slider.input=f.bind(this),Fe(this,Re,"f").slider.change=f.bind(this),Fe(this,Re,"f").slider.mousedown=function(e){var i=Fe(t,Se,"f").activeElement(),n=e.which||e.keyCode||0,a=Fe(t,Pe,"f"),r=Math.round(Number(a.value)),o=Math.round(i.currentTime);!(r<o&&(null==s?void 0:s.allowRewind)||r>=o&&(null==s?void 0:s.allowSkip))||1!==n&&0!==n||!Fe(t,Se,"f").isMedia()||i.paused||(i.pause(),Be(t,Ne,!0,"f"))}.bind(this),Fe(this,Re,"f").slider.mouseup=c.bind(this),Fe(this,Re,"f").slider.touchstart=function(e){var i,n=Fe(t,Se,"f").activeElement();if(n.duration!==1/0){var a=(((null===(i=e.changedTouches[0])||void 0===i?void 0:i.pageX)||0)-A(Fe(t,Oe,"f")).left)/Fe(t,Oe,"f").offsetWidth*n.duration;(a<n.currentTime&&(null==s?void 0:s.allowRewind)||a>n.currentTime&&(null==s?void 0:s.allowSkip))&&(Fe(t,Pe,"f").value=a.toString(),f(e),n.paused||(n.pause(),Be(t,Ne,!0,"f")))}}.bind(this),Fe(this,Re,"f").slider.touchend=c.bind(this),p||m||(Fe(this,Re,"f").container.mousemove=function(e){var i=Fe(t,Se,"f").activeElement();if(i.duration!==1/0&&!Fe(t,Se,"f").isAd()){var n=e.pageX,s=n-A(Fe(t,Oe,"f")).left,a=Fe(t,We,"f").offsetWidth/2,r=s/Fe(t,Oe,"f").offsetWidth,o=r*i.duration,l=Fe(t,Se,"f").getContainer(),f=l.offsetWidth-Fe(t,We,"f").offsetWidth;s<=0||n-A(l).left<=a?s=0:n-A(l).left>=f?s=f-A(Fe(t,Pe,"f")).left-10:s-=a,r>=0&&r<=1?Fe(t,We,"f").classList.add("op-controls__tooltip--visible"):Fe(t,We,"f").classList.remove("op-controls__tooltip--visible"),Fe(t,We,"f").style.left="".concat(s,"px"),Fe(t,We,"f").innerHTML=Number.isNaN(o)?"00:00":Ce(o)}},Fe(this,Re,"f").global.mousemove=function(e){e.target.closest(".op-controls__progress")&&!Fe(t,Se,"f").isAd()||Fe(t,We,"f").classList.remove("op-controls__tooltip--visible")}),Object.keys(Fe(this,Re,"f").media).forEach((function(e){Fe(t,Se,"f").getElement().addEventListener(e,Fe(t,Re,"f").media[e],E)})),Object.keys(Fe(this,Re,"f").slider).forEach((function(e){Fe(t,Pe,"f").addEventListener(e,Fe(t,Re,"f").slider[e],E)})),Fe(this,Oe,"f").addEventListener("keydown",Fe(this,Se,"f").getEvents().keydown,E),Fe(this,Oe,"f").addEventListener("mousemove",Fe(this,Re,"f").container.mousemove,E),document.addEventListener("mousemove",Fe(this,Re,"f").global.mousemove,E),Fe(this,Se,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,E),Fe(this,Se,"f").getControls().getContainer().addEventListener("controlschanged",Fe(this,Re,"f").controls.controlschanged,E),Fe(this,Se,"f").getControls().getLayer(Fe(this,De,"f")).appendChild(Fe(this,Oe,"f"))}},{key:"destroy",value:function(){var e=this;Object.keys(Fe(this,Re,"f")).forEach((function(t){Fe(e,Se,"f").getElement().removeEventListener(t,Fe(e,Re,"f")[t])})),Object.keys(Fe(this,Re,"f").slider).forEach((function(t){Fe(e,Pe,"f").removeEventListener(t,Fe(e,Re,"f").slider[t])})),Fe(this,Oe,"f").removeEventListener("keydown",Fe(this,Se,"f").getEvents().keydown),Fe(this,Oe,"f").removeEventListener("mousemove",Fe(this,Re,"f").container.mousemove),document.removeEventListener("mousemove",Fe(this,Re,"f").global.mousemove),Fe(this,Se,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Fe(this,Se,"f").getControls().getContainer().removeEventListener("controlschanged",Fe(this,Re,"f").controls.controlschanged),Fe(this,xe,"f").remove(),Fe(this,je,"f").remove(),Fe(this,Pe,"f").remove(),p||m||Fe(this,We,"f").remove(),Fe(this,Oe,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t=Fe(this,Se,"f").activeElement(),i=Fe(this,Se,"f").isAd(),n=e.which||e.keyCode||0;if(!i&&n>=48&&n<=57&&t.duration!==1/0){for(var s=0,a=48;a<=57;a++)a<n&&s++;t.currentTime=t.duration*(.1*s),e.preventDefault(),e.stopPropagation()}}}]);Se=new WeakMap,Oe=new WeakMap,Pe=new WeakMap,xe=new WeakMap,je=new WeakMap,We=new WeakMap,Re=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,De=new WeakMap;var He,Ke,Ve,ze,Ue,Ge,Qe,$e,Ye=qe,Xe=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Je=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Ze=o((function e(t,i,n){a(this,e),He.set(this,void 0),Ke.set(this,{}),Ve.set(this,void 0),ze.set(this,void 0),Ue.set(this,{global:{},media:{}}),Ge.set(this,""),Qe.set(this,void 0),$e.set(this,void 0),Xe(this,He,t,"f"),Xe(this,Qe,i,"f"),Xe(this,$e,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}),[{key:"create",value:function(){var e=this,t=Je(this,He,"f").getOptions().labels;Xe(this,Ve,document.createElement("button"),"f"),Je(this,Ve,"f").className="op-controls__settings op-control__".concat(Je(this,Qe,"f")),Je(this,Ve,"f").tabIndex=0,Je(this,Ve,"f").title=(null==t?void 0:t.settings)||"",Je(this,Ve,"f").setAttribute("aria-controls",Je(this,He,"f").id),Je(this,Ve,"f").setAttribute("aria-pressed","false"),Je(this,Ve,"f").setAttribute("aria-label",(null==t?void 0:t.settings)||""),Xe(this,ze,document.createElement("div"),"f"),Je(this,ze,"f").className="op-settings",Je(this,ze,"f").setAttribute("aria-hidden","true"),Je(this,ze,"f").innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=function(){Je(e,Ve,"f").setAttribute("aria-pressed","true");for(var t=Je(e,He,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==Je(e,ze,"f")&&t[i].setAttribute("aria-hidden","true");Je(e,ze,"f").setAttribute("aria-hidden","false"===Je(e,ze,"f").getAttribute("aria-hidden")?"true":"false")},this.hideEvent=function(){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){Je(e,ze,"f").innerHTML=Je(e,Ge,"f"),Je(e,ze,"f").setAttribute("aria-hidden","true")})))},this.removeEvent=function(t){var i=t.detail,n=i.id,s=i.type;e.removeItem(n,s)},this.clickEvent=this.clickEvent.bind(this),this.hideEvent=this.hideEvent.bind(this),this.removeEvent=this.removeEvent.bind(this),Je(this,Ue,"f").media.controlshidden=this.hideEvent.bind(this),Je(this,Ue,"f").media.settingremoved=this.removeEvent.bind(this),Je(this,Ue,"f").media.play=this.hideEvent.bind(this),Je(this,Ue,"f").media.pause=this.hideEvent.bind(this),Je(this,He,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,E),Je(this,Ue,"f").global.click=function(t){var i=t.target;if((null==i?void 0:i.closest("#".concat(Je(e,He,"f").id)))&&(null==i?void 0:i.classList.contains("op-speed__option"))){var n=(null==i?void 0:i.getAttribute("data-value"))||"";Je(e,He,"f").getMedia().playbackRate=parseFloat(n.replace("speed-",""))}},Je(this,Ue,"f").global.resize=this.hideEvent.bind(this),Je(this,Ve,"f").addEventListener("click",this.clickEvent,E),Object.keys(Je(this,Ue,"f")).forEach((function(t){Je(e,He,"f").getElement().addEventListener(t,Je(e,Ue,"f").media[t],E)})),document.addEventListener("click",Je(this,Ue,"f").global.click,E),document.addEventListener("keydown",Je(this,Ue,"f").global.click,E),"undefined"!=typeof window&&window.addEventListener("resize",Je(this,Ue,"f").global.resize,E),Je(this,He,"f").getControls().getLayer(Je(this,$e,"f")).appendChild(Je(this,Ve,"f")),Je(this,He,"f").getContainer().appendChild(Je(this,ze,"f"))}},{key:"destroy",value:function(){var e=this;Je(this,Ve,"f").removeEventListener("click",this.clickEvent),Object.keys(Je(this,Ue,"f")).forEach((function(t){Je(e,He,"f").getElement().removeEventListener(t,Je(e,Ue,"f").media[t])})),document.removeEventListener("click",Je(this,Ue,"f").global.click),document.removeEventListener("keydown",Je(this,Ue,"f").global.click),"undefined"!=typeof window&&window.removeEventListener("resize",Je(this,Ue,"f").global.resize),void 0!==Je(this,Ue,"f").global["settings.submenu"]&&(document.removeEventListener("click",Je(this,Ue,"f").global["settings.submenu"]),Je(this,He,"f").getElement().removeEventListener("controlshidden",this.hideEvent)),Je(this,He,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Je(this,ze,"f").remove(),Je(this,Ve,"f").remove()}},{key:"addSettings",value:function(){var e=Je(this,He,"f").getMedia(),t=Je(this,He,"f").getOptions().labels,i=1;return Je(this,He,"f")&&e&&(i=e.defaultPlaybackRate!==e.playbackRate?e.playbackRate:e.defaultPlaybackRate),{className:"op-speed__option",default:i.toString(),key:"speed",name:(null==t?void 0:t.speed)||"",subitems:[{key:"0.25",label:"0.25"},{key:"0.5",label:"0.5"},{key:"0.75",label:"0.75"},{key:"1",label:(null==t?void 0:t.speedNormal)||""},{key:"1.25",label:"1.25"},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}},{key:"addItem",value:function(e,t,i,n,s){var a=this,r="".concat(t,"-").concat(L(i,!0)),o=document.createElement("div");o.className="op-settings__menu-item",o.tabIndex=0,o.setAttribute("role","menuitemradio"),o.innerHTML='<div class="op-settings__menu-label" data-value="'.concat(r,'">').concat(e,"</div>");var l=n?n.find((function(e){return e.key===i})):null;l&&(o.innerHTML+='<div class="op-settings__menu-content" tabindex="0">'.concat(l.label,"</div>"));var f=Je(this,ze,"f").querySelector(".op-settings__menu");if(f&&f.appendChild(o),Xe(this,Ge,Je(this,ze,"f").innerHTML,"f"),n){var c='\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back" tabindex="0">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(t,'">\n                    ').concat(n.map((function(e){return'\n                    <div class="op-settings__submenu-item" role="menuitemradio" aria-checked="'.concat(i===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(s||"",'" tabindex="0" data-value="').concat(t,"-").concat(e.key,'">\n                            ').concat(e.label,"\n                        </div>\n                    </div>")})).join(""),"\n                </div>");Je(this,Ke,"f")[t]=c}Je(this,Ue,"f").global["settings.submenu"]=function(e){var n=e.target;if(n.closest("#".concat(Je(a,He,"f").id))){if(n.classList.contains("op-settings__back"))Je(a,ze,"f").classList.add("op-settings--sliding"),setTimeout((function(){Je(a,ze,"f").innerHTML=Je(a,Ge,"f"),Je(a,ze,"f").classList.remove("op-settings--sliding")}),100);else if(n.classList.contains("op-settings__menu-content")){var s=n.parentElement?n.parentElement.querySelector(".op-settings__menu-label"):null,r=s?s.getAttribute("data-value"):null,o=r?r.split("-"):[];if(o.length>0){o.pop();var l=o.join("-").replace(/^\-|\-$/,"");void 0!==Je(a,Ke,"f")[l]&&(Je(a,ze,"f").classList.add("op-settings--sliding"),setTimeout((function(){Je(a,ze,"f").innerHTML=Je(a,Ke,"f")[l],Je(a,ze,"f").classList.remove("op-settings--sliding")}),100))}}else if(n.classList.contains("op-settings__submenu-label")){var f=n.getAttribute("data-value"),c=f?f.replace("".concat(t,"-"),""):"",u=n.innerText,d=Je(a,ze,"f").querySelector("#menu-item-".concat(t," .op-settings__submenu-item[aria-checked=true]"));d&&(d.setAttribute("aria-checked","false"),n.parentElement&&n.parentElement.setAttribute("aria-checked","true"),Je(a,Ke,"f")[t]=Je(a,ze,"f").innerHTML,Je(a,ze,"f").classList.add("op-settings--sliding"),setTimeout((function(){Je(a,ze,"f").innerHTML=Je(a,Ge,"f");var e=Je(a,ze,"f").querySelector('.op-settings__menu-label[data-value="'.concat(t,"-").concat(i,'"]'));e&&(e.setAttribute("data-value","".concat(f)),e.nextElementSibling&&(e.nextElementSibling.textContent=u)),i=c,Xe(a,Ge,Je(a,ze,"f").innerHTML,"f"),Je(a,ze,"f").classList.remove("op-settings--sliding")}),100))}}else a.hideEvent()},document.addEventListener("click",Je(this,Ue,"f").global["settings.submenu"],E),Je(this,He,"f").getElement().addEventListener("controlshidden",this.hideEvent,E)}},{key:"removeItem",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=Je(this,He,"f").getElement().querySelector(".op-settings__submenu-label[data-value=".concat(t,"-").concat(e,"]"));if(n&&n.remove(),Je(this,He,"f").getElement().querySelectorAll(".op-settings__submenu-label[data-value^=".concat(t,"]")).length<i){delete Je(this,Ke,"f")[t];var s=Je(this,He,"f").getElement().querySelector(".op-settings__menu-label[data-value^=".concat(t,"]")),a=s?s.closest(".op-settings__menu-item"):null;a&&a.remove()}}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i,n,s,a=e.which||e.keyCode||0,r=Je(this,He,"f").isAd(),o=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__settings"),l=(null===(i=null===document||void 0===document?void 0:document.activeElement)||void 0===i?void 0:i.classList.contains("op-settings__menu-content"))||(null===(n=null===document||void 0===document?void 0:document.activeElement)||void 0===n?void 0:n.classList.contains("op-settings__back"))||(null===(s=null===document||void 0===document?void 0:document.activeElement)||void 0===s?void 0:s.classList.contains("op-settings__submenu-label"));r||(!o||13!==a&&32!==a?!l||13!==a&&32!==a||(Je(this,Ue,"f").global["settings.submenu"](e),e.preventDefault(),e.stopPropagation()):(this.clickEvent(),e.preventDefault(),e.stopPropagation()))}}]);He=new WeakMap,Ke=new WeakMap,Ve=new WeakMap,ze=new WeakMap,Ue=new WeakMap,Ge=new WeakMap,Qe=new WeakMap,$e=new WeakMap;var et,tt,it,nt,st,at,rt,ot,lt=Ze,ft=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ct=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},ut=o((function e(t,i,n){a(this,e),et.set(this,void 0),tt.set(this,void 0),it.set(this,void 0),nt.set(this,void 0),st.set(this,void 0),at.set(this,{controls:{},media:{}}),rt.set(this,void 0),ot.set(this,void 0),ft(this,et,t,"f"),ft(this,rt,i,"f"),ft(this,ot,n,"f")}),[{key:"create",value:function(){var e=this,t=ct(this,et,"f").getOptions(),i=t.labels,n=t.progress;ft(this,tt,document.createElement("time"),"f"),ct(this,tt,"f").className="op-controls__current",ct(this,tt,"f").setAttribute("role","timer"),ct(this,tt,"f").setAttribute("aria-live","off"),ct(this,tt,"f").setAttribute("aria-hidden","false"),ct(this,tt,"f").innerText="0:00";var s=(null==n?void 0:n.showCurrentTimeOnly)||!1;s||(ft(this,it,document.createElement("span"),"f"),ct(this,it,"f").className="op-controls__time-delimiter",ct(this,it,"f").setAttribute("aria-hidden","false"),ct(this,it,"f").innerText="/",ft(this,nt,document.createElement("time"),"f"),ct(this,nt,"f").className="op-controls__duration",ct(this,nt,"f").setAttribute("aria-hidden","false"),ct(this,nt,"f").innerText=Ce((null==n?void 0:n.duration)||0));var a=ct(this,et,"f").getControls().getLayer(ct(this,ot,"f"));ft(this,st,document.createElement("span"),"f"),ct(this,st,"f").className="op-controls-time op-control__".concat(ct(this,rt,"f")),ct(this,st,"f").appendChild(ct(this,tt,"f")),s||(ct(this,st,"f").appendChild(ct(this,it,"f")),ct(this,st,"f").appendChild(ct(this,nt,"f"))),a.appendChild(ct(this,st,"f"));var r=function(){var t,i=ct(e,et,"f").activeElement();if(i.duration===1/0||ct(e,et,"f").getElement().getAttribute("op-live__enabled"))s||(ct(e,nt,"f").setAttribute("aria-hidden","true"),ct(e,it,"f").setAttribute("aria-hidden","true"));else{if(!s){var n=Number.isNaN(i.duration)?(null===(t=ct(e,et,"f").getOptions().progress)||void 0===t?void 0:t.duration)||0:i.duration;ct(e,nt,"f").innerText=Ce(n)}ct(e,tt,"f").innerText=Ce(i.currentTime)}};ct(this,at,"f").media.loadedmetadata=r.bind(this),ct(this,at,"f").controls.controlschanged=r.bind(this);var o=(ct(this,et,"f").getOptions().live||{}).showLabel;ct(this,at,"f").media.timeupdate=function(){var t=ct(e,et,"f").activeElement();if(t.duration===1/0||ct(e,et,"f").getElement().getAttribute("op-live__enabled")||ct(e,et,"f").getElement().getAttribute("op-dvr__enabled"))ct(e,et,"f").getElement().getAttribute("op-dvr__enabled")?(s||(ct(e,nt,"f").setAttribute("aria-hidden","true"),ct(e,it,"f").setAttribute("aria-hidden","true")),ct(e,tt,"f").innerText=Ce(t.currentTime)):s||!ct(e,et,"f").getElement().getAttribute("op-dvr__enabled")&&"false"===ct(e,nt,"f").getAttribute("aria-hidden")?(s||(ct(e,nt,"f").setAttribute("aria-hidden","true"),ct(e,it,"f").setAttribute("aria-hidden","true")),ct(e,tt,"f").innerText=o?(null==i?void 0:i.live)||"":Ce(t.currentTime)):ct(e,tt,"f").innerText=o?(null==i?void 0:i.live)||"":Ce(t.currentTime);else{var n=Ce(t.duration);s||Number.isNaN(t.duration)||n===ct(e,nt,"f").innerText?(s||n!==ct(e,nt,"f").innerText)&&(ct(e,tt,"f").innerText=o?(null==i?void 0:i.live)||"":Ce(t.currentTime)):(ct(e,nt,"f").innerText=n,ct(e,nt,"f").setAttribute("aria-hidden","false"),ct(e,it,"f").setAttribute("aria-hidden","false")),ct(e,tt,"f").innerText=Ce(t.currentTime)}},ct(this,at,"f").media.ended=function(){var t,i=ct(e,et,"f").activeElement(),n=Number.isNaN(i.duration)?(null===(t=ct(e,et,"f").getOptions().progress)||void 0===t?void 0:t.duration)||0:i.duration;!s&&ct(e,et,"f").isMedia()&&(ct(e,nt,"f").innerText=Ce(n))},Object.keys(ct(this,at,"f").media).forEach((function(t){ct(e,et,"f").getElement().addEventListener(t,ct(e,at,"f").media[t],E)})),ct(this,et,"f").getControls().getContainer().addEventListener("controlschanged",ct(this,at,"f").controls.controlschanged,E)}},{key:"destroy",value:function(){var e=this;Object.keys(ct(this,at,"f").media).forEach((function(t){ct(e,et,"f").getElement().removeEventListener(t,ct(e,at,"f").media[t])})),ct(this,et,"f").getControls().getContainer().removeEventListener("controlschanged",ct(this,at,"f").controls.controlschanged),ct(this,tt,"f").remove(),(ct(this,et,"f").getOptions().progress||{}).showCurrentTimeOnly||(ct(this,it,"f").remove(),ct(this,nt,"f").remove()),ct(this,st,"f").remove()}}]);et=new WeakMap,tt=new WeakMap,it=new WeakMap,nt=new WeakMap,st=new WeakMap,at=new WeakMap,rt=new WeakMap,ot=new WeakMap;var dt,ht,vt,pt,mt,yt,gt,bt,Et,wt=ut,kt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},_t=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},At=o((function e(t,i,n){a(this,e),dt.set(this,void 0),ht.set(this,void 0),vt.set(this,void 0),pt.set(this,void 0),mt.set(this,void 0),yt.set(this,{button:{},media:{},slider:{}}),gt.set(this,void 0),bt.set(this,void 0),Et.set(this,void 0),kt(this,dt,t,"f"),kt(this,gt,_t(this,dt,"f").getMedia().volume,"f"),kt(this,bt,i,"f"),kt(this,Et,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}),[{key:"create",value:function(){var e=this,t=_t(this,dt,"f").getOptions().labels;kt(this,vt,document.createElement("div"),"f"),_t(this,vt,"f").className="op-controls__volume op-control__".concat(_t(this,bt,"f")),_t(this,vt,"f").tabIndex=0,_t(this,vt,"f").setAttribute("aria-valuemin","0"),_t(this,vt,"f").setAttribute("aria-valuemax","100"),_t(this,vt,"f").setAttribute("aria-valuenow","".concat(_t(this,gt,"f"))),_t(this,vt,"f").setAttribute("aria-valuetext","".concat((null==t?void 0:t.volume)||"",": ").concat(_t(this,gt,"f"))),_t(this,vt,"f").setAttribute("aria-orientation","vertical"),_t(this,vt,"f").setAttribute("aria-label",(null==t?void 0:t.volumeSlider)||""),_t(this,vt,"f").setAttribute("role","slider"),kt(this,mt,document.createElement("input"),"f"),_t(this,mt,"f").type="range",_t(this,mt,"f").className="op-controls__volume--input",_t(this,mt,"f").tabIndex=-1,_t(this,mt,"f").value=_t(this,dt,"f").getMedia().volume.toString(),_t(this,mt,"f").setAttribute("min","0"),_t(this,mt,"f").setAttribute("max","1"),_t(this,mt,"f").setAttribute("step","0.1"),_t(this,mt,"f").setAttribute("aria-label",(null==t?void 0:t.volumeControl)||""),kt(this,pt,document.createElement("progress"),"f"),_t(this,pt,"f").className="op-controls__volume--display",_t(this,pt,"f").setAttribute("max","10"),_t(this,pt,"f").value=10*_t(this,dt,"f").getMedia().volume,_t(this,vt,"f").appendChild(_t(this,mt,"f")),_t(this,vt,"f").appendChild(_t(this,pt,"f")),kt(this,ht,document.createElement("button"),"f"),_t(this,ht,"f").type="button",_t(this,ht,"f").className="op-controls__mute op-control__".concat(_t(this,bt,"f")),_t(this,ht,"f").tabIndex=0,_t(this,ht,"f").title=(null==t?void 0:t.mute)||"",_t(this,ht,"f").setAttribute("aria-controls",_t(this,dt,"f").id),_t(this,ht,"f").setAttribute("aria-pressed","false"),_t(this,ht,"f").setAttribute("aria-label",(null==t?void 0:t.mute)||"");var i=function(t){var i=_t(e,dt,"f").activeElement(),n=parseFloat(t.target.value);i.volume=n,i.muted=0===i.volume,kt(e,gt,n,"f");var s=_t(e,dt,"f").getContainer().querySelector(".op-player__unmute");!i.muted&&s&&s.remove();var a=M("volumechange");_t(e,dt,"f").getElement().dispatchEvent(a)};if(_t(this,yt,"f").media.volumechange=function(){var i,n,s,a=_t(e,dt,"f").activeElement();n=1*(i=a).volume,s=Math.floor(100*n),_t(e,mt,"f").value="".concat(i.volume),_t(e,pt,"f").value=10*n,_t(e,vt,"f").setAttribute("aria-valuenow","".concat(s)),_t(e,vt,"f").setAttribute("aria-valuetext","".concat(null==t?void 0:t.volume,": ").concat(s)),function(t){var i=t.volume;i<=.5&&i>0?(_t(e,ht,"f").classList.remove("op-controls__mute--muted"),_t(e,ht,"f").classList.add("op-controls__mute--half")):0===i?(_t(e,ht,"f").classList.add("op-controls__mute--muted"),_t(e,ht,"f").classList.remove("op-controls__mute--half")):(_t(e,ht,"f").classList.remove("op-controls__mute--muted"),_t(e,ht,"f").classList.remove("op-controls__mute--half"))}(a)},_t(this,yt,"f").media.loadedmetadata=function(){var t=_t(e,dt,"f").activeElement();t.muted&&(t.volume=0);var i=M("volumechange");_t(e,dt,"f").getElement().dispatchEvent(i)},_t(this,yt,"f").slider.input=i.bind(this),_t(this,yt,"f").slider.change=i.bind(this),_t(this,yt,"f").button.click=function(){_t(e,ht,"f").setAttribute("aria-pressed","true");var i=_t(e,dt,"f").activeElement();i.muted=!i.muted,i.muted?(i.volume=0,_t(e,ht,"f").title=(null==t?void 0:t.unmute)||"",_t(e,ht,"f").setAttribute("aria-label",(null==t?void 0:t.unmute)||"")):(i.volume=_t(e,gt,"f"),_t(e,ht,"f").title=(null==t?void 0:t.mute)||"",_t(e,ht,"f").setAttribute("aria-label",(null==t?void 0:t.mute)||""));var n=M("volumechange");_t(e,dt,"f").getElement().dispatchEvent(n)},_t(this,ht,"f").addEventListener("click",_t(this,yt,"f").button.click,E),Object.keys(_t(this,yt,"f").media).forEach((function(t){_t(e,dt,"f").getElement().addEventListener(t,_t(e,yt,"f").media[t],E)})),Object.keys(_t(this,yt,"f").slider).forEach((function(t){_t(e,mt,"f").addEventListener(t,_t(e,yt,"f").slider[t],E)})),_t(this,dt,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,E),!m&&!p||!_t(this,dt,"f").getOptions().useDeviceVolume){var n=_t(this,dt,"f").getControls().getLayer(_t(this,Et,"f"));n.appendChild(_t(this,ht,"f")),n.appendChild(_t(this,vt,"f"))}}},{key:"destroy",value:function(){var e=this;_t(this,ht,"f").removeEventListener("click",_t(this,yt,"f").button.click),Object.keys(_t(this,yt,"f").media).forEach((function(t){_t(e,dt,"f").getElement().removeEventListener(t,_t(e,yt,"f").media[t])})),Object.keys(_t(this,yt,"f").slider).forEach((function(t){_t(e,mt,"f").removeEventListener(t,_t(e,yt,"f").slider[t])})),_t(this,dt,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),_t(this,mt,"f").remove(),_t(this,pt,"f").remove(),_t(this,vt,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0,n=_t(this,dt,"f").activeElement();!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__mute"))||13!==i&&32!==i||(n.muted=!n.muted,n.volume=n.muted?0:_t(this,gt,"f"),_t(this,yt,"f").button.click(),e.preventDefault(),e.stopPropagation())}}]);dt=new WeakMap,ht=new WeakMap,vt=new WeakMap,pt=new WeakMap,mt=new WeakMap,yt=new WeakMap,gt=new WeakMap,bt=new WeakMap,Et=new WeakMap;var Lt,Mt,Tt,Ct,St,Ot,Pt=At,xt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},jt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Wt=o((function e(t){a(this,e),this.events={media:{},mouse:{}},Lt.set(this,void 0),Mt.set(this,0),Tt.set(this,void 0),Ct.set(this,void 0),St.set(this,void 0),Ot.set(this,{Captions:J,Fullscreen:ie,Levels:_e,Play:Te,Progress:Ye,Settings:lt,Time:wt,Volume:Pt}),xt(this,Ct,t,"f"),this._setElements()}),[{key:"create",value:function(){var e=this;jt(this,Ct,"f").getElement().controls=!1;var t=w(jt(this,Ct,"f").getElement());if(this._createControlsLayer(),this._buildElements(),this.events.controlschanged=function(){e.destroy(),e._setElements(),e.create()},this.events.ended=function(){jt(e,Ct,"f").getContainer().classList.remove("op-controls--hidden")},jt(this,Ct,"f").getElement().addEventListener("controlschanged",this.events.controlschanged,E),jt(this,Ct,"f").getElement().addEventListener("ended",this.events.ended,E),!(jt(this,Ct,"f").getOptions().controls||{}).alwaysVisible){var i=function(){t&&(jt(e,Ct,"f").getContainer().classList.remove("op-controls--hidden"),e._stopControlTimer())};this.events.mouse.mouseenter=function(){t&&!jt(e,Ct,"f").activeElement().paused&&(e._stopControlTimer(),jt(e,Ct,"f").activeElement().currentTime?(jt(e,Ct,"f").playBtn.setAttribute("aria-hidden",jt(e,Ct,"f").isMedia()?"false":"true"),jt(e,Ct,"f").loader.setAttribute("aria-hidden","true")):jt(e,Ct,"f").getOptions().showLoaderOnInit&&(jt(e,Ct,"f").playBtn.setAttribute("aria-hidden","true"),jt(e,Ct,"f").loader.setAttribute("aria-hidden","false")),jt(e,Ct,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mousemove=function(){t&&!jt(e,Ct,"f").activeElement().paused&&(jt(e,Ct,"f").activeElement().currentTime?(jt(e,Ct,"f").loader.setAttribute("aria-hidden","true"),jt(e,Ct,"f").playBtn.setAttribute("aria-hidden",jt(e,Ct,"f").isMedia()?"false":"true")):(jt(e,Ct,"f").playBtn.setAttribute("aria-hidden",jt(e,Ct,"f").getOptions().showLoaderOnInit?"true":"false"),jt(e,Ct,"f").loader.setAttribute("aria-hidden",jt(e,Ct,"f").getOptions().showLoaderOnInit?"false":"true")),jt(e,Ct,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mouseleave=function(){t&&!jt(e,Ct,"f").activeElement().paused&&e._startControlTimer(1e3)},this.events.media.play=function(){t&&e._startControlTimer(jt(e,Ct,"f").getOptions().hidePlayBtnTimer||350)},this.events.media.loadedmetadata=i.bind(this),this.events.media.pause=i.bind(this),this.events.media.waiting=i.bind(this),this.events.media.stalled=i.bind(this),this.events.media.playererror=i.bind(this),Object.keys(this.events.media).forEach((function(t){jt(e,Ct,"f").getElement().addEventListener(t,e.events.media[t],E)})),m||p?jt(this,Ct,"f").getContainer().addEventListener("click",this.events.mouse.mouseenter,E):Object.keys(this.events.mouse).forEach((function(t){jt(e,Ct,"f").getContainer().addEventListener(t,e.events.mouse[t],E)})),t&&!jt(this,Ct,"f").activeElement().paused&&this._startControlTimer(3e3)}}},{key:"destroy",value:function(){var e=this;m||p||(Object.keys(this.events.mouse).forEach((function(t){jt(e,Ct,"f").getContainer().removeEventListener(t,e.events.mouse[t])})),Object.keys(this.events.media).forEach((function(t){jt(e,Ct,"f").getElement().removeEventListener(t,e.events.media[t])})),this._stopControlTimer()),jt(this,Ct,"f").getElement().removeEventListener("controlschanged",this.events.controlschanged),jt(this,Ct,"f").getElement().removeEventListener("ended",this.events.ended),Object.keys(jt(this,St,"f")).forEach((function(t){jt(e,St,"f")[t].forEach((function(t){t.custom?e._destroyCustomElement(t):"function"==typeof t.destroy&&t.destroy()}))})),jt(this,Tt,"f").remove()}},{key:"getContainer",value:function(){return jt(this,Tt,"f")}},{key:"getLayer",value:function(e){return jt(this,Tt,"f").querySelector(".op-controls-layer__".concat(e))||jt(this,Tt,"f")}},{key:"_createControlsLayer",value:function(){if(!jt(this,Tt,"f")||!jt(this,Ct,"f").getContainer().querySelector(".op-controls")){xt(this,Tt,document.createElement("div"),"f"),jt(this,Tt,"f").className="op-controls",jt(this,Ct,"f").getContainer().appendChild(jt(this,Tt,"f"));var e=document.createElement("div");e.className="op-status",e.innerHTML="<span></span>",e.tabIndex=-1,e.setAttribute("aria-hidden","true"),k(jt(this,Ct,"f").getElement())&&jt(this,Tt,"f").appendChild(e)}}},{key:"_startControlTimer",value:function(e){var t=this,i=jt(this,Ct,"f").activeElement();this._stopControlTimer(),"undefined"!=typeof window&&xt(this,Mt,window.setTimeout((function(){if((!i.paused||!i.ended)&&w(jt(t,Ct,"f").getElement())){jt(t,Ct,"f").getContainer().classList.add("op-controls--hidden"),jt(t,Ct,"f").playBtn.setAttribute("aria-hidden","true"),t._stopControlTimer();var e=M("controlshidden");jt(t,Ct,"f").getElement().dispatchEvent(e)}}),e),"f")}},{key:"_stopControlTimer",value:function(){0!==jt(this,Mt,"f")&&(clearTimeout(jt(this,Mt,"f")),xt(this,Mt,0,"f"))}},{key:"_setElements",value:function(){var e,t=this,i=(null===(e=jt(this,Ct,"f").getOptions().controls)||void 0===e?void 0:e.layers)||{};xt(this,St,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]},"f");var n=w(jt(this,Ct,"f").getElement()),s=k(jt(this,Ct,"f").getElement()),a=Object.keys(i),r=a.find((function(e){return/^(top|bottom)/.test(e)}));this._createControlsLayer(),a.forEach((function(e){var a=u(e.split("-"),2),o=a[0],l=a[1];if(l){jt(t,Tt,"f").classList.contains("op-controls__stacked")||jt(t,Tt,"f").classList.add("op-controls__stacked");var f="op-controls-layer__".concat(o);if(!jt(t,Tt,"f").querySelector(".".concat(f))){var c=document.createElement("div");c.className=f,jt(t,Tt,"f").appendChild(c)}}else if(r){var d="op-controls-layer__center";if(!jt(t,Tt,"f").querySelector(".".concat(d))){var h=document.createElement("div");h.className=d,jt(t,Tt,"f").appendChild(h)}}var v=i?i[e]:null;v&&v.filter((function(e,t,i){return i.indexOf(e)===t})).forEach((function(i){var a=r&&!l?"center":o,f="".concat(i.charAt(0).toUpperCase()).concat(i.slice(1)),c=new(jt(t,Ot,"f")[f])(jt(t,Ct,"f"),l||o,a);"settings"===i&&xt(t,Lt,c,"f"),(n||"fullscreen"!==i&&s)&&jt(t,St,"f")[e].push(c)}))})),jt(this,Ct,"f").getCustomControls().forEach((function(e){var i=u(e.position.split("-"),2),n=i[0],s=i[1],a=r&&!s?"center":n;e.layer=a,e.position=s||n,"number"==typeof e.index?jt(t,St,"f")[e.position].splice(e.index,0,e):"right"===e.position?jt(t,St,"f")[e.position].unshift(e):jt(t,St,"f")[e.position].push(e)}))}},{key:"_buildElements",value:function(){var e=this;Object.keys(jt(this,St,"f")).forEach((function(t){jt(e,St,"f")[t].forEach((function(t){t.custom?e._createCustomElement(t):t.create()}))})),Object.keys(jt(this,St,"f")).forEach((function(t){jt(e,St,"f")[t].forEach((function(t){var i=t;if((!jt(e,Ct,"f").getOptions().detachMenus||t instanceof lt)&&!i.custom&&"function"==typeof i.addSettings){var n=i.addSettings();jt(e,Lt,"f")&&Object.keys(n).length&&jt(e,Lt,"f").addItem(n.name,n.key,n.default,n.subitems,n.className)}}))}));var t=M("controlschanged");jt(this,Tt,"f").dispatchEvent(t)}},{key:"_hideCustomMenu",value:function(e){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){e.setAttribute("aria-hidden","true")})))}},{key:"_toggleCustomMenu",value:function(e,t,i){jt(this,Ct,"f").getContainer().querySelectorAll(".op-settings").forEach((function(e){"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")})),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof i.click&&i.click(e)}},{key:"_createCustomElement",value:function(e){var t=this,i=document.createElement(e.type);if(i.tabIndex=0,i.id=e.id,i.className="op-controls__".concat(e.id," op-control__").concat(e.position," ").concat(e.showInAds?"":"op-control__hide-in-ad"),e.styles&&Object.assign(i.style,e.styles),"button"===e.type&&e.icon?i.innerHTML=/\.(jpg|png|svg|gif)$/.test(e.icon)?'<img src="'.concat(L(e.icon),'"').concat(e.alt?'alt="'.concat(L(e.alt),'"'):"",">"):L(e.icon):e.content&&(i.innerHTML=L(e.content,!1)),"button"===e.type&&e.title&&(i.title=L(e.title)),"img"===e.type&&e.alt&&(i.alt=L(e.alt)),"button"!==e.type&&e.click&&"function"==typeof e.click&&i.setAttribute("aria-role","button"),"button"===e.type&&e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var n=document.createElement("div");n.className="op-settings op-settings__custom",n.id="".concat(e.id,"-menu"),n.setAttribute("aria-hidden","true");var s=e.subitems.map((function(t){var i="";return t.icon&&(i=/\.(jpg|png|svg|gif)$/.test(t.icon)?'<img src="'.concat(L(t.icon),'"').concat(t.alt?'alt="'.concat(L(t.alt),'"'):"",">"):L(t.icon,!1)),'<div class="op-settings__menu-item" tabindex="0" '.concat(t.title?'title="'.concat(t.title,'"'):"",' role="menuitemradio">\n                    <div class="op-settings__menu-label" id="').concat(t.id,'" data-value="').concat(e.id,"-").concat(t.id,'">').concat(i," ").concat(t.label,"</div>\n                </div>")}));n.innerHTML='<div class="op-settings__menu" role="menu">'.concat(s.join(""),"</div>"),jt(this,Ct,"f").getContainer().appendChild(n),e.subitems.forEach((function(e){var t=n.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,E)})),i.addEventListener("click",(function(i){return t._toggleCustomMenu(i,n,e)}),E),jt(this,Ct,"f").getElement().addEventListener("controlshidden",(function(){return t._hideCustomMenu(n)}),E)}else e.click&&"function"==typeof e.click&&i.addEventListener("click",e.click,E);e.mouseenter&&"function"==typeof e.mouseenter&&i.addEventListener("mouseenter",e.mouseenter,E),e.mouseleave&&"function"==typeof e.mouseleave&&i.addEventListener("mouseleave",e.mouseleave,E),e.keydown&&"function"==typeof e.keydown&&i.addEventListener("keydown",e.keydown,E),e.blur&&"function"==typeof e.blur&&i.addEventListener("blur",e.blur,E),e.focus&&"function"==typeof e.focus&&i.addEventListener("focus",e.focus,E),e.layer&&("main"===e.layer?jt(this,Ct,"f").getContainer().appendChild(i):this.getLayer(e.layer).appendChild(i)),e.init&&"function"==typeof e.init&&e.init(jt(this,Ct,"f"))}},{key:"_destroyCustomElement",value:function(e){var t=this,i=this.getContainer().querySelector(".op-controls__".concat(e.id));if(i){if(e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var n=jt(this,Ct,"f").getContainer().querySelector("#".concat(e.id,"-menu"));n&&(e.subitems.forEach((function(e){var t=n.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)})),i.removeEventListener("click",(function(i){return t._toggleCustomMenu(i,n,e)})),jt(this,Ct,"f").getElement().removeEventListener("controlshidden",(function(){return t._hideCustomMenu(n)})),n.remove())}e.click&&"function"==typeof e.click&&i.removeEventListener("click",e.click),e.mouseenter&&"function"==typeof e.mouseenter&&i.removeEventListener("mouseenter",e.mouseenter),e.mouseleave&&"function"==typeof e.mouseleave&&i.removeEventListener("mouseleave",e.mouseleave),e.keydown&&"function"==typeof e.keydown&&i.removeEventListener("keydown",e.keydown),e.blur&&"function"==typeof e.blur&&i.removeEventListener("blur",e.blur),e.focus&&"function"==typeof e.focus&&i.removeEventListener("focus",e.focus),i.remove(),e.destroy&&"function"==typeof e.destroy&&e.destroy(jt(this,Ct,"f"))}}}]);Lt=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,St=new WeakMap,Ot=new WeakMap;var Rt=Wt;function Nt(t,i){if(i&&("object"==e(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function It(e){return It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},It(e)}function Dt(e,t){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dt(e,t)}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dt(e,t)}var Ft,qt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ht=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Kt=o((function e(t,i){a(this,e),Ft.set(this,void 0),this.element=t,this.media=i,this.promise=new Promise((function(e){e()}))}),[{key:"instance",get:function(){return Ht(this,Ft,"f")},set:function(e){qt(this,Ft,e,"f")}},{key:"play",value:function(){return this.element.play()}},{key:"pause",value:function(){this.element.pause()}},{key:"volume",get:function(){return this.element.volume},set:function(e){this.element.volume=e}},{key:"muted",get:function(){return this.element.muted},set:function(e){this.element.muted=e}},{key:"playbackRate",get:function(){return this.element.playbackRate},set:function(e){this.element.playbackRate=e}},{key:"defaultPlaybackRate",get:function(){return this.element.defaultPlaybackRate},set:function(e){this.element.defaultPlaybackRate=e}},{key:"currentTime",get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}},{key:"duration",get:function(){return this.element.duration}},{key:"paused",get:function(){return this.element.paused}},{key:"ended",get:function(){return this.element.ended}}]);Ft=new WeakMap;var Vt=Kt;function zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zt=function(){return!!e})()}var Ut,Gt,Qt,$t=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Yt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Xt=function(e){function t(e,i,n){var s,r,o,l;return a(this,t),r=this,l=[e,i],o=It(o=t),s=Nt(r,zt()?Reflect.construct(o,l||[],It(r).constructor):o.apply(r,l)),Ut.set(s,void 0),Gt.set(s,{}),Qt.set(s,{}),$t(s,Qt,n,"f"),s._assign=s._assign.bind(s),s._preparePlayer=s._preparePlayer.bind(s),s.promise="undefined"==typeof dashjs?_("https://cdn.dashjs.org/latest/dash.all.min.js"):new Promise((function(e){e({})})),s.promise.then((function(){$t(s,Ut,dashjs.MediaPlayer().create(),"f"),s.instance=Yt(s,Ut,"f")})),s}return Bt(t,e),o(t,[{key:"canPlayType",value:function(e){return b&&"application/dash+xml"===e}},{key:"load",value:function(){var e=this;this._preparePlayer(),Yt(this,Ut,"f").attachSource(this.media.src);var t=M("loadedmetadata");this.element.dispatchEvent(t),Yt(this,Gt,"f")||($t(this,Gt,dashjs.MediaPlayer.events,"f"),Object.keys(Yt(this,Gt,"f")).forEach((function(t){Yt(e,Ut,"f").on(Yt(e,Gt,"f")[t],e._assign)})))}},{key:"destroy",value:function(){var e=this;Yt(this,Gt,"f")&&(Object.keys(Yt(this,Gt,"f")).forEach((function(t){Yt(e,Ut,"f").off(Yt(e,Gt,"f")[t],e._assign)})),$t(this,Gt,[],"f")),Yt(this,Ut,"f").reset()}},{key:"src",set:function(e){var t=this;se(e)&&(this.destroy(),$t(this,Ut,dashjs.MediaPlayer().create(),"f"),this._preparePlayer(),Yt(this,Ut,"f").attachSource(e.src),$t(this,Gt,dashjs.MediaPlayer.events,"f"),Object.keys(Yt(this,Gt,"f")).forEach((function(e){Yt(t,Ut,"f").on(Yt(t,Gt,"f")[e],t._assign)})))}},{key:"levels",get:function(){var e=[];if(Yt(this,Ut,"f")){var t=Yt(this,Ut,"f").getBitrateInfoListFor("video");t.length&&t.forEach((function(i){if(t[i]){var n=t[i],s=n.height,a=n.name,r={height:s,id:"".concat(i),label:a||null};e.push(r)}}))}return e}},{key:"level",get:function(){return Yt(this,Ut,"f")?Yt(this,Ut,"f").getQualityFor("video"):"-1"},set:function(e){"0"===e?Yt(this,Ut,"f").setAutoSwitchQuality(!0):(Yt(this,Ut,"f").setAutoSwitchQuality(!1),Yt(this,Ut,"f").setQualityFor("video",e))}},{key:"_assign",value:function(e){if("error"===e.type){var t=M("playererror",{detail:{message:e,type:"M(PEG)-DASH"}});this.element.dispatchEvent(t)}else{var i=M(e.type,{detail:e});this.element.dispatchEvent(i)}}},{key:"_preparePlayer",value:function(){Yt(this,Ut,"f").updateSettings(Object.assign({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE},streaming:{fastSwitchEnabled:!0,scheduleWhilePaused:!1}},Yt(this,Qt,"f")||{})),Yt(this,Ut,"f").initialize(),Yt(this,Ut,"f").attachView(this.element),Yt(this,Ut,"f").setAutoPlay(!1)}}])}(Vt);Ut=new WeakMap,Gt=new WeakMap,Qt=new WeakMap;var Jt=Xt;function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}var ei,ti,ii,ni=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},si=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},ai=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i},ri=function(e){function t(e,i,n){var s,r,o,l;return a(this,t),r=this,l=[e,i],o=It(o=t),s=Nt(r,Zt()?Reflect.construct(o,l||[],It(r).constructor):o.apply(r,l)),ei.set(s,void 0),ti.set(s,{}),ii.set(s,{}),ni(s,ii,n,"f"),s.element=e,s.media=i,s._create=s._create.bind(s),s._assign=s._assign.bind(s),s.promise="undefined"==typeof flvjs?_("https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"):new Promise((function(e){e({})})),s.promise.then(s._create),s}return Bt(t,e),o(t,[{key:"canPlayType",value:function(e){return b&&("video/x-flv"===e||"video/flv"===e)}},{key:"load",value:function(){var e=this;si(this,ei,"f").unload(),si(this,ei,"f").detachMediaElement(),si(this,ei,"f").attachMediaElement(this.element),si(this,ei,"f").load();var t=M("loadedmetadata");this.element.dispatchEvent(t),si(this,ti,"f")||(ni(this,ti,flvjs.Events,"f"),Object.keys(si(this,ti,"f")).forEach((function(t){si(e,ei,"f").on(si(e,ti,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(si(e,ti,"f")[t],n)}))})))}},{key:"destroy",value:function(){si(this,ei,"f").destroy(),ni(this,ei,null,"f")}},{key:"src",set:function(e){ae(e)&&(this.destroy(),this._create())}},{key:"levels",get:function(){var e=this,t=[];return si(this,ei,"f")&&si(this,ei,"f").levels&&si(this,ei,"f").levels.length&&Object.keys(si(this,ei,"f").levels).forEach((function(i){var n=si(e,ei,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return si(this,ei,"f")?si(this,ei,"f").currentLevel:"-1"},set:function(e){si(this,ei,"f").currentLevel=e}},{key:"_create",value:function(){var e=this,t=si(this,ii,"f")||{},i=t.configs,n=ai(t,["configs"]);flvjs.LoggingControl.enableDebug=(null==n?void 0:n.debug)||!1,flvjs.LoggingControl.enableVerbose=(null==n?void 0:n.debug)||!1;var s=Object.assign(Object.assign({},n),{type:"flv",url:this.media.src});ni(this,ei,flvjs.createPlayer(s,i||{}),"f"),this.instance=si(this,ei,"f"),si(this,ti,"f")||(ni(this,ti,flvjs.Events,"f"),Object.keys(si(this,ti,"f")).forEach((function(t){si(e,ei,"f").on(si(e,ti,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(si(e,ti,"f")[t],n)}))})))}},{key:"_assign",value:function(e,t){if("error"===e){var i=M("playererror",{detail:{data:t,message:"".concat(t[0],": ").concat(t[1]," ").concat(t[2].msg),type:"FLV"}});this.element.dispatchEvent(i)}else{var n=M(e,{detail:{data:t}});this.element.dispatchEvent(n)}}}])}(Vt);ei=new WeakMap,ti=new WeakMap,ii=new WeakMap;var oi=ri;function li(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(li=function(){return!!e})()}var fi,ci,ui,di,hi,vi,pi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},mi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},yi=function(e){function t(e,i,n,s){var r,o,l,f;return a(this,t),o=this,f=[e,i],l=It(l=t),r=Nt(o,li()?Reflect.construct(l,f||[],It(o).constructor):l.apply(o,f)),fi.set(r,void 0),ci.set(r,{}),ui.set(r,0),di.set(r,0),hi.set(r,void 0),vi.set(r,void 0),pi(r,hi,s||{},"f"),r.element=e,r.media=i,pi(r,vi,n,"f"),r._create=r._create.bind(r),r._play=r._play.bind(r),r._pause=r._pause.bind(r),r._assign=r._assign.bind(r),r.promise="undefined"==typeof Hls?_("https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"):new Promise((function(e){e({})})),r.promise.then(r._create),r}return Bt(t,e),o(t,[{key:"canPlayType",value:function(e){return function(){if("undefined"==typeof window)return!1;var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n&&!g}()&&"application/x-mpegURL"===e}},{key:"load",value:function(){var e=this;mi(this,fi,"f")&&(mi(this,fi,"f").detachMedia(),mi(this,fi,"f").loadSource(this.media.src),mi(this,fi,"f").attachMedia(this.element));var t=M("loadedmetadata");this.element.dispatchEvent(t),mi(this,ci,"f")||(pi(this,ci,Hls.Events,"f"),Object.keys(mi(this,ci,"f")).forEach((function(t){mi(e,fi,"f").on(mi(e,ci,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(mi(e,ci,"f")[t],n)}))})))}},{key:"destroy",value:function(){var e=this;mi(this,fi,"f")&&mi(this,fi,"f").stopLoad(),mi(this,ci,"f")&&Object.keys(mi(this,ci,"f")).forEach((function(t){mi(e,fi,"f").off(mi(e,ci,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(mi(e,ci,"f")[t],n)}))})),this.element.removeEventListener("play",this._play),this.element.removeEventListener("pause",this._pause),mi(this,fi,"f")&&(mi(this,fi,"f").destroy(),pi(this,fi,null,"f"))}},{key:"src",set:function(e){var t=this;ne(e)&&(this.destroy(),pi(this,fi,new Hls(mi(this,hi,"f")),"f"),mi(this,fi,"f").loadSource(e.src),mi(this,fi,"f").attachMedia(this.element),pi(this,ci,Hls.Events,"f"),Object.keys(mi(this,ci,"f")).forEach((function(e){mi(t,fi,"f").on(mi(t,ci,"f")[e],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t._assign(mi(t,ci,"f")[e],n)}))})))}},{key:"levels",get:function(){var e=this,t=[];return mi(this,fi,"f")&&mi(this,fi,"f").levels&&mi(this,fi,"f").levels.length&&Object.keys(mi(this,fi,"f").levels).forEach((function(i){var n=mi(e,fi,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return mi(this,fi,"f")?mi(this,fi,"f").currentLevel:"-1"},set:function(e){var t=Number(e);t&&t>-1?mi(this,fi,"f").loadLevel=t:mi(this,fi,"f").currentLevel=t}},{key:"_create",value:function(){var e=this,t=!("auto"!==this.element.preload&&!mi(this,vi,"f"));mi(this,hi,"f").autoStartLoad=t,pi(this,fi,new Hls(mi(this,hi,"f")),"f"),this.instance=mi(this,fi,"f"),pi(this,ci,Hls.Events,"f"),Object.keys(mi(this,ci,"f")).forEach((function(t){mi(e,fi,"f").on(mi(e,ci,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(mi(e,ci,"f")[t],n)}))})),t||(this.element.addEventListener("play",this._play,E),this.element.addEventListener("pause",this._pause,E))}},{key:"_assign",value:function(e,t){if("hlsError"===e){var i=M("playererror",{detail:{data:t,message:t[1].details,type:"HLS"}});this.element.dispatchEvent(i);var n=t[1].type,s=t[1].fatal,a=t[1];if(s)switch(n){case"mediaError":var r=(new Date).getTime();if(!mi(this,ui,"f")||r-mi(this,ui,"f")>3e3)pi(this,ui,(new Date).getTime(),"f"),mi(this,fi,"f").recoverMediaError();else if(!mi(this,di,"f")||r-mi(this,di,"f")>3e3)pi(this,di,(new Date).getTime(),"f"),console.warn("Attempting to swap Audio Codec and recover from media error"),mi(this,fi,"f").swapAudioCodec(),mi(this,fi,"f").recoverMediaError();else{console.error("Cannot recover, last media error recovery failed");var o=M(n,{detail:{data:a}});this.element.dispatchEvent(o)}break;case"networkError":console.error("Network error");var l=M(n,{detail:{data:a}});this.element.dispatchEvent(l);break;default:mi(this,fi,"f").destroy();var f=M(n,{detail:{data:a}});this.element.dispatchEvent(f)}else{var c=M(n,{detail:{data:a}});this.element.dispatchEvent(c)}}else{var u=t[1];if("hlsLevelLoaded"===e&&!0===u.live){this.element.setAttribute("op-live__enabled","true");var d=M("timeupdate");this.element.dispatchEvent(d)}else if("hlsLevelUpdated"===e&&!0===u.live&&u.totalduration>120){this.element.setAttribute("op-dvr__enabled","true");var h=M("timeupdate");this.element.dispatchEvent(h)}else if("hlsFragParsingMetadata"===e){var v=M("metadataready",{detail:{data:t[1]}});this.element.dispatchEvent(v)}var p=M(e,{detail:{data:t[1]}});this.element.dispatchEvent(p)}}},{key:"_play",value:function(){mi(this,fi,"f")&&mi(this,fi,"f").startLoad()}},{key:"_pause",value:function(){mi(this,fi,"f")&&mi(this,fi,"f").stopLoad()}}])}(Vt);fi=new WeakMap,ci=new WeakMap,ui=new WeakMap,di=new WeakMap,hi=new WeakMap,vi=new WeakMap;var gi=yi;function bi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bi=function(){return!!e})()}var Ei,wi,ki,_i,Ai,Li,Mi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ti=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Ci=function(e){function t(e,i){var n,s,r,o;if(a(this,t),s=this,o=[e,i],r=It(r=t),n=Nt(s,bi()?Reflect.construct(r,o||[],It(s).constructor):r.apply(s,o)),Ei.set(n,void 0),wi.set(n,[]),ki.set(n,!1),_i.set(n,0),Ai.set(n,!1),Li.set(n,void 0),!k(e)&&!w(e))throw new TypeError("Native method only supports video/audio tags");return n._clearTimeout=n._clearTimeout.bind(n),n._setTimeout=n._setTimeout.bind(n),n._dispatchError=n._dispatchError.bind(n),n._isDvrEnabled=n._isDvrEnabled.bind(n),n._readMediadataInfo=n._readMediadataInfo.bind(n),Mi(n,ki,ne(i),"f"),n.element.addEventListener("playing",n._clearTimeout,E),n.element.addEventListener("stalled",n._setTimeout,E),n.element.addEventListener("error",n._dispatchError,E),n.element.addEventListener("loadeddata",n._isDvrEnabled,E),n.element.textTracks.addEventListener("addtrack",n._readMediadataInfo,E),n}return Bt(t,e),o(t,[{key:"canPlayType",value:function(e){return!!this.element.canPlayType(e).replace("no","")}},{key:"load",value:function(){this.element.load()}},{key:"destroy",value:function(){this.element.removeEventListener("playing",this._clearTimeout),this.element.removeEventListener("stalled",this._setTimeout),this.element.removeEventListener("error",this._dispatchError),this.element.removeEventListener("loadeddata",this._isDvrEnabled),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo)}},{key:"levels",get:function(){if(!Ti(this,wi,"f").length)for(var e=this.element.querySelectorAll("source[title]"),t=0,i=e.length;t<i;++t){var n={height:0,id:"".concat(t),label:e[t].getAttribute("title")||""};Ti(this,wi,"f").push(n)}return Ti(this,wi,"f")}},{key:"level",get:function(){var e;return(null===(e=Ti(this,Ei,"f"))||void 0===e?void 0:e.id)||"-1"},set:function(e){var t=Ti(this,wi,"f").findIndex((function(t){return t.id===e}));if(t>-1){Mi(this,Ei,this.levels[t],"f");for(var i=this.element.querySelectorAll("source[title]"),n=0,s=i.length;n<s;++n){var a=i[n].getAttribute("src");a&&parseInt(Ti(this,Ei,"f").id,10)===n&&(this.element.src=a)}}}},{key:"src",set:function(e){this.element.src=e.src}},{key:"_isDvrEnabled",value:function(){var e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(Ti(this,ki,"f")&&e>120&&!this.element.getAttribute("op-dvr__enabled")){this.element.setAttribute("op-dvr__enabled","true");var t=M("timeupdate");this.element.dispatchEvent(t)}}},{key:"_readMediadataInfo",value:function(e){var t,i=this,n=e;"metadata"===(null===(t=null==n?void 0:n.track)||void 0===t?void 0:t.kind)&&(n.track.mode="hidden",n.track.addEventListener("cuechange",(function(e){var t=e.target,n=t.activeCues?t.activeCues[0]:null;if(n){var s=M("metadataready",{detail:n});i.element.dispatchEvent(s)}}),E))}},{key:"_setTimeout",value:function(){var e=this;Ti(this,Ai,"f")||void 0===window||(Mi(this,Ai,!0,"f"),Mi(this,Li,window.setInterval((function(){var t;if(Ti(e,_i,"f")>=30){clearInterval(Ti(e,Li,"f"));var i="Media download failed part-way due to a network error",n=M("playererror",{detail:{data:{message:i,error:2},message:i,type:"HTML5"}});e.element.dispatchEvent(n),Mi(e,_i,0,"f"),Mi(e,Ai,!1,"f")}else Mi(e,_i,(t=Ti(e,_i,"f"),++t),"f")}),1e3),"f"))}},{key:"_clearTimeout",value:function(){Ti(this,Li,"f")&&(clearInterval(Ti(this,Li,"f")),Mi(this,_i,0,"f"),Mi(this,Ai,!1,"f"))}},{key:"_dispatchError",value:function(e){var t,i=e.target,n=null==i?void 0:i.error;switch(null==n?void 0:n.code){case null==n?void 0:n.MEDIA_ERR_ABORTED:t="Media playback aborted";break;case null==n?void 0:n.MEDIA_ERR_NETWORK:t="Media download failed part-way due to a network error";break;case null==n?void 0:n.MEDIA_ERR_DECODE:t="Media playback aborted due to a corruption problem or because the\n                    media used features your browser did not support.";break;case null==n?void 0:n.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Media could not be loaded, either because the server or network failed\n                    or because the format is not supported.";break;default:t="Unknown error occurred."}var s=M("playererror",{detail:{data:Object.assign(Object.assign({},e),{message:t,error:null==n?void 0:n.code}),message:t,type:"HTML5"}});this.element.dispatchEvent(s)}}])}(Vt);Ei=new WeakMap,wi=new WeakMap,ki=new WeakMap,_i=new WeakMap,Ai=new WeakMap,Li=new WeakMap;var Si,Oi,Pi,xi,ji,Wi,Ri,Ni,Ii,Di=Ci,Bi=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Fi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},qi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Hi=o((function e(t,i,n,s){a(this,e),Si.set(this,void 0),Oi.set(this,void 0),Pi.set(this,void 0),xi.set(this,void 0),ji.set(this,void 0),Wi.set(this,void 0),Ri.set(this,!1),Ni.set(this,{media:{},optionsKey:{},rules:[]}),Ii.set(this,void 0),Fi(this,Si,t,"f"),Fi(this,ji,i,"f"),Fi(this,Pi,this._getMediaFiles(),"f"),Fi(this,Ni,s,"f"),Fi(this,Wi,n,"f")}),[{key:"canPlayType",value:function(e){return qi(this,Oi,"f").canPlayType(e)}},{key:"load",value:function(){return Bi(this,void 0,void 0,f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qi(this,Ri,"f")){e.next=2;break}return e.abrupt("return");case 2:if(Fi(this,Ri,!0,"f"),qi(this,Pi,"f").length){e.next=5;break}throw new TypeError("Media not set");case 5:if(qi(this,Oi,"f")&&"function"==typeof qi(this,Oi,"f").destroy&&(1===qi(this,Pi,"f").length&&qi(this,Pi,"f")[0].src===qi(this,Oi,"f").media.src||qi(this,Oi,"f").destroy()),qi(this,Pi,"f").some((function(e){try{Fi(t,Oi,t._invoke(e),"f")}catch(i){Fi(t,Oi,new Di(qi(t,Si,"f"),e),"f")}return qi(t,Oi,"f").canPlayType(e.type)})),e.prev=7,null!==qi(this,Oi,"f")){e.next=10;break}throw new TypeError("Media cannot be played with any valid media type");case 10:return e.next=12,qi(this,Oi,"f").promise;case 12:qi(this,Oi,"f").load(),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(7),qi(this,Oi,"f")&&qi(this,Oi,"f").destroy(),e.t0;case 19:case"end":return e.stop()}}),e,this,[[7,15]])})))}},{key:"play",value:function(){return Bi(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qi(this,Ri,"f")){e.next=6;break}return e.next=3,this.load();case 3:Fi(this,Ri,!1,"f"),e.next=8;break;case 6:return e.next=8,qi(this,Oi,"f").promise;case 8:return Fi(this,xi,qi(this,Oi,"f").play(),"f"),e.abrupt("return",qi(this,xi,"f"));case 10:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){return Bi(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===qi(this,xi,"f")){e.next=3;break}return e.next=3,qi(this,xi,"f");case 3:qi(this,Oi,"f").pause();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){qi(this,Oi,"f")&&qi(this,Oi,"f").destroy()}},{key:"src",get:function(){return qi(this,Pi,"f")},set:function(t){if("string"==typeof t?qi(this,Pi,"f").push({src:t,type:re(t,qi(this,Si,"f"))}):Array.isArray(t)?Fi(this,Pi,t,"f"):"object"===e(t)&&qi(this,Pi,"f").push(t),Fi(this,Pi,qi(this,Pi,"f").filter((function(e){return e.src})),"f"),qi(this,Pi,"f").length>0){var i=u(qi(this,Pi,"f"),1)[0];qi(this,Si,"f").src&&qi(this,Si,"f").setAttribute("data-op-file",qi(this,Pi,"f")[0].src),qi(this,Si,"f").src=i.src,Fi(this,Ii,i,"f"),qi(this,Oi,"f")&&(qi(this,Oi,"f").src=i)}else qi(this,Si,"f").src=""}},{key:"current",get:function(){return qi(this,Ii,"f")}},{key:"mediaFiles",get:function(){return qi(this,Pi,"f")},set:function(e){Fi(this,Pi,e,"f")}},{key:"volume",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").volume:qi(this,Si,"f").volume},set:function(e){qi(this,Oi,"f")&&(qi(this,Oi,"f").volume=e)}},{key:"muted",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").muted:qi(this,Si,"f").muted},set:function(e){qi(this,Oi,"f")&&(qi(this,Oi,"f").muted=e)}},{key:"playbackRate",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").playbackRate:qi(this,Si,"f").playbackRate},set:function(e){qi(this,Oi,"f")&&(qi(this,Oi,"f").playbackRate=e)}},{key:"defaultPlaybackRate",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").defaultPlaybackRate:qi(this,Si,"f").defaultPlaybackRate},set:function(e){qi(this,Oi,"f")&&(qi(this,Oi,"f").defaultPlaybackRate=e)}},{key:"currentTime",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").currentTime:qi(this,Si,"f").currentTime},set:function(e){qi(this,Oi,"f")&&(qi(this,Oi,"f").currentTime=e)}},{key:"duration",get:function(){var e=qi(this,Oi,"f")?qi(this,Oi,"f").duration:qi(this,Si,"f").duration;return e===1/0&&qi(this,Si,"f").seekable&&qi(this,Si,"f").seekable.length?qi(this,Si,"f").seekable.end(0):e}},{key:"paused",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").paused:qi(this,Si,"f").paused}},{key:"ended",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").ended:qi(this,Si,"f").ended}},{key:"loaded",get:function(){return qi(this,Ri,"f")},set:function(e){Fi(this,Ri,e,"f")}},{key:"level",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").level:-1},set:function(e){qi(this,Oi,"f")&&(qi(this,Oi,"f").level=e)}},{key:"levels",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").levels:[]}},{key:"instance",get:function(){return qi(this,Oi,"f")?qi(this,Oi,"f").instance:null}},{key:"_getMediaFiles",value:function(){var e=[],t=qi(this,Si,"f").querySelectorAll("source"),i=qi(this,Si,"f").src;i&&e.push({src:i,type:qi(this,Si,"f").getAttribute("type")||re(i,qi(this,Si,"f"))});for(var n=0,s=t.length;n<s;n++){var a=t[n],r=a.src;if(e.push({src:r,type:a.getAttribute("type")||re(r,qi(this,Si,"f"))}),0===n){var o=e[0];Fi(this,Ii,o,"f")}}return e.length||e.push({src:"",type:re("",qi(this,Si,"f"))}),e}},{key:"_invoke",value:function(e){var t,i,n,s=this,a=qi(this,Si,"f").canPlayType("application/vnd.apple.mpegurl")||qi(this,Si,"f").canPlayType("application/x-mpegURL");Fi(this,Ii,e,"f");var r,o=(qi(this,ji,"f").controls||{}).layers,l=!1;if(o&&Object.keys(o).forEach((function(e){var t=o?o[e]:null;t&&t.indexOf("levels")>-1&&(l=!0)})),Object.keys(qi(this,Ni,"f").media).length)return qi(this,Ni,"f").rules.forEach((function(t){var i=t(e.src);if(i){var n=qi(s,Ni,"f").media[i],a=qi(s,ji,"f")[qi(s,Ni,"f").optionsKey[i]]||void 0;r=n(qi(s,Si,"f"),e,qi(s,Wi,"f"),a)}})),r?(r.create(),r):new Di(qi(this,Si,"f"),e);if(ne(e)){if(a&&qi(this,ji,"f").forceNative&&!l)return new Di(qi(this,Si,"f"),e);var f=(null===(t=qi(this,ji,"f"))||void 0===t?void 0:t.hls)||void 0;return new gi(qi(this,Si,"f"),e,qi(this,Wi,"f"),f)}if(se(e)){var c=(null===(i=qi(this,ji,"f"))||void 0===i?void 0:i.dash)||void 0;return new Jt(qi(this,Si,"f"),e,c)}if(ae(e)){var u=(null===(n=qi(this,ji,"f"))||void 0===n?void 0:n.flv)||{debug:!1,type:"flv",url:e.src};return new oi(qi(this,Si,"f"),e,u)}return new Di(qi(this,Si,"f"),e)}}]);Si=new WeakMap,Oi=new WeakMap,Pi=new WeakMap,xi=new WeakMap,ji=new WeakMap,Wi=new WeakMap,Ri=new WeakMap,Ni=new WeakMap,Ii=new WeakMap;var Ki,Vi,zi,Ui,Gi,Qi,$i,Yi,Xi,Ji,Zi,en,tn,nn,sn,an,rn,on,ln,fn,cn,un,dn,hn,vn,pn,mn,yn,gn,bn,En,wn,kn,_n=Hi,An=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Ln=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Mn=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Tn=o((function e(t,i,n,s,r){var o,l,f,c,u=this;a(this,e),this.loadedAd=!1,Ki.set(this,!1),Vi.set(this,!1),zi.set(this,!1),Ui.set(this,!1),Gi.set(this,0),Qi.set(this,void 0),$i.set(this,!1),Yi.set(this,0),Xi.set(this,0),Ji.set(this,null),Zi.set(this,void 0),en.set(this,void 0),tn.set(this,void 0),nn.set(this,[]),sn.set(this,void 0),an.set(this,void 0),rn.set(this,void 0),on.set(this,void 0),ln.set(this,void 0),fn.set(this,void 0),cn.set(this,void 0),un.set(this,void 0),dn.set(this,!1),hn.set(this,!1),vn.set(this,!1),pn.set(this,void 0),mn.set(this,0),yn.set(this,void 0),gn.set(this,void 0),bn.set(this,0),En.set(this,[]),wn.set(this,!1),kn.set(this,null);var d={autoPlayAdBreaks:!0,customClick:{enabled:!1,label:"Click here for more info"},audioSkip:{enabled:!0,label:"Skip Ad",remainingLabel:"Skip in [[secs]] seconds"},debug:!1,enablePreloading:!1,language:"en",loop:!1,numRedirects:4,publisherId:void 0,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",sessionId:void 0,src:[],vpaidMode:"enabled"};Ln(this,Zi,t,"f"),Ln(this,sn,i,"f"),Ln(this,en,t.getMedia(),"f"),Ln(this,tn,t.getElement(),"f"),Ln(this,dn,n||!1,"f"),Ln(this,$i,t.getElement().muted,"f"),Ln(this,hn,s||!1,"f"),Ln(this,pn,Object.assign(Object.assign({},d),r),"f"),(null==r?void 0:r.customClick)&&Object.keys(r.customClick).length&&(Mn(this,pn,"f").customClick=Object.assign(Object.assign({},d.customClick),r.customClick)),Ln(this,vn,!1,"f"),Ln(this,yn,Mn(this,tn,"f").volume,"f"),Ln(this,Qi,Mn(this,yn,"f"),"f");var h=(null===(o=Mn(this,pn,"f"))||void 0===o?void 0:o.debug)?null===(f=null===(l=Mn(this,pn,"f"))||void 0===l?void 0:l.sdkPath)||void 0===f?void 0:f.replace(/(\.js$)/,"_debug.js"):null===(c=Mn(this,pn,"f"))||void 0===c?void 0:c.sdkPath;this.load=this.load.bind(this),this.resizeAds=this.resizeAds.bind(this),this._handleClickInContainer=this._handleClickInContainer.bind(this),this._handleSkipAds=this._handleSkipAds.bind(this),this._loaded=this._loaded.bind(this),this._error=this._error.bind(this),this._assign=this._assign.bind(this),this._contentLoadedAction=this._contentLoadedAction.bind(this),this._loadedMetadataHandler=this._loadedMetadataHandler.bind(this),this._contentEndedListener=this._contentEndedListener.bind(this),this._handleResizeAds=this._handleResizeAds.bind(this),this._onContentPauseRequested=this._onContentPauseRequested.bind(this),this._onContentResumeRequested=this._onContentResumeRequested.bind(this),Ln(this,an,!h||"undefined"!=typeof google&&void 0!==google.ima?new Promise((function(e){e()})):_(h),"f"),Mn(this,an,"f").then((function(){u.load()})).catch((function(e){var t="Ad script could not be loaded; please check if you have an AdBlock ";t+="turned on, or if you provided a valid URL is correct",console.error("Ad error: ".concat(t,"."));var i=M("playererror",{detail:{data:e,message:t,type:"Ads"}});Mn(u,tn,"f").dispatchEvent(i)}))}),[{key:"load",value:function(){var e,t,i,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("undefined"!=typeof google&&google.ima&&(n||!this.loadedAd||!Mn(this,pn,"f").autoPlayAdBreaks)&&(Mn(this,pn,"f").autoPlayAdBreaks||n)){this.loadedAd=!0;var s=Mn(this,Zi,"f").getContainer().querySelector(".op-ads");if(s&&s.parentNode&&s.parentNode.removeChild(s),Ln(this,Ui,!0,"f"),Ln(this,on,document.createElement("div"),"f"),Mn(this,on,"f").className="op-ads",Mn(this,on,"f").tabIndex=-1,Mn(this,tn,"f").parentElement&&Mn(this,tn,"f").parentElement.insertBefore(Mn(this,on,"f"),Mn(this,tn,"f").nextSibling),Mn(this,on,"f").addEventListener("click",this._handleClickInContainer),(null===(e=Mn(this,pn,"f").customClick)||void 0===e?void 0:e.enabled)&&(Ln(this,ln,document.createElement("div"),"f"),Mn(this,ln,"f").className="op-ads__click-container",Mn(this,ln,"f").innerHTML='<div class="op-ads__click-label">'.concat(Mn(this,pn,"f").customClick.label,"</div>"),Mn(this,tn,"f").parentElement&&Mn(this,tn,"f").parentElement.insertBefore(Mn(this,ln,"f"),Mn(this,tn,"f").nextSibling)),k(Mn(this,tn,"f"))&&(null===(t=Mn(this,pn,"f").audioSkip)||void 0===t?void 0:t.enabled)){if(null===(i=Mn(this,pn,"f").audioSkip)||void 0===i?void 0:i.element){var a=(Mn(this,pn,"f").audioSkip||{}).element;if("string"==typeof a){var r=document.getElementById(a);r&&Ln(this,fn,r,"f")}else a instanceof HTMLElement&&Ln(this,fn,a,"f")}else Ln(this,fn,document.createElement("button"),"f"),Mn(this,fn,"f").className="op-ads__skip hidden",Mn(this,Zi,"f").getControls().getContainer().appendChild(Mn(this,fn,"f"));Mn(this,fn,"f")&&Mn(this,fn,"f").addEventListener("click",this._handleSkipAds,E)}Ln(this,En,Mn(this,en,"f").src,"f");var o={disabled:google.ima.ImaSdkSettings.VpaidMode.DISABLED,enabled:google.ima.ImaSdkSettings.VpaidMode.ENABLED,insecure:google.ima.ImaSdkSettings.VpaidMode.INSECURE};google.ima.settings.setVpaidMode(o[Mn(this,pn,"f").vpaidMode||"enabled"]),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setAutoPlayAdBreaks(Mn(this,pn,"f").autoPlayAdBreaks),google.ima.settings.setNumRedirects(Mn(this,pn,"f").numRedirects),google.ima.settings.setLocale(Mn(this,pn,"f").language),Mn(this,pn,"f").sessionId&&google.ima.settings.setSessionId(Mn(this,pn,"f").sessionId),Mn(this,pn,"f").publisherId&&google.ima.settings.setPpid(Mn(this,pn,"f").publisherId),google.ima.settings.setPlayerType("openplayerjs"),google.ima.settings.setPlayerVersion("3.0.0"),Ln(this,cn,new google.ima.AdDisplayContainer(Mn(this,on,"f"),Mn(this,tn,"f"),Mn(this,ln,"f")),"f"),Ln(this,rn,new google.ima.AdsLoader(Mn(this,cn,"f")),"f"),Mn(this,rn,"f").addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded,E),Mn(this,rn,"f").addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error,E),"undefined"!=typeof window&&window.addEventListener("resize",this._handleResizeAds,E),Mn(this,tn,"f").addEventListener("loadedmetadata",this._handleResizeAds,E),!0!==Mn(this,dn,"f")&&!0!==Mn(this,hn,"f")&&!0!==n&&!0!==Mn(this,pn,"f").enablePreloading&&!0!==Mn(this,vn,"f")||(Mn(this,Vi,"f")||(Ln(this,Vi,!0,"f"),Mn(this,cn,"f").initialize()),this._requestAds())}}},{key:"play",value:function(){return An(this,void 0,void 0,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mn(this,Vi,"f")){e.next=4;break}return Ln(this,vn,!0,"f"),this._initNotDoneAds(),e.abrupt("return");case 4:if(Mn(this,Ji,"f"))try{Mn(this,Gi,"f")||!1!==Mn(this,zi,"f")?Mn(this,Ji,"f").resume():Mn(this,Ji,"f").start(),Ln(this,zi,!0,"f"),t=M("play"),Mn(this,tn,"f").dispatchEvent(t)}catch(e){this._resumeMedia()}case 5:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){if(Mn(this,Ji,"f")){Ln(this,zi,!1,"f"),Mn(this,Ji,"f").pause();var e=M("pause");Mn(this,tn,"f").dispatchEvent(e)}}},{key:"destroy",value:function(){var e,t,i=this;Mn(this,Ji,"f")&&(Mn(this,Ji,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),Mn(this,nn,"f")&&Mn(this,nn,"f").forEach((function(e){Mn(i,Ji,"f").removeEventListener(e,i._assign)}))),Ln(this,nn,[],"f");var n=Mn(this,Zi,"f").getControls(),s=n?n.events.mouse:{};Object.keys(s).forEach((function(e){Mn(i,on,"f")&&Mn(i,on,"f").removeEventListener(e,s[e])})),Mn(this,rn,"f")&&(Mn(this,rn,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),Mn(this,rn,"f").removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded));var a=!Array.isArray(Mn(this,sn,"f"))||Mn(this,mn,"f")>Mn(this,sn,"f").length;Mn(this,Ji,"f")&&a&&Mn(this,Ji,"f").destroy(),(null===(e=Mn(this,pn,"f").customClick)||void 0===e?void 0:e.enabled)&&Mn(this,ln,"f")&&Mn(this,ln,"f").remove(),(null===(t=Mn(this,pn,"f").audioSkip)||void 0===t?void 0:t.enabled)&&Mn(this,fn,"f")&&(Mn(this,fn,"f").removeEventListener("click",this._handleSkipAds),Mn(this,fn,"f").remove()),(p||m)&&Mn(this,tn,"f").removeEventListener("loadedmetadata",this._contentLoadedAction),Mn(this,tn,"f").removeEventListener("loadedmetadata",this._handleResizeAds),Mn(this,tn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),Mn(this,tn,"f").removeEventListener("ended",this._contentEndedListener),"undefined"!=typeof window&&window.removeEventListener("resize",this._handleResizeAds),Mn(this,on,"f")&&(Mn(this,on,"f").removeEventListener("click",this._handleClickInContainer),Mn(this,on,"f").remove()),this.loadPromise=null,this.loadedAd=!1,Ln(this,Vi,!1,"f"),Ln(this,vn,!1,"f"),Ln(this,Yi,0,"f"),Ln(this,Xi,0,"f"),Ln(this,kn,null,"f")}},{key:"resizeAds",value:function(e,t){var i=this;if(Mn(this,Ji,"f")){var n=Mn(this,tn,"f"),s="true"===n.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,a=e,r=e?e.toString():"";e&&r.indexOf("%")>-1&&Mn(this,tn,"f").parentElement&&(a=Mn(this,tn,"f").parentElement.offsetWidth*(parseInt(r,10)/100));var o,l=t,f=t?t.toString():"";t&&f.indexOf("%")>-1&&Mn(this,tn,"f").parentElement&&(l=Mn(this,tn,"f").parentElement.offsetHeight*(parseInt(f,10)/100)),o&&"undefined"!=typeof window&&window.cancelAnimationFrame(o),"undefined"!=typeof window&&(o=window.requestAnimationFrame((function(){Mn(i,Ji,"f").resize(a||n.offsetWidth,l||n.offsetHeight,s)})))}}},{key:"getAdsManager",value:function(){return Mn(this,Ji,"f")}},{key:"getAdsLoader",value:function(){return Mn(this,rn,"f")}},{key:"started",value:function(){return Mn(this,Ui,"f")}},{key:"src",set:function(e){Ln(this,sn,e,"f")}},{key:"isDone",set:function(e){Ln(this,Vi,e,"f")}},{key:"playRequested",set:function(e){Ln(this,vn,e,"f")}},{key:"volume",get:function(){return Mn(this,Ji,"f")?Mn(this,Ji,"f").getVolume():Mn(this,yn,"f")},set:function(e){Mn(this,Ji,"f")&&(Ln(this,Qi,e,"f"),Mn(this,Ji,"f").setVolume(e),this._setMediaVolume(e),Ln(this,$i,0===e,"f"))}},{key:"muted",get:function(){return Mn(this,$i,"f")},set:function(e){Mn(this,Ji,"f")&&(e?(Mn(this,Ji,"f").setVolume(0),Ln(this,$i,!0,"f"),this._setMediaVolume(0)):(Mn(this,Ji,"f").setVolume(Mn(this,Qi,"f")),Ln(this,$i,!1,"f"),this._setMediaVolume(Mn(this,Qi,"f"))))}},{key:"currentTime",get:function(){return Mn(this,Xi,"f")},set:function(e){Ln(this,Xi,e,"f")}},{key:"duration",get:function(){return Mn(this,Yi,"f")}},{key:"paused",get:function(){return!Mn(this,zi,"f")}},{key:"ended",get:function(){return Mn(this,Ki,"f")}},{key:"_assign",value:function(e){var t,i,n=this,s=e.getAd();switch(s&&Ln(this,kn,s,"f"),e.type){case google.ima.AdEvent.Type.LOADED:if(s.isLinear()){if(v&&w(Mn(this,tn,"f"))&&(Mn(this,tn,"f").controls=!1),Ln(this,Yi,s.getDuration(),"f"),Ln(this,Xi,s.getDuration(),"f"),!Mn(this,wn,"f")&&!p&&!m){var a=M("waiting");Mn(this,tn,"f").dispatchEvent(a);var r=M("loadedmetadata");Mn(this,tn,"f").dispatchEvent(r),this.resizeAds()}}else this._onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:if(s.isLinear()){Mn(this,tn,"f").parentElement&&!Mn(this,tn,"f").parentElement.classList.contains("op-ads--active")&&Mn(this,tn,"f").parentElement.classList.add("op-ads--active"),Mn(this,en,"f").paused||Mn(this,en,"f").pause(),Ln(this,zi,!0,"f");var o,l=M("play");if(Mn(this,tn,"f").dispatchEvent(l),o||(this.resizeAds(),o=!0),Mn(this,en,"f").ended){Ln(this,Ki,!1,"f");var f=M("adsmediaended");Mn(this,tn,"f").dispatchEvent(f)}"undefined"!=typeof window&&Ln(this,Gi,window.setInterval((function(){if(!0===Mn(n,zi,"f")){Ln(n,Xi,Math.round(Mn(n,Ji,"f").getRemainingTime()),"f");var e=M("timeupdate");Mn(n,tn,"f").dispatchEvent(e)}}),350),"f")}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(s.isLinear()){if(e.type===google.ima.AdEvent.Type.SKIPPED){var c=M("adsskipped");Mn(this,tn,"f").dispatchEvent(c)}Mn(this,tn,"f").parentElement&&Mn(this,tn,"f").parentElement.classList.remove("op-ads--active"),Ln(this,zi,!1,"f"),clearInterval(Mn(this,Gi,"f"))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);break;case google.ima.AdEvent.Type.VOLUME_MUTED:if(s.isLinear()){var u=M("volumechange");Mn(this,tn,"f").dispatchEvent(u)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(s.isLinear()&&(Ln(this,zi,!1,"f"),Ln(this,Ki,!0,"f"),Ln(this,Gi,0,"f"),Ln(this,$i,!1,"f"),Ln(this,Ui,!1,"f"),Ln(this,kn,null,"f"),Mn(this,tn,"f").parentElement&&Mn(this,tn,"f").parentElement.classList.remove("op-ads--active"),this.destroy(),Mn(this,tn,"f").currentTime>=Mn(this,tn,"f").duration)){var d=M("ended");Mn(this,tn,"f").dispatchEvent(d)}break;case google.ima.AdEvent.Type.CLICK:var h=M("pause");Mn(this,tn,"f").dispatchEvent(h);break;case google.ima.AdEvent.Type.AD_BREAK_READY:Mn(this,pn,"f").autoPlayAdBreaks||this.play();break;case google.ima.AdEvent.Type.AD_PROGRESS:var y=e.getAdData(),g=Mn(this,kn,"f")?Mn(this,kn,"f").getSkipTimeOffset():-1;if(Mn(this,fn,"f"))if(-1!==g){var b=Mn(this,Ji,"f").getAdSkippableState(),E=Math.ceil(g-y.currentTime);Mn(this,fn,"f").classList.remove("hidden"),b?(Mn(this,fn,"f").textContent=(null===(t=Mn(this,pn,"f").audioSkip)||void 0===t?void 0:t.label)||"",Mn(this,fn,"f").classList.remove("disabled")):(Mn(this,fn,"f").textContent=(null===(i=Mn(this,pn,"f").audioSkip)||void 0===i?void 0:i.remainingLabel.replace("[[secs]]",E.toString()))||"",Mn(this,fn,"f").classList.add("disabled"))}else Mn(this,fn,"f").classList.add("hidden")}if(e.type===google.ima.AdEvent.Type.LOG){var k=e.getAdData();if(k.adError){var _=k.adError.getMessage();console.warn("Ad warning: Non-fatal error occurred: ".concat(_));var A=M("playererror",{detail:{data:k.adError,message:_,type:"Ads"}});Mn(this,tn,"f").dispatchEvent(A)}}else{var L=M("ads".concat(e.type));Mn(this,tn,"f").dispatchEvent(L)}}},{key:"_error",value:function(e){var t,i=e.getError(),n=M("playererror",{detail:{data:i,message:i.toString(),type:"Ads"}});Mn(this,tn,"f").dispatchEvent(n),Array.isArray(Mn(this,sn,"f"))&&Mn(this,sn,"f").length>1&&Mn(this,mn,"f")<Mn(this,sn,"f").length-1?(Ln(this,mn,(t=Mn(this,mn,"f"),++t),"f"),this.destroy(),Ln(this,Ui,!0,"f"),Ln(this,vn,!0,"f"),this.load(!0),console.warn("Ad warning: ".concat(i.toString()))):([100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005].indexOf(i.getErrorCode())>-1?(Mn(this,Ji,"f")&&Mn(this,Ji,"f").destroy(),console.error("Ad error: ".concat(i.toString()))):console.warn("Ad warning: ".concat(i.toString())),Ln(this,kn,null,"f"),!0!==Mn(this,dn,"f")&&!0!==Mn(this,hn,"f")&&!0!==Mn(this,Ui,"f")||(Ln(this,zi,!1,"f"),this._resumeMedia()))}},{key:"_loaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!1,t.enablePreloading=Mn(this,pn,"f").enablePreloading,Ln(this,Ji,e.getAdsManager(Mn(this,tn,"f"),t),"f"),this._start(Mn(this,Ji,"f")),this.loadPromise=new Promise((function(e){e()}))}},{key:"_start",value:function(e){var t=this;Mn(this,ln,"f")&&e.isCustomClickTrackingUsed()&&Mn(this,ln,"f").classList.add("op-ads__click-container--visible"),e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested,E),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested,E),Ln(this,nn,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG],"f"),Mn(this,pn,"f").autoPlayAdBreaks||Mn(this,nn,"f").push(google.ima.AdEvent.Type.AD_BREAK_READY);var i=Mn(this,Zi,"f").getControls(),n=i?i.events.mouse:{};if(Object.keys(n).forEach((function(e){Mn(t,on,"f")&&Mn(t,on,"f").addEventListener(e,n[e],E)})),Mn(this,nn,"f").forEach((function(i){e.addEventListener(i,t._assign,E)})),!0===Mn(this,dn,"f")||!0===Mn(this,hn,"f")||!0===Mn(this,vn,"f")){if(Ln(this,vn,!1,"f"),!Mn(this,Vi,"f"))return void this._initNotDoneAds();e.init(Mn(this,tn,"f").offsetWidth,Mn(this,tn,"f").offsetHeight,Mn(this,tn,"f").parentElement&&"true"===Mn(this,tn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.start();var s=M("play");Mn(this,tn,"f").dispatchEvent(s)}else!0===Mn(this,pn,"f").enablePreloading&&e.init(Mn(this,tn,"f").offsetWidth,Mn(this,tn,"f").offsetHeight,Mn(this,tn,"f").parentElement&&"true"===Mn(this,tn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}},{key:"_initNotDoneAds",value:function(){Mn(this,cn,"f")?(Ln(this,Vi,!0,"f"),Mn(this,cn,"f").initialize(),p||m?(Ln(this,gn,this._contentLoadedAction,"f"),Mn(this,tn,"f").addEventListener("loadedmetadata",this._contentLoadedAction,E),Mn(this,tn,"f").load()):this._contentLoadedAction()):(this.load(),this.loadedAd=!1)}},{key:"_contentEndedListener",value:function(){Ln(this,Ki,!0,"f"),Ln(this,zi,!1,"f"),Ln(this,Ui,!1,"f"),Mn(this,rn,"f").contentComplete()}},{key:"_onContentPauseRequested",value:function(){Mn(this,tn,"f").removeEventListener("ended",this._contentEndedListener),Ln(this,bn,Mn(this,en,"f").currentTime,"f"),Mn(this,Ui,"f")?Mn(this,en,"f").pause():Ln(this,Ui,!0,"f");var e=M("play");Mn(this,tn,"f").dispatchEvent(e)}},{key:"_onContentResumeRequested",value:function(){if(Mn(this,tn,"f").addEventListener("ended",this._contentEndedListener,E),Mn(this,tn,"f").addEventListener("loadedmetadata",this._loadedMetadataHandler,E),p||m)Mn(this,en,"f").src=Mn(this,En,"f"),Mn(this,en,"f").load(),this._prepareMedia(),Mn(this,tn,"f").parentElement&&Mn(this,tn,"f").parentElement.classList.add("op-ads--active");else{var e=M("loadedmetadata");Mn(this,tn,"f").dispatchEvent(e)}}},{key:"_loadedMetadataHandler",value:function(){var e;Array.isArray(Mn(this,sn,"f"))?(Ln(this,mn,(e=Mn(this,mn,"f"),++e),"f"),Mn(this,mn,"f")<=Mn(this,sn,"f").length-1?(Mn(this,Ji,"f")&&Mn(this,Ji,"f").destroy(),Mn(this,rn,"f").contentComplete(),Ln(this,vn,!0,"f"),Ln(this,Ui,!0,"f"),Ln(this,Vi,!1,"f"),this.load(!0)):(Mn(this,pn,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia())):Mn(this,tn,"f").seekable.length?Mn(this,tn,"f").seekable.end(0)>Mn(this,bn,"f")&&(Mn(this,pn,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia()):setTimeout(this._loadedMetadataHandler,100)}},{key:"_resumeMedia",value:function(){var e=this;if(Ln(this,Gi,0,"f"),Ln(this,$i,!1,"f"),Ln(this,Ui,!1,"f"),Ln(this,Yi,0,"f"),Ln(this,Xi,0,"f"),Mn(this,tn,"f").parentElement&&Mn(this,tn,"f").parentElement.classList.remove("op-ads--active"),Mn(this,en,"f").ended){var t=M("ended");Mn(this,tn,"f").dispatchEvent(t)}else try{Mn(this,en,"f").play(),setTimeout((function(){var t=M("play");Mn(e,tn,"f").dispatchEvent(t)}),50)}catch(e){console.error(e)}}},{key:"_requestAds",value:function(){Ln(this,un,new google.ima.AdsRequest,"f");var e=Array.isArray(Mn(this,sn,"f"))?Mn(this,sn,"f")[Mn(this,mn,"f")]:Mn(this,sn,"f");!function(e){var t;if("undefined"==typeof DOMParser)return!1;t=function(e){return(new DOMParser).parseFromString(e,"text/xml")};try{if(t(e).getElementsByTagName("parsererror").length>0)return!1}catch(e){return!1}return!0}(e)?Mn(this,un,"f").adTagUrl=e:Mn(this,un,"f").adsResponse=e;var t=Mn(this,tn,"f").parentElement?Mn(this,tn,"f").parentElement.offsetWidth:0,i=Mn(this,tn,"f").parentElement?Mn(this,tn,"f").parentElement.offsetHeight:0;Mn(this,un,"f").linearAdSlotWidth=t,Mn(this,un,"f").linearAdSlotHeight=i,Mn(this,un,"f").nonLinearAdSlotWidth=t,Mn(this,un,"f").nonLinearAdSlotHeight=i/3,Mn(this,un,"f").setAdWillAutoPlay(Mn(this,dn,"f")),Mn(this,un,"f").setAdWillPlayMuted(Mn(this,hn,"f")||Mn(this,$i,"f")),Mn(this,rn,"f").requestAds(Mn(this,un,"f"))}},{key:"_contentLoadedAction",value:function(){Mn(this,gn,"f")&&(Mn(this,tn,"f").removeEventListener("loadedmetadata",Mn(this,gn,"f")),Ln(this,gn,null,"f")),this._requestAds()}},{key:"_resetAdsAfterManualBreak",value:function(){Mn(this,Ji,"f")&&Mn(this,Ji,"f").destroy(),Mn(this,rn,"f").contentComplete(),Ln(this,Vi,!1,"f"),Ln(this,vn,!0,"f")}},{key:"_prepareMedia",value:function(){Mn(this,en,"f").currentTime=Mn(this,bn,"f"),Mn(this,tn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),this._resumeMedia()}},{key:"_setMediaVolume",value:function(e){Mn(this,en,"f").volume=e,Mn(this,en,"f").muted=0===e}},{key:"_handleClickInContainer",value:function(){if(Mn(this,en,"f").paused){var e=M("paused");Mn(this,tn,"f").dispatchEvent(e),this.pause()}}},{key:"_handleResizeAds",value:function(){this.resizeAds()}},{key:"_handleSkipAds",value:function(){Mn(this,Ji,"f").skip()}}]);Ki=new WeakMap,Vi=new WeakMap,zi=new WeakMap,Ui=new WeakMap,Gi=new WeakMap,Qi=new WeakMap,$i=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,sn=new WeakMap,an=new WeakMap,rn=new WeakMap,on=new WeakMap,ln=new WeakMap,fn=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,hn=new WeakMap,vn=new WeakMap,pn=new WeakMap,mn=new WeakMap,yn=new WeakMap,gn=new WeakMap,bn=new WeakMap,En=new WeakMap,wn=new WeakMap,kn=new WeakMap;var Cn,Sn,On,Pn,xn,jn,Wn,Rn,Nn,In,Dn,Bn,Fn,qn,Hn,Kn,Vn=Tn,zn=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Un=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Gn=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Qn=function(){function t(e,i){var n;a(this,t),this.proxy=null,Cn.set(this,void 0),Sn.set(this,void 0),On.set(this,""),Pn.set(this,void 0),xn.set(this,void 0),jn.set(this,void 0),Wn.set(this,{}),Rn.set(this,!1),Nn.set(this,void 0),In.set(this,!1),Dn.set(this,!1),Bn.set(this,!1),Fn.set(this,void 0),qn.set(this,[]),Hn.set(this,void 0),Kn.set(this,{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:void 0,detachMenus:!1,forceNative:!1,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"Fullscreen",lang:{en:"English"},levels:"Quality Levels",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"Mute",off:"Off",pause:"Pause",play:"Play",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"Player Settings",speed:"Speed",speedNormal:"Normal",tap:"Tap to unmute",toggleCaptions:"Toggle Captions",unmute:"Unmute",volume:"Volume",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},media:{pauseOnClick:!1},mode:"responsive",onError:function(e){return console.error(e)},pauseOthers:!0,progress:{allowRewind:!0,allowSkip:!0,duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,useDeviceVolume:!0,width:0}),Un(this,Pn,e instanceof HTMLMediaElement?e:document.getElementById(e),"f"),Gn(this,Pn,"f")&&(Un(this,Rn,Gn(this,Pn,"f").autoplay||!1,"f"),"string"==typeof i||Array.isArray(i)||this._mergeOptions(i),Gn(this,Pn,"f").volume=Gn(this,Fn,"f").startVolume||1,Gn(this,Fn,"f").ads&&Gn(this,Fn,"f").ads.src&&Un(this,xn,Gn(this,Fn,"f").ads.src,"f"),((null===(n=Gn(this,Fn,"f"))||void 0===n?void 0:n.startTime)||0)>0&&(Gn(this,Pn,"f").currentTime=Gn(this,Fn,"f").startTime||0),Un(this,Nn,Gn(this,Pn,"f").volume,"f")),this._autoplay=this._autoplay.bind(this),this._enableKeyBindings=this._enableKeyBindings.bind(this)}return o(t,[{key:"init",value:function(){return zn(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isValid()){e.next=9;break}return this._wrapInstance(),e.next=4,this._prepareMedia();case 4:this._createPlayButton(),this._createUID(),this._createControls(),this._setEvents(),t.instances[this.id]=this;case 9:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return zn(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gn(this,jn,"f")){e.next=4;break}return e.next=3,this._prepareMedia();case 3:return e.abrupt("return",Gn(this,jn,"f").load());case 4:return Gn(this,jn,"f").loaded=!1,e.abrupt("return",this.isMedia()?Gn(this,jn,"f").load():void 0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"play",value:function(){return zn(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gn(this,jn,"f").loaded){e.next=4;break}return e.next=3,Gn(this,jn,"f").load();case 3:Gn(this,jn,"f").loaded=!0;case 4:if(!Gn(this,Sn,"f")){e.next=9;break}return Gn(this,Sn,"f").playRequested=!0,e.next=8,Gn(this,Sn,"f").loadPromise;case 8:return e.abrupt("return",Gn(this,Sn,"f").play());case 9:return e.abrupt("return",Gn(this,jn,"f").play());case 10:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){Gn(this,Sn,"f")?Gn(this,Sn,"f").pause():Gn(this,jn,"f").pause()}},{key:"stop",value:function(){this.pause(),Gn(this,jn,"f")&&(Gn(this,jn,"f").currentTime=0,this.src=[{src:"",type:"video/mp4"}])}},{key:"destroy",value:function(){var e,i=this;Gn(this,Sn,"f")&&(Gn(this,Sn,"f").pause(),Gn(this,Sn,"f").destroy()),Gn(this,Hn,"f")&&Gn(this,Hn,"f").destroy();var n=Gn(this,Pn,"f");Gn(this,jn,"f")&&Gn(this,jn,"f").destroy(),Object.keys(Gn(this,Wn,"f")).forEach((function(e){n.removeEventListener(e,Gn(i,Wn,"f")[e])})),this.getContainer().removeEventListener("keydown",this._enableKeyBindings),Gn(this,Rn,"f")&&!Gn(this,Bn,"f")&&w(Gn(this,Pn,"f"))&&n.removeEventListener("canplay",this._autoplay),Gn(this,Cn,"f")&&Gn(this,Cn,"f").destroy(),w(Gn(this,Pn,"f"))&&(this.playBtn&&this.playBtn.remove(),this.loader&&this.loader.remove()),(null===(e=Gn(this,Fn,"f"))||void 0===e?void 0:e.onError)&&Gn(this,Pn,"f").removeEventListener("playererror",Gn(this,Fn,"f").onError),n.controls=!0,n.setAttribute("id",Gn(this,On,"f")),n.removeAttribute("op-live__enabled"),n.removeAttribute("op-dvr__enabled");var s="fit"!==Gn(this,Fn,"f").mode||k(n)?n.parentElement:n.closest(".op-player__fit--wrapper");s&&s.parentNode&&s.parentNode.replaceChild(n,s),delete t.instances[Gn(this,On,"f")];var a=M("playerdestroyed");n.dispatchEvent(a)}},{key:"getContainer",value:function(){return Gn(this,Pn,"f").parentElement||Gn(this,Pn,"f")}},{key:"getControls",value:function(){return Gn(this,Cn,"f")}},{key:"getCustomControls",value:function(){return Gn(this,qn,"f")}},{key:"getElement",value:function(){return Gn(this,Pn,"f")}},{key:"getEvents",value:function(){return Gn(this,Wn,"f")}},{key:"getOptions",value:function(){return Gn(this,Fn,"f")}},{key:"activeElement",value:function(){return Gn(this,Sn,"f")&&Gn(this,Sn,"f").started()?Gn(this,Sn,"f"):Gn(this,jn,"f")}},{key:"isMedia",value:function(){return this.activeElement()instanceof _n}},{key:"isAd",value:function(){return this.activeElement()instanceof Vn}},{key:"getMedia",value:function(){return Gn(this,jn,"f")}},{key:"getAd",value:function(){return Gn(this,Sn,"f")}},{key:"addCaptions",value:function(e){if(e.default)for(var t=Gn(this,Pn,"f").querySelectorAll("track"),i=0,n=t.length;i<n;i++)t[i].default=!1;var s=Gn(this,Pn,"f"),a=s.querySelector('track[srclang="'.concat(e.srclang,'"][kind="').concat(e.kind,'"]'));a?(a.src=e.src,a.label=e.label,a.default=e.default||!1):((a=document.createElement("track")).srclang=e.srclang,a.src=e.src,a.kind=e.kind,a.label=e.label,a.default=e.default||!1,s.appendChild(a));var r=M("controlschanged");s.dispatchEvent(r)}},{key:"addControl",value:function(e){e.custom=!0,e.type="button",Gn(this,qn,"f").push(e);var t=M("controlschanged");Gn(this,Pn,"f").dispatchEvent(t)}},{key:"addElement",value:function(e){e.custom=!0,Gn(this,qn,"f").push(e);var t=M("controlschanged");Gn(this,Pn,"f").dispatchEvent(t)}},{key:"removeControl",value:function(e){var t=this;Gn(this,qn,"f").forEach((function(i,n){i.id===e&&Gn(t,qn,"f").splice(n,1)}));var i=M("controlschanged");Gn(this,Pn,"f").dispatchEvent(i)}},{key:"_prepareMedia",value:function(){var e;return zn(this,void 0,void 0,f().mark((function i(){var n,s;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,(null===(e=Gn(this,Fn,"f"))||void 0===e?void 0:e.onError)&&Gn(this,Pn,"f").addEventListener("playererror",Gn(this,Fn,"f").onError,E),Gn(this,Rn,"f")&&w(Gn(this,Pn,"f"))&&Gn(this,Pn,"f").addEventListener("canplay",this._autoplay,E),Un(this,jn,new _n(Gn(this,Pn,"f"),Gn(this,Fn,"f"),Gn(this,Rn,"f"),t.customMedia),"f"),n=Gn(this,Pn,"f").getAttribute("preload"),!Gn(this,xn,"f")&&n&&"none"===n){i.next=9;break}return i.next=8,Gn(this,jn,"f").load();case 8:Gn(this,jn,"f").loaded=!0;case 9:!Gn(this,Rn,"f")&&Gn(this,xn,"f")&&(s=Gn(this,Fn,"f")&&Gn(this,Fn,"f").ads?Gn(this,Fn,"f").ads:void 0,Un(this,Sn,new Vn(this,Gn(this,xn,"f"),!1,!1,s),"f")),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(0),console.error(i.t0);case 15:case"end":return i.stop()}}),i,this,[[0,12]])})))}},{key:"enableDefaultPlayer",value:function(){var e=this,t=!0,i=0;this.proxy&&!this.proxy.paused&&(t=!1,i=this.proxy.currentTime,this.proxy.pause()),this.proxy=this,this.getElement().addEventListener("loadedmetadata",(function(){e.getMedia().currentTime=i,t||e.play()}))}},{key:"loadAd",value:function(e){return zn(this,void 0,void 0,f().mark((function t(){var i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAd()?(this.getAd().destroy(),this.getAd().src=e,this.getAd().loadedAd=!1,this.getAd().load()):(i=Gn(this,Fn,"f")&&Gn(this,Fn,"f").ads?Gn(this,Fn,"f").ads:void 0,n=!this.activeElement().paused||Gn(this,In,"f"),Un(this,Sn,new Vn(this,e,n,Gn(this,Dn,"f"),i),"f"))}catch(e){console.error(e)}case 1:case"end":return t.stop()}}),t,this)})))}},{key:"src",get:function(){return Gn(this,jn,"f").src},set:function(t){var i=this;Gn(this,jn,"f")instanceof _n?(Gn(this,jn,"f").mediaFiles=[],Gn(this,jn,"f").src=t):"string"==typeof t?Gn(this,Pn,"f").src=t:Array.isArray(t)?t.forEach((function(e){var t=document.createElement("source");t.src=e.src,t.type=e.type||re(e.src,Gn(i,Pn,"f")),Gn(i,Pn,"f").appendChild(t)})):"object"===e(t)&&(Gn(this,Pn,"f").src=t.src)}},{key:"id",get:function(){return Gn(this,On,"f")}},{key:"_isValid",value:function(){var e=Gn(this,Pn,"f");return e instanceof HTMLElement!=!1&&(!(!k(e)&&!w(e))&&!!e.classList.contains("op-player__media"))}},{key:"_wrapInstance",value:function(){var e=document.createElement("div");e.className="op-player op-player__keyboard--inactive",e.className+=k(Gn(this,Pn,"f"))?" op-player__audio":" op-player__video",e.tabIndex=0,Gn(this,Pn,"f").classList.remove("op-player"),Gn(this,Pn,"f").parentElement&&Gn(this,Pn,"f").parentElement.insertBefore(e,Gn(this,Pn,"f")),e.appendChild(Gn(this,Pn,"f"));var t=document.createElement("div");if(t.className="op-status",t.innerHTML="<span></span>",t.tabIndex=-1,t.setAttribute("aria-hidden","true"),w(Gn(this,Pn,"f"))&&Gn(this,Pn,"f").parentElement&&Gn(this,Pn,"f").parentElement.insertBefore(t,Gn(this,Pn,"f")),e.addEventListener("keydown",(function(){e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")}),E),e.addEventListener("click",(function(){e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")}),E),"fill"!==Gn(this,Fn,"f").mode||k(Gn(this,Pn,"f"))||v)if("fit"!==Gn(this,Fn,"f").mode||k(Gn(this,Pn,"f"))){var i="";if(Gn(this,Fn,"f").width){var n="number"==typeof Gn(this,Fn,"f").width?"".concat(Gn(this,Fn,"f").width,"px"):Gn(this,Fn,"f").width;i+="width: ".concat(n," !important;")}if(Gn(this,Fn,"f").height){var s="number"==typeof Gn(this,Fn,"f").height?"".concat(Gn(this,Fn,"f").height,"px"):Gn(this,Fn,"f").height;i+="height: ".concat(s," !important;")}i&&e.setAttribute("style",i)}else{var a=this.getContainer();if(a.parentElement){var r=document.createElement("div");r.className="op-player__fit--wrapper",r.tabIndex=0,a.parentElement.insertBefore(r,a),r.appendChild(a),a.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}},{key:"_createControls",value:function(){v&&w(Gn(this,Pn,"f"))&&this.getContainer().classList.add("op-player__ios--iphone"),Un(this,Cn,new Rt(this),"f"),Gn(this,Cn,"f").create()}},{key:"_createUID",value:function(){Gn(this,Pn,"f").id?(Un(this,On,Gn(this,Pn,"f").id,"f"),Gn(this,Pn,"f").removeAttribute("id")):Un(this,On,"op_".concat(crypto.getRandomValues(new Uint32Array(1))[0].toString(36).substring(2,9)),"f"),Gn(this,Pn,"f").parentElement&&(Gn(this,Pn,"f").parentElement.id=Gn(this,On,"f"))}},{key:"_createPlayButton",value:function(){var e,t,i=this;k(Gn(this,Pn,"f"))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=(null===(e=Gn(this,Fn,"f").labels)||void 0===e?void 0:e.play)||"",this.playBtn.innerHTML="<span>".concat((null===(t=Gn(this,Fn,"f").labels)||void 0===t?void 0:t.play)||"","</span>"),this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false"),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),Gn(this,Pn,"f").parentElement&&(Gn(this,Pn,"f").parentElement.insertBefore(this.loader,Gn(this,Pn,"f")),Gn(this,Pn,"f").parentElement.insertBefore(this.playBtn,Gn(this,Pn,"f"))),this.playBtn.addEventListener("click",(function(){Gn(i,Sn,"f")&&(Gn(i,Sn,"f").playRequested=i.activeElement().paused),i.activeElement().paused?i.activeElement().play():i.activeElement().pause()}),E))}},{key:"_setEvents",value:function(){var e=this;if(w(Gn(this,Pn,"f"))){Gn(this,Wn,"f").loadedmetadata=function(){var t=e.activeElement();!Gn(e,Fn,"f").showLoaderOnInit||p||m?(e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","false")):(e.loader.setAttribute("aria-hidden","false"),e.playBtn.setAttribute("aria-hidden","true")),t.paused&&(e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.setAttribute("aria-pressed","false"))},Gn(this,Wn,"f").waiting=function(){e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")},Gn(this,Wn,"f").seeking=function(){var t=e.activeElement();e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden",t instanceof _n?"false":"true")},Gn(this,Wn,"f").seeked=function(){var t=e.activeElement();0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden",t instanceof _n?"false":"true"),e.loader.setAttribute("aria-hidden","true"))},Gn(this,Wn,"f").play=function(){var t;e.playBtn.classList.add("op-player__play--paused"),e.playBtn.title=(null===(t=Gn(e,Fn,"f").labels)||void 0===t?void 0:t.pause)||"",e.loader.setAttribute("aria-hidden","true"),Gn(e,Fn,"f").showLoaderOnInit?e.playBtn.setAttribute("aria-hidden","true"):setTimeout((function(){e.playBtn.setAttribute("aria-hidden","true")}),Gn(e,Fn,"f").hidePlayBtnTimer)},Gn(this,Wn,"f").playing=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")},Gn(this,Wn,"f").pause=function(){var t,i=e.activeElement();e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.title=(null===(t=Gn(e,Fn,"f").labels)||void 0===t?void 0:t.play)||"",Gn(e,Fn,"f").showLoaderOnInit&&0===Math.round(i.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden","false"),e.loader.setAttribute("aria-hidden","true"))},Gn(this,Wn,"f").ended=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")};var t=!1;Gn(this,Wn,"f").timeupdate=function(){if(Gn(e,Pn,"f").loop&&e.isMedia()&&Gn(e,Sn,"f")){var i=e.getMedia(),n=i.duration-i.currentTime;if(n>0&&n<=.25&&!t){t=!0;var s=M("ended");Gn(e,Pn,"f").dispatchEvent(s)}else 0===n&&(t=!1)}}}Object.keys(Gn(this,Wn,"f")).forEach((function(t){Gn(e,Pn,"f").addEventListener(t,Gn(e,Wn,"f")[t],E)})),this.getContainer().addEventListener("keydown",this._enableKeyBindings,E)}},{key:"_autoplay",value:function(){var e,t,i,n,s,a,r=this;Gn(this,Bn,"f")||(Un(this,Bn,!0,"f"),Gn(this,Pn,"f").removeEventListener("canplay",this._autoplay),e=Gn(this,Pn,"f"),t=Gn(this,Nn,"f"),i=function(e){Un(r,In,e,"f")},n=function(e){Un(r,Dn,e,"f")},s=function(){var e,t;if(Gn(r,Dn,"f")){r.activeElement().muted=!0,r.activeElement().volume=0;var i=M("volumechange");Gn(r,Pn,"f").dispatchEvent(i);var n=document.createElement("div"),s=p||m?null===(e=Gn(r,Fn,"f").labels)||void 0===e?void 0:e.tap:null===(t=Gn(r,Fn,"f").labels)||void 0===t?void 0:t.click;n.className="op-player__unmute",n.innerHTML="<span>".concat(s,"</span>"),n.tabIndex=0,n.addEventListener("click",(function(){r.activeElement().muted=!1,r.activeElement().volume=Gn(r,Nn,"f");var e=M("volumechange");Gn(r,Pn,"f").dispatchEvent(e),n.remove()}),E);var a=r.getContainer();a.insertBefore(n,a.firstChild)}else r.activeElement().muted=Gn(r,Pn,"f").muted,r.activeElement().volume=Gn(r,Nn,"f");if(Gn(r,xn,"f")){var o=Gn(r,Fn,"f")&&Gn(r,Fn,"f").ads?Gn(r,Fn,"f").ads:void 0;Un(r,Sn,new Vn(r,Gn(r,xn,"f"),Gn(r,In,"f"),Gn(r,Dn,"f"),o),"f")}else(Gn(r,In,"f")||Gn(r,Dn,"f"))&&r.play()},void 0!==(a=e.play())?a.then((function(){e.pause(),i(!0),n(!1),s()})).catch((function(){e.volume=0,e.muted=!0,e.play().then((function(){e.pause(),i(!0),n(!0),s()})).catch((function(){e.volume=t,e.muted=!1,i(!1),n(!1),s()}))})):(i(!e.paused||"Promise"in window&&a instanceof Promise),e.pause(),n(!1),s()))}},{key:"_mergeOptions",value:function(t){var i=this,n=Object.assign({},t||{});if(Un(this,Fn,Object.assign(Object.assign({},Gn(this,Kn,"f")),n),"f"),Object.keys(Gn(this,Kn,"f")).filter((function(t){return"labels"!==t&&"object"===e(Gn(i,Kn,"f")[t])})).forEach((function(e){var t=n[e]||{};t&&Object.keys(t).length&&(Gn(i,Fn,"f")[e]=Object.assign(Object.assign({},Gn(i,Kn,"f")[e]),t))})),n.labels){var a=n.labels?Object.keys(n.labels):[],r={};a.forEach((function(t){var i=n.labels?n.labels[t]:null;i&&"object"===e(i)&&"lang"===t?Object.keys(i).forEach((function(e){var t=i?i[e]:null;t&&(r=Object.assign(Object.assign({},r),{lang:Object.assign(Object.assign({},r.lang),s({},e,L(t)))}))})):i&&(r=Object.assign(Object.assign({},r),s({},t,L(i))))})),Gn(this,Fn,"f").labels=Object.assign(Object.assign({},Gn(this,Kn,"f").labels),r)}}},{key:"_enableKeyBindings",value:function(e){var t,i,n=e.which||e.keyCode||0,s=this.activeElement(),a=this.isAd(),r=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-player");switch(n){case 13:case 32:case 75:!r||13!==n&&32!==n?75===n&&(s.paused?s.play():s.pause()):s.paused?s.play():s.pause(),e.preventDefault(),e.stopPropagation();break;case 35:a||s.duration===1/0||(s.currentTime=s.duration,e.preventDefault(),e.stopPropagation());break;case 36:a||(s.currentTime=0,e.preventDefault(),e.stopPropagation());break;case 37:case 39:case 74:case 76:if(!a&&s.duration!==1/0){var o=5,l=this.getOptions().step;l?o=74===n||76===n?2*l:l:74!==n&&76!==n||(o=10);var f=s.duration!==1/0?o:(null===(i=this.getOptions().progress)||void 0===i?void 0:i.duration)||0;s.currentTime+=37===n||74===n?-1*f:f,s.currentTime<0?s.currentTime=0:s.currentTime>=s.duration&&(s.currentTime=s.duration),e.preventDefault(),e.stopPropagation()}break;case 38:case 40:var c=38===n?Math.min(s.volume+.1,1):Math.max(s.volume-.1,0);s.volume=c,s.muted=!(c>0),e.preventDefault(),e.stopPropagation();break;case 70:w(Gn(this,Pn,"f"))&&!e.ctrlKey&&(Un(this,Hn,new ie(this,"",""),"f"),void 0!==Gn(this,Hn,"f").fullScreenEnabled&&(Gn(this,Hn,"f").toggleFullscreen(),e.preventDefault(),e.stopPropagation()));break;case 77:s.muted=!s.muted,s.muted?s.volume=0:s.volume=Gn(this,Nn,"f"),e.preventDefault(),e.stopPropagation();break;case 188:case 190:if(!a&&e.shiftKey){var u=s;u.playbackRate=188===n?Math.max(u.playbackRate-.25,.25):Math.min(u.playbackRate+.25,2);var d=this.getContainer().querySelector(".op-status>span");d&&(d.textContent="".concat(u.playbackRate,"x"),d.parentElement&&d.parentElement.setAttribute("aria-hidden","false"),setTimeout((function(){d.parentElement&&d.parentElement.setAttribute("aria-hidden","true")}),500));var h=M("controlschanged");dispatchEvent(h),e.preventDefault(),e.stopPropagation()}else!a&&s.paused&&(s.currentTime+=.04*(188===n?-1:1),e.preventDefault(),e.stopPropagation())}}}],[{key:"init",value:function(){t.instances={};for(var e=document.querySelectorAll("video.op-player, audio.op-player"),i=0,n=e.length;i<n;i++){var s=e[i],a=s.getAttribute("data-op-settings");new t(s,a?JSON.parse(a):{}).init()}}},{key:"addMedia",value:function(e,i,n,s){t.customMedia.media[i]=s,t.customMedia.optionsKey[i]=e,t.customMedia.rules.push(n)}}])}();Cn=new WeakMap,Sn=new WeakMap,On=new WeakMap,Pn=new WeakMap,xn=new WeakMap,jn=new WeakMap,Wn=new WeakMap,Rn=new WeakMap,Nn=new WeakMap,In=new WeakMap,Dn=new WeakMap,Bn=new WeakMap,Fn=new WeakMap,qn=new WeakMap,Hn=new WeakMap,Kn=new WeakMap,Qn.instances={},Qn.customMedia={media:{},optionsKey:{},rules:[]};var $n=Qn;"undefined"!=typeof window&&(window.OpenPlayer=Qn,window.OpenPlayerJS=Qn,Qn.init())}(),n}()}));
//# sourceMappingURL=openplayer.min.js.map
    </script>
    <script>
        // VAST URL pre player
        const VAST_URL = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/31040149/najmama/responsive/outstream&description_url=[url]&tfcd=0&npa=0&sz=640x360%7C640x480%7C1280x720&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=';
        
        console.log('VAST URL:', VAST_URL);
        
        /**
         * Načíta IMA SDK, ak ešte nie je načítané
         */
        function loadIMASDK() {
            return new Promise(function(resolve, reject) {
                // Skontrolujeme, či je SDK už načítané
                if (typeof google !== 'undefined' && google.ima) {
                    console.log('✓ IMA SDK už je načítané');
                    resolve();
                    return;
                }
                
                // SDK nie je načítané, načítame ho
                console.log('Načítavame IMA SDK...');
                const script = document.createElement('script');
                script.src = 'https://imasdk.googleapis.com/js/sdkloader/ima3.js';
                script.async = true;
                script.onload = function() {
                    console.log('✓ IMA SDK úspešne načítané');
                    // Počkáme krátko, aby sa SDK správne inicializovalo
                    setTimeout(function() {
                        if (typeof google !== 'undefined' && google.ima) {
                            resolve();
                        } else {
                            reject(new Error('IMA SDK sa nenačítalo správne'));
                        }
                    }, 100);
                };
                script.onerror = function() {
                    console.error('✗ Chyba pri načítaní IMA SDK');
                    const errorMsg = 'Nepodarilo sa načítať IMA SDK. Pravdepodobne je blokovaný ad blockerom. Prosím vypnite ad blocker pre túto stránku.';
                    console.error(errorMsg);
                    reject(new Error(errorMsg));
                };
                document.head.appendChild(script);
            });
        }
        
        // Detekcia mobilného zariadenia
        const isMobile = window.innerWidth <= 768;
        const playerWidth = isMobile ? '100%' : '580px';
        const playerHeight = isMobile ? '300px' : '400px';
        
        function interceptFinalVastAndGetDuration() {
            // Zachytíme fetch requesty na VAST URL
            const originalFetch = window.fetch;
            window.fetch = function(...args) {
                const url = args[0];
                if (typeof url === 'string' && (url.includes('vast') || url.includes('gampad'))) {
                    return originalFetch.apply(this, args).then(response => {
                        // Klonujeme response, aby sme mohli čítať body viackrát
                        const clonedResponse = response.clone();
                        clonedResponse.text().then(vastXml => {
                            processVastXml(vastXml);
                        }).catch(err => {
                            // Ignorujeme chyby
                        });
                        return response;
                    });
                }
                return originalFetch.apply(this, args);
            };
            
            // Zachytíme XMLHttpRequest (IMA SDK môže používať aj tento spôsob)
            const originalXHROpen = XMLHttpRequest.prototype.open;
            const originalXHRSend = XMLHttpRequest.prototype.send;
            
            XMLHttpRequest.prototype.open = function(method, url, ...rest) {
                this._url = url;
                return originalXHROpen.apply(this, [method, url, ...rest]);
            };
            
            XMLHttpRequest.prototype.send = function(...args) {
                if (this._url && (this._url.includes('vast') || this._url.includes('gampad'))) {
                    const originalOnReadyStateChange = this.onreadystatechange;
                    this.onreadystatechange = function() {
                        if (this.readyState === 4 && this.status === 200) {
                            const vastXml = this.responseText;
                            if (vastXml) {
                                processVastXml(vastXml);
                            }
                        }
                        if (originalOnReadyStateChange) {
                            originalOnReadyStateChange.apply(this, arguments);
                        }
                    };
                }
                return originalXHRSend.apply(this, args);
            };
            
            /**
             * Spracuje VAST XML a získa z neho dĺžku
             */
            function processVastXml(vastXml) {
                if (vastXml && vastXml.includes('<VAST')) {
                    // Skontrolujeme, či to nie je wrapper VAST
                    // Wrapper VAST obsahuje <Wrapper>, finálny inline VAST obsahuje <InLine>
                    if (vastXml.includes('<InLine>')) {
                        console.log('✓ Zachytili sme finálny inline VAST XML');
                        
                        // Extrahujeme MediaFile URL
                        const mediaFileUrl = getMediaFileUrlFromVastXml(vastXml);
                        if (mediaFileUrl) {
                            finalMediaFileUrl1 = mediaFileUrl;
                            console.log('✓ Uložený MediaFile URL (intercept):', finalMediaFileUrl1);
                        }
                        
                        const duration = getDurationFromVastXml(vastXml);
                        console.log('Parsovaná dĺžka z finálneho inline VAST:', duration, 'sekúnd');
                        if (duration > 0 && duration <= 120) {
                            interceptedDuration = duration; // Uložíme dĺžku
                            console.log('✓ Dĺžka z finálneho inline VAST (intercept):', duration, 'sekúnd');
                            // Uložíme dĺžku - player sa inicializuje cez initializePlayer funkciu
                            // Dĺžka sa nastaví v initializePlayer funkcii
                            console.log('Dĺžka z finálneho inline VAST uložená, bude použitá pri inicializácii playera');
                        } else {
                            console.warn('Dĺžka z finálneho inline VAST je mimo rozsahu:', duration);
                        }
                    } else if (vastXml.includes('<Wrapper>')) {
                        console.log('Zachytili sme wrapper VAST XML (ignorujeme)');
                    }
                }
            }
        }
        
        // Uložíme finálnu dĺžku z interceptu
        let interceptedDuration = 0;
        
        // Sledujeme, či sme už nastavili dĺžku z finálneho inline VAST
        let finalDurationSet1 = false;
        
        // Uložíme finálny inline VAST URL a MediaFile URL pre nastavenie posledného videa
        let finalInlineVastUrl1 = null;
        let finalMediaFileUrl1 = null;
        
        /**
         * Načíta VAST XML priamo z URL a získa dĺžku z finálneho inline VAST
         * Táto funkcia sa pokúša načítať VAST XML a unwrapovať wrapper VAST,
         * aby získala dĺžku z finálneho inline VAST
         */
        async function loadVastAndGetDuration(vastUrl) {
            try {
                console.log('Načítavame VAST XML priamo z URL:', vastUrl);
                const response = await fetch(vastUrl);
                const vastXml = await response.text();
                
                if (vastXml && vastXml.includes('<VAST')) {
                    console.log('VAST XML načítaný, parsujeme...');
                    
                    // Skontrolujeme, či to nie je wrapper VAST
                    if (vastXml.includes('<Wrapper>')) {
                        console.log('Načítali sme wrapper VAST, hľadáme finálny inline VAST...');
                        
                        // Parsujeme XML
                        const parser = new DOMParser();
                        const xmlDoc = parser.parseFromString(vastXml, 'text/xml');
                        
                        // Hľadáme VASTAdTagURI v wrapper VAST
                        const vastAdTagURIs = xmlDoc.getElementsByTagName('VASTAdTagURI');
                        if (vastAdTagURIs.length > 0) {
                            const inlineVastUrl = vastAdTagURIs[0].textContent.trim();
                            console.log('Našli sme inline VAST URL:', inlineVastUrl);
                            
                            // Načítame finálny inline VAST
                            try {
                                const inlineResponse = await fetch(inlineVastUrl);
                                const inlineVastXml = await inlineResponse.text();
                                
                                if (inlineVastXml && inlineVastXml.includes('<InLine>')) {
                                    console.log('✓ Načítali sme finálny inline VAST XML');
                                    
                                    // Uložíme finálny inline VAST URL
                                    finalInlineVastUrl1 = inlineVastUrl;
                                    console.log('✓ Uložený finálny inline VAST URL:', finalInlineVastUrl1);
                                    
                                    // Extrahujeme MediaFile URL
                                    const mediaFileUrl = getMediaFileUrlFromVastXml(inlineVastXml);
                                    if (mediaFileUrl) {
                                        finalMediaFileUrl1 = mediaFileUrl;
                                        console.log('✓ Uložený MediaFile URL:', finalMediaFileUrl1);
                                    }
                                    
                                    const duration = getDurationFromVastXml(inlineVastXml);
                                    if (duration > 0 && duration <= 30) {
                                        interceptedDuration = duration;
                                        console.log('✓ Dĺžka z finálneho inline VAST (priamy fetch):', duration, 'sekúnd');
                                        return duration;
                                    }
                                }
                            } catch (err) {
                                console.warn('Nepodarilo sa načítať finálny inline VAST:', err);
                            }
                        }
                    } else if (vastXml.includes('<InLine>')) {
                        // Je to už finálny inline VAST
                        console.log('✓ Načítali sme finálny inline VAST XML (nie wrapper)');
                        
                        // Uložíme finálny inline VAST URL
                        finalInlineVastUrl1 = vastUrl;
                        console.log('✓ Uložený finálny inline VAST URL (priamy):', finalInlineVastUrl1);
                        
                        // Extrahujeme MediaFile URL
                        const mediaFileUrl = getMediaFileUrlFromVastXml(vastXml);
                        if (mediaFileUrl) {
                            finalMediaFileUrl1 = mediaFileUrl;
                            console.log('✓ Uložený MediaFile URL (priamy):', finalMediaFileUrl1);
                        }
                        
                        const duration = getDurationFromVastXml(vastXml);
                        if (duration > 0 && duration <= 30) {
                            interceptedDuration = duration;
                            console.log('✓ Dĺžka z finálneho inline VAST (priamy fetch):', duration, 'sekúnd');
                            return duration;
                        }
                    }
                }
            } catch (err) {
                console.warn('Nepodarilo sa načítať VAST XML:', err);
            }
            return 0;
        }
        
        /**
         * Nastaví dĺžku videa z VAST odpovede
         * POZNÁMKA: Pre wrapper VAST musíme počkať, kým sa načíta finálny inline VAST
         * a získať dĺžku z aktuálnej ad, ktorá sa skutočne prehráva
         * IGNORUJEME dĺžky > 30 sekúnd (to sú z wrapper VAST)
         */
        function setDurationFromVast(playerInstance) {
            let duration = 0;
            if (playerInstance && playerInstance.isAd()) {
                const adInstance = playerInstance.getAd();
                if (adInstance) {
                    
                    // 1. PRIORITA: Použijeme zachytenú dĺžku z finálneho inline VAST (ak je dostupná)
                    if (interceptedDuration > 0 && interceptedDuration <= 30) {
                        console.log('Používame zachytenú dĺžku z finálneho inline VAST:', interceptedDuration, 'sekúnd');
                        setVideoDuration(interceptedDuration, playerInstance);
                        finalDurationSet1 = true;
                        return;
                    }
                    
                    // 2. Získame dĺžku z ad instance, ale IGNORUJEME dĺžky > 30 sekúnd
                    // (outstream reklamy sú zvyčajne 10-30 sekúnd, wrapper VAST môže mať 37+ sekúnd)
                    duration = adInstance.duration;
                    if (duration && duration > 0 && !isNaN(duration)) {
                        // Pre outstream reklamy zvyčajne trvajú 10-30 sekúnd
                        // Ak je dĺžka v rozumnom rozsahu (<= 30 sekúnd), použijeme ju
                        if (duration > 0 && duration <= 30) {
                            console.log('Dĺžka z ad instance (finálny inline VAST):', duration, 'sekúnd');
                            setVideoDuration(duration, playerInstance);
                            finalDurationSet1 = true;
                            return;
                        } else {
                            console.warn('Ignorujeme dĺžku z wrapper VAST (> 30 sekúnd):', duration);
                        }
                    }
                    
                    // 3. Skúsime získať dĺžku z aktuálnej ad cez ads manager
                    try {
                        const adsManager = adInstance.getAdsManager();
                        if (adsManager) {
                            // Získame aktuálnu ad, ktorá sa práve prehráva
                            const currentAd = adsManager.getCurrentAd();
                            if (currentAd) {
                                duration = currentAd.getDuration();
                                if (duration && duration > 0 && !isNaN(duration) && duration <= 30) {
                                    console.log('Dĺžka z aktuálnej ad (getCurrentAd):', duration, 'sekúnd');
                                    setVideoDuration(duration, playerInstance);
                                    finalDurationSet1 = true;
                                    return;
                                } else if (duration > 30) {
                                    console.warn('Ignorujeme dĺžku z wrapper VAST (getCurrentAd > 30 sekúnd):', duration);
                                }
                            }
                        }
                    } catch (e) {
                        console.warn('Nepodarilo sa získať dĺžku z ads manageru:', e);
                    }
                }
            }
            return duration; // Vrátime dĺžku (0, ak sa nepodarilo získať)
        }
        
        let lastSetDuration = 0; // Sledujeme poslednú nastavenú dĺžku
        
        // Uložíme správnu dĺžku, aby sme ju mohli obnoviť, ak sa controls prepíšu
        let correctDuration = 0;
        
        /**
         * Manuálne aktualizuje dĺžku v controls elemente
         * @param {number} duration - Dĺžka v sekundách
         */
        function updateControlsDuration(duration, playerInstance) {
            if (!playerInstance) {
                return;
            }
            
            try {
                const controls = playerInstance.getControls();
                if (controls) {
                    const container = controls.getContainer();
                    if (container) {
                        const durationElement = container.querySelector('.op-controls__duration');
                        if (durationElement) {
                            // Dočasne zastavíme observer, aby sme nevyvolali nekonečnú slučku
                            if (durationObserver) {
                                durationObserver.disconnect();
                            }
                            
                            durationElement.innerText = formatTime(duration);
                            correctDuration = duration; // Uložíme správnu dĺžku
                            
                            // Znovu spustíme observer
                            if (durationObserver) {
                                durationObserver.observe(durationElement, {
                                    childList: true,
                                    characterData: true,
                                    subtree: true
                                });
                            }
                            
                            console.log('✓ Controls duration aktualizovaná:', formatTime(duration));
                        } else {
                            console.warn('Nepodarilo sa nájsť .op-controls__duration element');
                        }
                    }
                }
            } catch (e) {
                console.warn('Nepodarilo sa aktualizovať controls duration:', e);
            }
        }
        
        // MutationObserver pre sledovanie zmien v controls duration
        let durationObserver = null;
        
        /**
         * Sleduje zmeny v controls duration a zabráni prepísaniu správnej dĺžky
         */
        function watchControlsDuration(playerInstance) {
            if (!playerInstance || !playerInstance.isAd() || correctDuration <= 0) return;
            
            try {
                const controls = playerInstance.getControls();
                if (controls) {
                    const container = controls.getContainer();
                    if (container) {
                        const durationElement = container.querySelector('.op-controls__duration');
                        if (durationElement) {
                            const currentText = durationElement.innerText;
                            const correctText = formatTime(correctDuration);
                            
                            // Ak sa dĺžka prepísala na nesprávnu hodnotu (napr. 00:37, 00:51 namiesto 00:10, 00:20)
                            // a správna dĺžka je <= 30 sekúnd, obnovíme ju
                            if (currentText !== correctText && correctDuration > 0 && correctDuration <= 30) {
                                // Skontrolujeme, či aktuálna dĺžka je > 30 sekúnd (pravdepodobne z wrapper VAST)
                                const currentDuration = parseTimeToSeconds(currentText);
                                if (currentDuration > 30 || currentText === '00:37' || currentText === '00:51' || 
                                    (currentDuration !== correctDuration && correctDuration > 0)) {
                                    console.log('⚠ Detekované prepísanie controls duration z', currentText, 'na', correctText);
                                    durationElement.innerText = correctText;
                                }
                            }
                        }
                    }
                }
            } catch (e) {
                // Ignorujeme chyby
            }
        }
        
        /**
         * Spustí MutationObserver na sledovanie zmien v controls duration elemente
         */
        function startWatchingControlsDuration(playerInstance) {
            if (durationObserver) {
                durationObserver.disconnect();
            }
            
            if (!playerInstance) return;
            
            try {
                const controls = playerInstance.getControls();
                if (controls) {
                    const container = controls.getContainer();
                    if (container) {
                        const durationElement = container.querySelector('.op-controls__duration');
                        if (durationElement) {
                            durationObserver = new MutationObserver(function(mutations) {
                                mutations.forEach(function(mutation) {
                                    if (mutation.type === 'childList' || mutation.type === 'characterData') {
                                        watchControlsDuration(playerInstance);
                                    }
                                });
                            });
                            
                            durationObserver.observe(durationElement, {
                                childList: true,
                                characterData: true,
                                subtree: true
                            });
                            
                            console.log('✓ MutationObserver spustený pre controls duration');
                        }
                    }
                }
            } catch (e) {
                console.warn('Nepodarilo sa spustiť MutationObserver:', e);
            }
        }
        
        /**
         * Zastaví MutationObserver
         */
        function stopWatchingControlsDuration() {
            if (durationObserver) {
                durationObserver.disconnect();
                durationObserver = null;
            }
        }
        
        /**
         * Parsuje časový formát (MM:SS alebo HH:MM:SS) na sekundy
         * @param {string} timeString - Časový formát
         * @returns {number} - Počet sekúnd
         */
        function parseTimeToSeconds(timeString) {
            if (!timeString) return 0;
            const parts = timeString.split(':');
            if (parts.length === 2) {
                // MM:SS
                const minutes = parseInt(parts[0], 10) || 0;
                const seconds = parseInt(parts[1], 10) || 0;
                return minutes * 60 + seconds;
            } else if (parts.length === 3) {
                // HH:MM:SS
                const hours = parseInt(parts[0], 10) || 0;
                const minutes = parseInt(parts[1], 10) || 0;
                const seconds = parseInt(parts[2], 10) || 0;
                return hours * 3600 + minutes * 60 + seconds;
            }
            return 0;
        }
        
        /**
         * Nastaví dĺžku na video element a aktualizuje controls
         * @param {number} duration - Dĺžku v sekundách
         */
        function setVideoDuration(duration, playerInstance) {
            if (!duration || duration <= 0 || isNaN(duration)) return;
            
            // Ignorujeme, ak je to rovnaká dĺžka ako predtým
            if (duration === lastSetDuration) {
                return;
            }
            
            // Ak nie je poskytnutý playerInstance, nemôžeme pokračovať
            if (!playerInstance) {
                return;
            }
            
            const videoElement = playerInstance.getElement();
            if (videoElement) {
                try {
                    // Skontrolujeme aktuálnu dĺžku
                    const currentDuration = videoElement.duration;
                    
                    // Nastavíme dĺžku na video element
                    Object.defineProperty(videoElement, 'duration', {
                        value: duration,
                        writable: false,
                        configurable: true
                    });
                    
                    lastSetDuration = duration;
                    
                    // Dispatch loadedmetadata event, aby sa dĺžka zobrazila v controls
                    const loadedMetadataEvent = new Event('loadedmetadata', { bubbles: true });
                    videoElement.dispatchEvent(loadedMetadataEvent);
                    
                    // Dispatch controlschanged event, aby sa controls aktualizovali
                    const controlsChangedEvent = new Event('controlschanged', { bubbles: true });
                    videoElement.dispatchEvent(controlsChangedEvent);
                    
                    // Manuálne aktualizujeme controls duration element
                    updateControlsDuration(duration, playerInstance);
                    
                    console.log('✓ Dĺžka nastavená na video element:', duration, 'sekúnd (', formatTime(duration), ')');
                } catch (e) {
                    console.warn('Nepodarilo sa nastaviť dĺžku:', e);
                }
            }
        }
        
        /**
         * Sleduje zmeny dĺžky z IMA SDK Ad objektu a nastaví správnu dĺžku z finálneho inline VAST
         * POZNÁMKA: IMA SDK môže vracať dĺžku z wrapper VAST (51 sekúnd) aj po načítaní finálneho inline VAST
         * Preto musíme skúsiť získať dĺžku z video streamu alebo z VAST XML priamo
         */
        function watchVideoDuration(playerInstance) {
            if (!playerInstance) return;
            
            console.log('Spúšťame sledovanie dĺžky z IMA SDK a video streamu...');
            
            // Sledujeme zmeny dĺžky z IMA SDK Ad objektu a video streamu
            let lastCheckedDuration = 0;
            let checkCount = 0;
            const maxChecks = 150; // Kontrolujeme max 150x (30 sekúnd pri 200ms intervale)
            
            const checkInterval = setInterval(function() {
                checkCount++;
                
                if (!playerInstance.isAd() || checkCount > maxChecks) {
                    clearInterval(checkInterval);
                    if (checkCount > maxChecks) {
                        console.log('Sledovanie dĺžky ukončené (max počet kontrol)');
                    }
                    return;
                }
                
                // Získame dĺžku z IMA SDK Ad objektu
                let currentDuration = 0;
                let videoElementDuration = 0;
                
                try {
                    const adInstance = playerInstance.getAd();
                    if (adInstance) {
                        const adsManager = adInstance.getAdsManager();
                        if (adsManager) {
                            const currentAd = adsManager.getCurrentAd();
                            if (currentAd) {
                                currentDuration = currentAd.getDuration();
                            }
                        }
                        
                        // Fallback: skúsime z ad instance
                        if (!currentDuration || currentDuration === 0 || isNaN(currentDuration)) {
                            currentDuration = adInstance.duration;
                        }
                    }
                    
                    // Skúsime získať dĺžku z video elementu (môže byť nastavená neskôr)
                    const videoElement = playerInstance.getElement();
                    if (videoElement && videoElement.duration && videoElement.duration > 0 && 
                        !isNaN(videoElement.duration)) {
                        videoElementDuration = videoElement.duration;
                    }
                } catch (err) {
                    // Ignorujeme chyby
                }
                
                // Skúsime získať dĺžku z seekable (môže obsahovať správnu dĺžku)
                let seekableDuration = 0;
                try {
                    if (videoElement && videoElement.seekable && videoElement.seekable.length > 0) {
                        seekableDuration = videoElement.seekable.end(videoElement.seekable.length - 1);
                    }
                } catch (err) {
                    // Ignorujeme
                }
                
                // Logujeme každú 10. kontrolu
                if (checkCount % 10 === 0) {
                    console.log('Kontrola dĺžky #' + checkCount + ' - IMA SDK:', currentDuration, 
                               'sekúnd, video element:', videoElementDuration, 
                               'sekúnd, seekable:', seekableDuration, 'sekúnd');
                }
                
                // PRIORITA 1: Použijeme dĺžku z seekable, ak je <= 30 sekúnd
                if (seekableDuration > 0 && seekableDuration <= 30 && 
                    seekableDuration !== lastCheckedDuration) {
                    console.log('✓ Zmena dĺžky detekovaná z seekable:', seekableDuration, 
                               'sekúnd (IMA SDK:', currentDuration, 'sekúnd)');
                    if (!finalDurationSet1 || (seekableDuration < lastSetDuration && seekableDuration > 0)) {
                        console.log('✓ Nastavujeme dĺžku z seekable (finálny inline VAST):', seekableDuration, 'sekúnd');
                        setVideoDuration(seekableDuration, playerInstance);
                        finalDurationSet1 = true;
                        clearInterval(checkInterval);
                        return;
                    }
                    lastCheckedDuration = seekableDuration;
                }
                // PRIORITA 2: Použijeme dĺžku z video elementu, ak je <= 30 sekúnd
                else if (videoElementDuration > 0 && videoElementDuration <= 30 && 
                    videoElementDuration !== lastCheckedDuration) {
                    console.log('✓ Zmena dĺžky detekovaná z video elementu:', videoElementDuration, 
                               'sekúnd (IMA SDK:', currentDuration, 'sekúnd)');
                    if (!finalDurationSet1 || (videoElementDuration < lastSetDuration && videoElementDuration > 0)) {
                        console.log('✓ Nastavujeme dĺžku z video elementu (finálny inline VAST):', videoElementDuration, 'sekúnd');
                        setVideoDuration(videoElementDuration, playerInstance);
                        finalDurationSet1 = true;
                        clearInterval(checkInterval);
                        return;
                    }
                    lastCheckedDuration = videoElementDuration;
                }
                // Fallback: Ak video element nemá dĺžku, skúsime z IMA SDK (ale len ak je <= 30 sekúnd)
                else if (currentDuration && currentDuration > 0 && !isNaN(currentDuration)) {
                    // Ak sa dĺžka zmenila a je <= 30 sekúnd, použijeme ju
                    if (currentDuration !== lastCheckedDuration) {
                        if (currentDuration <= 30) {
                            console.log('✓ Zmena dĺžky detekovaná z IMA SDK:', currentDuration, 'sekúnd (predtým:', lastCheckedDuration, ')');
                            if (!finalDurationSet1 || (currentDuration < lastSetDuration && currentDuration > 0)) {
                                console.log('✓ Nastavujeme dĺžku z IMA SDK (finálny inline VAST):', currentDuration, 'sekúnd');
                                setVideoDuration(currentDuration, playerInstance);
                                finalDurationSet1 = true;
                                clearInterval(checkInterval);
                                return;
                            }
                        } else if (currentDuration > 30 && lastCheckedDuration === 0) {
                            // Prvýkrát vidíme dĺžku > 30 sekúnd (wrapper VAST) - ignorujeme
                            console.log('Ignorujeme dĺžku z wrapper VAST (IMA SDK):', currentDuration, 'sekúnd');
                        }
                        lastCheckedDuration = currentDuration;
                    }
                }
            }, 200); // Kontrolujeme každých 200ms
            
            // Zastavíme sledovanie po 30 sekundách
            setTimeout(function() {
                clearInterval(checkInterval);
                if (!finalDurationSet1) {
                    console.warn('Sledovanie dĺžky ukončené bez nájdenia finálnej dĺžky');
                    console.warn('Posledná kontrola - IMA SDK duration:', currentDuration, 
                               ', video element duration:', videoElementDuration);
                }
            }, 30000);
        }
        
        /**
         * Formátuje sekundy na časový formát MM:SS alebo HH:MM:SS
         * @param {number} seconds - Počet sekúnd
         * @returns {string} - Formátovaný čas
         */
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            if (hours > 0) {
                return String(hours).padStart(2, '0') + ':' + 
                       String(minutes).padStart(2, '0') + ':' + 
                       String(secs).padStart(2, '0');
            } else {
                return String(minutes).padStart(2, '0') + ':' + 
                       String(secs).padStart(2, '0');
            }
        }
        
        // Event listenery - odstránené, používame initializePlayer funkciu
        // Skontrolujeme, či je IMA SDK načítané
        if (typeof google === 'undefined' || !google.ima) {
            console.warn('⚠ IMA SDK nie je načítané!');
        } else {
            console.log('✓ IMA SDK je načítané');
        }
        
        // Všetky event listenery sú v initializePlayer funkcii
        
        // Zachytíme finálny inline VAST XML pred inicializáciou
        interceptFinalVastAndGetDuration();
        
        // Funkcia na formátovanie času (minúty:sekundy)
        function formatElapsedTime(seconds) {
            const m = Math.floor(seconds / 60);
            const s = Math.floor(seconds % 60);
            return `${m}:${s.toString().padStart(2, '0')}`;
        }
        
        /**
         * Zobrazí player kontajner, ak je platná reklama
         * @param {string} containerId - ID player kontajnera
         */
        function showPlayerIfAdExists(containerId) {
            const playerContainer = document.querySelector(containerId ? '#' + containerId : '.player-container');
            if (playerContainer) {
                console.log('Zobrazujeme player kontajner (platná reklama):', containerId || 'default');
                
                // Odstránime display: none, ak bol nastavený
                playerContainer.style.display = '';
                playerContainer.style.height = '';
                playerContainer.style.margin = '';
                playerContainer.style.overflow = '';
                
                playerContainer.classList.add('has-ad');
                
                // Nastavíme správnu výšku aj na video elementoch
                const videoElements = playerContainer.querySelectorAll('video');
                videoElements.forEach(function(video) {
                    const isMobile = window.innerWidth <= 768;
                    if (isMobile) {
                        video.style.height = '300px';
                    } else {
                        video.style.height = '400px';
                    }
                    video.style.overflow = '';
                });
            }
        }
        
        /**
         * Skryje player kontajner, ak VAST nevrátil odpoveď alebo je prázdny
         * @param {string} containerId - ID player kontajnera
         */
        function hidePlayerIfNoAd(containerId) {
            const playerContainer = document.querySelector(containerId ? '#' + containerId : '.player-container');
            if (playerContainer) {
                console.log('Skrývame player kontajner (prázdny VAST alebo chyba):', containerId || 'default');
                playerContainer.classList.remove('has-ad');
                playerContainer.style.display = 'none';
                playerContainer.style.height = '0';
                playerContainer.style.margin = '0';
                playerContainer.style.overflow = 'hidden';
                
                // Nastavíme výšku video elementov na 0
                const videoElements = playerContainer.querySelectorAll('video');
                videoElements.forEach(function(video) {
                    video.style.height = '0';
                    video.style.overflow = 'hidden';
                });
            }
        }
        
        // Event listener pre timeupdate - aktualizuje zobrazený čas
        // Toto obíde prípadný countdown, ktorý vykresľuje reklama/skin,
        // a spolieha sa len na natívny currentTime
        document.addEventListener('DOMContentLoaded', function() {
            const videoElement = document.getElementById('outstream-ad-2');
            if (videoElement) {
                videoElement.addEventListener('timeupdate', function() {
                    const elapsedLabel = document.getElementById('elapsed-time-2');
                    if (elapsedLabel && videoElement.currentTime > 0) {
                        elapsedLabel.textContent = formatElapsedTime(videoElement.currentTime);
                        elapsedLabel.classList.add('visible');
                    }
                });
            }
        });
        
        /**
         * Inicializuje outstream player
         * @param {number} playerNumber - Číslo playera
         * @param {string} vastUrl - VAST URL pre player
         */
        function initializePlayer(playerNumber, vastUrl) {
            const playerId = `outstream-ad-${playerNumber}`;
            const containerId = `player-container-${playerNumber}`;
            const bgId = `ad-bg-${playerNumber}`;
            
            // Premenné pre player
            const state = {
                adsReady: false,
                adsStarted: false,
                adsCompleted: false,
                isVisible: false,
                intersectionObserver: null,
                adCycleCount: 0,
                adReloadTimeout: null,
                adClickThroughUrl: null,
                freezeFrameClickHandler: null,
                countdownInterval: null,
                countdownSeconds: 0,
                countdownClickHandler: null,
                lastFrameSnapshot: null,
                snapshotCaptured: false,
                imaVideoElementForFreeze: null,
                rvfcCallbackHandle: null,
                rvfcFreezeCaptured: false,
                adsStartEventFired: false,
                finalDurationSet: false,
                correctDuration: 0,
                interceptedDuration: 0,
                adsRequestTimeout: null
            };
            
            // Funkcie pre player
            function trySnapshotToBg(videoElementParam) {
                let videoElement = null;
                const container = document.querySelector(`#${containerId} .op-ads`);
                if (container) {
                    const imaVideo = container.querySelector('video');
                    if (imaVideo) {
                        videoElement = imaVideo;
                    }
                }
                
                if (!videoElement) {
                    const playerContainer = document.querySelector(`#${containerId}`);
                    if (playerContainer) {
                        const freezeFrameVideo = playerContainer.querySelector('video.freeze-frame-video');
                        if (freezeFrameVideo && freezeFrameVideo.readyState >= 2 && 
                            freezeFrameVideo.videoWidth > 0 && freezeFrameVideo.videoHeight > 0) {
                            videoElement = freezeFrameVideo;
                    } else {
                            const allVideos = playerContainer.querySelectorAll('video');
                    for (let vid of allVideos) {
                                if (vid.id === playerId && vid.readyState === 0) continue;
                                if (vid.readyState >= 2 && vid.videoWidth > 0 && vid.videoHeight > 0) {
                                    videoElement = vid;
                            break;
                        }
                    }
                        }
                    }
                }
                
                if (videoElementParam && videoElementParam.readyState >= 2 &&
                    videoElementParam.videoWidth > 0 && videoElementParam.videoHeight > 0) {
                    videoElement = videoElementParam;
                }
                
                if (!videoElement) {
                    const fallbackVideo = playerInstance.getElement();
                    if (fallbackVideo && fallbackVideo.readyState >= 2 && 
                        fallbackVideo.videoWidth > 0 && fallbackVideo.videoHeight > 0) {
                        videoElement = fallbackVideo;
                            } else {
                        return false;
                    }
                }
                
                const bg = document.getElementById(bgId);
                if (!videoElement || !bg) return false;
                
                if (!videoElement.src && !videoElement.currentSrc) return false;
                
                let videoWidth = videoElement.videoWidth;
                let videoHeight = videoElement.videoHeight;
                if (!videoWidth || videoWidth === 0) videoWidth = videoElement.offsetWidth || 580;
                if (!videoHeight || videoHeight === 0) videoHeight = videoElement.offsetHeight || 400;
                
                if (videoWidth === 0 || videoHeight === 0) return false;
                if (videoElement.readyState < 2) return false;
                if (videoElement.currentTime === 0 && !videoElement.paused) return false;
                
                try {
                    const canvas = document.createElement('canvas');
                    canvas.width = videoWidth;
                    canvas.height = videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
                    const dataUrl = canvas.toDataURL('image/jpeg', 0.8);
                    bg.style.backgroundImage = `url(${dataUrl})`;
                    bg.style.opacity = '1';
                    state.lastFrameSnapshot = dataUrl;
                    console.log(`✓ Player ${playerNumber}: Canvas snapshot úspešný`);
                    return true;
                } catch (e) {
                    console.log(`Player ${playerNumber}: Canvas snapshot zlyhal:`, e.message);
                    bg.style.opacity = '0';
                    return false;
                }
            }
            
            function armFreezeNearEnd(videoElement) {
                if (!videoElement || !('requestVideoFrameCallback' in HTMLVideoElement.prototype)) {
                    return;
                }
                
                state.rvfcFreezeCaptured = false;
                if (state.rvfcCallbackHandle !== null) {
                    try {
                        videoElement.cancelVideoFrameCallback(state.rvfcCallbackHandle);
                    } catch (e) {}
                    state.rvfcCallbackHandle = null;
                }
                
                const EPS = 0.08;
                let stopped = false;
                
                function onFrame(now, meta) {
                    if (stopped || !videoElement || !videoElement.parentNode) return;
                    
                    const dur = videoElement.duration;
                    const t = videoElement.currentTime;
                    
                    if (dur && !isNaN(dur) && dur > 0 && dur - t <= EPS && t > 0) {
                        videoElement.pause();
                        videoElement.currentTime = Math.max(0, dur - 0.001);
                        stopped = true;
                        state.rvfcFreezeCaptured = true;
                        
                        const snapshotSuccess = trySnapshotToBg(videoElement);
                        if (!snapshotSuccess) {
                            state.imaVideoElementForFreeze = videoElement;
                            const playerContainer = document.querySelector(`#${containerId}`);
                            if (playerContainer && videoElement.parentNode) {
                                if (videoElement.parentNode !== playerContainer) {
                                    try {
                                        playerContainer.appendChild(videoElement);
                                    } catch (moveErr) {
                                        console.error(`Player ${playerNumber}: Chyba pri presúvaní video elementu:`, moveErr);
                                    }
                                }
                                videoElement.classList.add('freeze-frame-video');
                                videoElement.style.position = 'absolute';
                                videoElement.style.top = '0';
                                videoElement.style.left = '0';
                                videoElement.style.width = '100%';
                                videoElement.style.height = '100%';
                                videoElement.style.objectFit = 'contain';
                                videoElement.style.zIndex = '2';
                                videoElement.style.opacity = '1';
                                videoElement.style.pointerEvents = 'none';
                                videoElement.style.display = 'block';
                                videoElement.style.visibility = 'visible';
                                videoElement.style.background = 'transparent';
                                videoElement.removeAttribute('controls');
                                videoElement.controls = false;
                                const originalVideo = playerInstance.getElement();
                                if (originalVideo && originalVideo !== videoElement) {
                                    originalVideo.style.opacity = '0';
                                    originalVideo.style.pointerEvents = 'none';
                                }
                                state.lastFrameSnapshot = 'freeze-frame';
                                state.snapshotCaptured = true;
                            }
                        }
                        
                        if (state.rvfcCallbackHandle !== null) {
                            try {
                                videoElement.cancelVideoFrameCallback(state.rvfcCallbackHandle);
                            } catch (e) {}
                            state.rvfcCallbackHandle = null;
                        }
                        return;
                    }
                    
                    if (!stopped) {
                        try {
                            state.rvfcCallbackHandle = videoElement.requestVideoFrameCallback(onFrame);
                        } catch (e) {
                            stopped = true;
                        }
                    }
                }
                
                try {
                    state.rvfcCallbackHandle = videoElement.requestVideoFrameCallback(onFrame);
                } catch (e) {
                    console.warn(`Player ${playerNumber}: Nepodarilo sa aktivovať rVFC:`, e);
                }
            }
            
            // Inicializujeme player
            const playerInstance = new OpenPlayerJS(playerId, {
                mode: 'responsive',
                width: playerWidth,
                height: playerHeight,
                ads: {
                    src: vastUrl,
                    autoPlayAdBreaks: true,
                    enablePreloading: true,
                    language: 'sk',
                    vpaidMode: 'enabled',
                    debug: false,
                },
                onError: function(error) {
                    if (error && error.detail && error.detail.message) {
                        const errorMsg = error.detail.message.toLowerCase();
                        if (errorMsg.includes('media could not be loaded') || 
                            errorMsg.includes('no supported source was found')) {
                            console.log(`Player ${playerNumber}: Ignorujeme chybu načítania média:`, error.detail.message);
                            return;
                        }
                        // Ak je chyba 303 (No Ads VAST response), skryjeme player
                        if (errorMsg.includes('no ads vast response') || 
                            errorMsg.includes('error 303') ||
                            errorMsg.includes('aderror 303')) {
                            console.log(`⚠ Player ${playerNumber}: Chyba 303: No Ads VAST response - skrývame player`);
                            hidePlayerIfNoAd(containerId);
                            return;
                        }
                    }
                    // Skontrolujeme aj error code
                    if (error && error.detail && error.detail.code === 303) {
                        console.log(`⚠ Player ${playerNumber}: Chyba 303 (error code) - skrývame player`);
                        hidePlayerIfNoAd(containerId);
                        return;
                    }
                    console.error(`Player ${playerNumber} - Chyba:`, error);
                }
            });
            
            playerInstance.init().then(function() {
                console.log(`✓ Player ${playerNumber} inicializovaný`);
                
                // Event listener pre adsrequest s timeout
                playerInstance.getElement().addEventListener('adsrequest', function(e) {
                    console.log(`✓ Player ${playerNumber}: Ads request event - reklamy sa začínajú načítavať`);
                    if (state.adsRequestTimeout) {
                        clearTimeout(state.adsRequestTimeout);
                    }
                    state.adsRequestTimeout = setTimeout(function() {
                        if (!state.adsReady) {
                            console.warn(`⚠ Player ${playerNumber}: Timeout: adsloaded sa nespustil do 10 sekúnd - skrývame player`);
                            hidePlayerIfNoAd(containerId);
                        }
                    }, 10000);
                });
                
                // Všetky event listenery pre player
                playerInstance.getElement().addEventListener('adsstart', function(e) {
                    console.log(`▶▶▶ Player ${playerNumber}: Reklama začala (adsstart event) ◀◀◀`);
                    state.adsStarted = true;
                    state.adsStartEventFired = true;
                    state.adsCompleted = false;
                    
                    // Resetujeme click-through URL a handler pre novú reklamu
                    if (state.freezeFrameClickHandler && state.imaVideoElementForFreeze) {
                        try {
                            state.imaVideoElementForFreeze.removeEventListener('click', state.freezeFrameClickHandler);
                        } catch (err) {
                            // Ignorujeme chyby pri odstraňovaní handlera
                        }
                    }
                    state.adClickThroughUrl = null;
                    state.freezeFrameClickHandler = null;
                    
                    // Získame click-through URL z IMA SDK
                    try {
                        if (playerInstance.isAd()) {
                            const adInstance = playerInstance.getAd();
                            if (adInstance) {
                                const adsManager = adInstance.getAdsManager();
                                if (adsManager) {
                                    const currentAd = adsManager.getCurrentAd();
                                    if (currentAd) {
                                        const clickThroughUrl = currentAd.getClickThroughUrl();
                                        if (clickThroughUrl) {
                                            state.adClickThroughUrl = clickThroughUrl;
                                            console.log(`✓ Player ${playerNumber}: Click-through URL získaná:`, clickThroughUrl);
                                        } else {
                                            state.adClickThroughUrl = null;
                                            console.log(`Player ${playerNumber}: Žiadna click-through URL`);
                                        }
                                    }
                                }
                            }
                        }
                    } catch (err) {
                        console.warn(`Player ${playerNumber}: Chyba pri získavaní click-through URL:`, err);
                        state.adClickThroughUrl = null;
                    }
                    
                    setTimeout(function() {
                        let targetVideoElement = null;
                        const container = document.querySelector(`#${containerId} .op-ads`);
                        if (container) {
                            const imaVideo = container.querySelector('video');
                            if (imaVideo && imaVideo.readyState >= 2) {
                                targetVideoElement = imaVideo;
                            }
                        }
                        if (!targetVideoElement) {
                            targetVideoElement = playerInstance.getElement();
                        }
                        if (targetVideoElement) {
                            armFreezeNearEnd(targetVideoElement);
                        }
                    }, 1000);
                });
                
                playerInstance.getElement().addEventListener('adscomplete', function(e) {
                    console.log(`✓ Player ${playerNumber}: Reklama dokončená (adscomplete event)`);
                    if (playerInstance.isAd()) {
                        const adInstance = playerInstance.getAd();
                if (adInstance) {
                    let videoElement = null;
                            const container = document.querySelector(`#${containerId} .op-ads`);
                    if (container) {
                        const imaVideo = container.querySelector('video');
                                if (imaVideo) videoElement = imaVideo;
                            }
                            if (!videoElement) videoElement = playerInstance.getElement();
                            
                            if (videoElement && !state.snapshotCaptured && videoElement.readyState >= 2 && 
                            videoElement.videoWidth > 0 && videoElement.videoHeight > 0) {
                            const snapshotSuccess = trySnapshotToBg(videoElement);
                            if (snapshotSuccess) {
                                    state.snapshotCaptured = true;
                            } else {
                                videoElement.pause();
                                videoElement.removeAttribute('controls');
                                videoElement.controls = false;
                                    state.imaVideoElementForFreeze = videoElement;
                                    const playerContainer = document.querySelector(`#${containerId}`);
                                    if (playerContainer && videoElement.parentNode) {
                                        try {
                                        playerContainer.appendChild(videoElement);
                                        videoElement.classList.add('freeze-frame-video');
                                        videoElement.style.position = 'absolute';
                                        videoElement.style.top = '0';
                                        videoElement.style.left = '0';
                                        videoElement.style.width = '100%';
                                        videoElement.style.height = '100%';
                                        videoElement.style.objectFit = 'contain';
                                        videoElement.style.zIndex = '2';
                                        videoElement.style.opacity = '1';
                                        
                                        // Nastavíme klikateľnosť, ak existuje click-through URL
                                        if (state.adClickThroughUrl) {
                                            videoElement.style.pointerEvents = 'auto';
                                            videoElement.style.cursor = 'pointer';
                                            videoElement.classList.add('clickable');
                                            videoElement.setAttribute('data-clickable', 'true');
                                            
                                            // Odstránime starý handler, ak existuje
                                            if (state.freezeFrameClickHandler) {
                                                videoElement.removeEventListener('click', state.freezeFrameClickHandler);
                                            }
                                            
                                            // Pridáme click handler
                                            const clickHandler = function(e) {
                                                e.preventDefault();
                                                e.stopPropagation();
                                                if (state.adClickThroughUrl) {
                                                    window.open(state.adClickThroughUrl, '_blank', 'noopener,noreferrer');
                                                }
                                            };
                                            videoElement.addEventListener('click', clickHandler);
                                            // Uložíme handler pre možné odstránenie
                                            state.freezeFrameClickHandler = clickHandler;
                                            console.log(`✓ Player ${playerNumber}: Freeze frame je klikateľný s URL:`, state.adClickThroughUrl);
                                        } else {
                                            videoElement.style.pointerEvents = 'none';
                                            // Odstránime handler, ak existuje, ale nie je click-through URL
                                            if (state.freezeFrameClickHandler) {
                                                videoElement.removeEventListener('click', state.freezeFrameClickHandler);
                                                state.freezeFrameClickHandler = null;
                                            }
                                        }
                                        
                                        videoElement.style.display = 'block';
                                        videoElement.style.visibility = 'visible';
                                        videoElement.style.background = 'transparent';
                                            state.lastFrameSnapshot = 'freeze-frame';
                                            state.snapshotCaptured = true;
                                    } catch (moveErr) {
                                            console.error(`Player ${playerNumber}: Chyba pri presúvaní video elementu:`, moveErr);
                                        }
                                    }
                        }
                    }
                }
            }
        });
        
                playerInstance.getElement().addEventListener('adsallAdsCompleted', function(e) {
                    console.log(`✓ Player ${playerNumber}: Všetky reklamy dokončené (adsallAdsCompleted event)`);
                    
                    if (state.rvfcCallbackHandle !== null) {
                        try {
                            const videoElement = playerInstance.getElement();
                    if (videoElement && 'cancelVideoFrameCallback' in videoElement) {
                                videoElement.cancelVideoFrameCallback(state.rvfcCallbackHandle);
                            }
                        } catch (e) {}
                        state.rvfcCallbackHandle = null;
                    }
                    
                    if (state.rvfcFreezeCaptured) {
                        const playerContainer = document.querySelector(`#${containerId}`);
                if (playerContainer) {
                    playerContainer.classList.add('waiting-for-next-ad');
                }
                
                        if (state.snapshotCaptured && state.lastFrameSnapshot && state.lastFrameSnapshot !== 'freeze-frame') {
                            const bg = document.getElementById(bgId);
                    if (bg) {
                                bg.style.backgroundImage = `url(${state.lastFrameSnapshot})`;
                        bg.style.opacity = '1';
                        if (playerContainer) {
                            playerContainer.classList.add('has-snapshot');
                        }
                                const videoElement = playerInstance.getElement();
                        if (videoElement) {
                            videoElement.controls = false;
                            videoElement.style.opacity = '0';
                            videoElement.style.pointerEvents = 'none';
                        }
                            }
                        } else if (state.snapshotCaptured && state.lastFrameSnapshot === 'freeze-frame' && state.imaVideoElementForFreeze) {
                            if (state.imaVideoElementForFreeze.parentNode) {
                                const playerContainer = document.querySelector(`#${containerId}`);
                    if (playerContainer) {
                        playerContainer.classList.add('waiting-for-next-ad');
                    }
                                state.imaVideoElementForFreeze.pause();
                                state.imaVideoElementForFreeze.removeAttribute('controls');
                                state.imaVideoElementForFreeze.controls = false;
                                if (state.imaVideoElementForFreeze.parentNode !== playerContainer && playerContainer) {
                                    try {
                                        playerContainer.appendChild(state.imaVideoElementForFreeze);
                        } catch (moveErr) {
                                        console.error(`Player ${playerNumber}: Chyba pri presúvaní video elementu:`, moveErr);
                                    }
                                }
                                state.imaVideoElementForFreeze.classList.add('freeze-frame-video');
                                state.imaVideoElementForFreeze.style.position = 'absolute';
                                state.imaVideoElementForFreeze.style.top = '0';
                                state.imaVideoElementForFreeze.style.left = '0';
                                state.imaVideoElementForFreeze.style.width = '100%';
                                state.imaVideoElementForFreeze.style.height = '100%';
                                state.imaVideoElementForFreeze.style.objectFit = 'contain';
                                state.imaVideoElementForFreeze.style.zIndex = '2';
                                state.imaVideoElementForFreeze.style.opacity = '1';
                                
                                // Nastavíme klikateľnosť, ak existuje click-through URL
                                if (state.adClickThroughUrl) {
                                    state.imaVideoElementForFreeze.style.pointerEvents = 'auto';
                                    state.imaVideoElementForFreeze.style.cursor = 'pointer';
                                    state.imaVideoElementForFreeze.classList.add('clickable');
                                    state.imaVideoElementForFreeze.setAttribute('data-clickable', 'true');
                                    
                                    // Odstránime starý handler, ak existuje
                                    if (state.freezeFrameClickHandler) {
                                        state.imaVideoElementForFreeze.removeEventListener('click', state.freezeFrameClickHandler);
                                    }
                                    
                                    // Pridáme click handler
                                    const clickHandler = function(e) {
                                        e.preventDefault();
                                        e.stopPropagation();
                                        if (state.adClickThroughUrl) {
                                            window.open(state.adClickThroughUrl, '_blank', 'noopener,noreferrer');
                                        }
                                    };
                                    state.imaVideoElementForFreeze.addEventListener('click', clickHandler);
                                    // Uložíme handler pre možné odstránenie
                                    state.freezeFrameClickHandler = clickHandler;
                                    console.log(`✓ Player ${playerNumber}: Freeze frame je klikateľný s URL:`, state.adClickThroughUrl);
                                } else {
                                    state.imaVideoElementForFreeze.style.pointerEvents = 'none';
                                    // Odstránime handler, ak existuje, ale nie je click-through URL
                                    if (state.freezeFrameClickHandler) {
                                        state.imaVideoElementForFreeze.removeEventListener('click', state.freezeFrameClickHandler);
                                        state.freezeFrameClickHandler = null;
                                    }
                                }
                                
                                state.imaVideoElementForFreeze.style.display = 'block';
                                state.imaVideoElementForFreeze.style.visibility = 'visible';
                                state.imaVideoElementForFreeze.style.background = 'transparent';
                                const videoElement = playerInstance.getElement();
                    if (videoElement) {
                        videoElement.removeAttribute('controls');
                        videoElement.controls = false;
                        videoElement.style.opacity = '0';
                        videoElement.style.pointerEvents = 'none';
                        videoElement.style.zIndex = '1';
                    }
                            }
                        }
                    }
                    
                    state.adsCompleted = true;
                    state.adsStarted = false;
                });
                
                playerInstance.getElement().addEventListener('adsloaded', function(e) {
                    console.log(`✓ Player ${playerNumber}: Reklamy načítané (adsloaded event)`);
                    
                    // Skontrolujeme, či je platná reklama
                    let hasValidAd = false;
                    if (playerInstance.isAd()) {
                        const adInstance = playerInstance.getAd();
                        if (adInstance) {
                                const adsManager = adInstance.getAdsManager();
                                if (adsManager) {
                                try {
                                    const currentAd = adsManager.getCurrentAd();
                                    if (currentAd) {
                                        hasValidAd = true;
                                    }
                                } catch (err) {}
                            }
                        }
                    }
                    
                    if (!hasValidAd) {
                        console.log(`⚠ Player ${playerNumber}: Prázdny VAST alebo žiadna reklama - skrývame player`);
                        hidePlayerIfNoAd(containerId);
                    } else {
                        // Zobrazíme player, ak je platná reklama
                        console.log(`✓ Player ${playerNumber}: Platná reklama - zobrazujeme player`);
                        showPlayerIfAdExists(containerId);
                        // Zrušíme timeout, ak sa adsloaded úspešne spustil
                        if (state.adsRequestTimeout) {
                            clearTimeout(state.adsRequestTimeout);
                            state.adsRequestTimeout = null;
                        }
                        state.adsReady = true;
                    }
                });
                
                playerInstance.getElement().addEventListener('adserror', function(e) {
                    console.error(`⚠⚠⚠ Player ${playerNumber}: Adserror event ⚠⚠⚠`);
                    console.error(`Player ${playerNumber}: Adserror detail:`, e.detail);
                    
                    // Skontrolujeme, či je to chyba 303
                    let isError303 = false;
                    if (e.detail) {
                        if (e.detail.code === 303 || e.detail.errorCode === 303) {
                            isError303 = true;
                        }
                        if (e.detail.message) {
                            const errorMsg = e.detail.message.toLowerCase();
                            if (errorMsg.includes('no ads vast response') || 
                                errorMsg.includes('error 303') ||
                                errorMsg.includes('aderror 303')) {
                                isError303 = true;
                            }
                        }
                    }
                    
                    if (isError303) {
                        console.error(`⚠ Player ${playerNumber}: Chyba 303: No Ads VAST response - skrývame player`);
                    }
                    
                    hidePlayerIfNoAd(containerId);
                });
                
                playerInstance.getElement().addEventListener('playing', function() {
                    if (playerInstance.isAd() && !state.snapshotCaptured) {
                    setTimeout(function() {
                            let actualVideoElement = null;
                            const allVideos = document.querySelectorAll(`#${containerId} video`);
                            for (let vid of allVideos) {
                                if (vid.readyState >= 2 && vid.videoWidth > 0 && vid.videoHeight > 0 &&
                                    !vid.paused && vid.currentTime > 0) {
                                    actualVideoElement = vid;
                                    break;
                                }
                            }
                            if (!actualVideoElement) {
                                actualVideoElement = playerInstance.getElement();
                            }
                            if (actualVideoElement && actualVideoElement.readyState >= 2 &&
                                actualVideoElement.videoWidth > 0 && actualVideoElement.videoHeight > 0) {
                                const snapshotSuccess = trySnapshotToBg(actualVideoElement);
                                if (snapshotSuccess) {
                                    state.snapshotCaptured = true;
                                }
                            }
                    }, 500);
                    }
                });
                
                // Intersection Observer pre player
                if ('IntersectionObserver' in window) {
                    const videoElement = playerInstance.getElement();
                    
                    state.intersectionObserver = new IntersectionObserver(function(entries) {
                        entries.forEach(function(entry) {
                            if (state.rvfcFreezeCaptured && state.imaVideoElementForFreeze && state.imaVideoElementForFreeze.parentNode) {
                                return;
                            }
                            
                            const wasVisible = state.isVisible;
                            state.isVisible = entry.isIntersecting && entry.intersectionRatio > 0.5;
                            
                            if (state.isVisible && !wasVisible) {
                                console.log(`Player ${playerNumber} je viditeľný`);
                                if (state.adsReady && !state.adsCompleted) {
                                    if (playerInstance.isAd()) {
                                        const adInstance = playerInstance.getAd();
                                        if (adInstance && adInstance.paused) {
                        adInstance.play().catch(function(err) {
                                                console.error(`Chyba pri spustení reklám v player ${playerNumber}:`, err);
                                            });
                                        }
                                    }
                                }
                        }
                    });
                }, {
                        threshold: [0, 0.5, 1.0],
                    rootMargin: '0px'
                });
                
                    state.intersectionObserver.observe(videoElement);
            }
        }).catch(function(err) {
                console.error(`Chyba pri inicializácii player ${playerNumber}:`, err);
            });
        }
        
        // Inicializujeme player
        loadIMASDK().then(function() {
            // Inicializujeme player
            initializePlayer(2, VAST_URL);
        }).catch(function(err) {
            console.error('Chyba pri načítaní IMA SDK:', err);
        });
    </script>
</body>
</html>
